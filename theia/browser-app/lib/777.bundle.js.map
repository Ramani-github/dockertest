{"version":3,"file":"777.bundle.js","mappings":"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","sources":["webpack:///../node_modules/@phosphor/coreutils/lib/index.js?","webpack:///../node_modules/@phosphor/coreutils/lib/json.js?","webpack:///../node_modules/@phosphor/coreutils/lib/mime.js?","webpack:///../node_modules/@phosphor/coreutils/lib/promise.js?","webpack:///../node_modules/@phosphor/coreutils/lib/random.js?","webpack:///../node_modules/@phosphor/coreutils/lib/token.js?","webpack:///../node_modules/@phosphor/coreutils/lib/uuid.js?","webpack:///../node_modules/@theia/callhierarchy/src/common/glob.ts?","webpack:///../node_modules/@theia/callhierarchy/src/common/language-selector.ts?","webpack:///../node_modules/@theia/callhierarchy/src/common/paths.ts?","webpack:///../node_modules/@theia/core/src/browser/endpoint.ts?","webpack:///../node_modules/@theia/core/src/common/buffer.ts?","webpack:///../node_modules/@theia/core/src/common/cancellation.ts?","webpack:///../node_modules/@theia/core/src/common/disposable.ts?","webpack:///../node_modules/@theia/core/src/common/event.ts?","webpack:///../node_modules/@theia/core/src/common/os.ts?","webpack:///../node_modules/@theia/core/src/common/path.ts?","webpack:///../node_modules/@theia/core/src/common/promise-util.ts?","webpack:///../node_modules/@theia/core/src/common/stream.ts?","webpack:///../node_modules/@theia/core/src/common/strings.ts?","webpack:///../node_modules/@theia/core/src/common/uri.ts?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/dbcs-codec.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/dbcs-data.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/index.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/internal.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/sbcs-codec.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/sbcs-data-generated.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/sbcs-data.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/utf16.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/utf32.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/encodings/utf7.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/lib/bom-handling.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/lib/index.js?","webpack:///../node_modules/@theia/core/node_modules/iconv-lite/lib/streams.js?","webpack:///../node_modules/@theia/core/shared/@phosphor/coreutils/index.js?","webpack:///../node_modules/@theia/core/shared/vscode-languageserver-protocol/index.js?","webpack:///../node_modules/@theia/core/shared/vscode-uri/index.js?","webpack:///../node_modules/@theia/debug/src/node/debug-adapter-session.ts?","webpack:///../node_modules/@theia/debug/src/node/inline-debug-adapter.ts?","webpack:///../node_modules/@theia/debug/src/node/stream-debug-adapter.ts?","webpack:///../node_modules/@theia/filesystem/src/common/files.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/arrays.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/assert.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/character-classifier.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/connection.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/disposable-util.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/editor-options.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/errors.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/id-generator.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/index.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/link-computer.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/object-identifier.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/objects.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/paths-util.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/plugin-api-rpc-model.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/plugin-api-rpc.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/plugin-ext-api-contribution.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/plugin-protocol.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/rpc-protocol.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/semantic-tokens-dto.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/types.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/uint.ts?","webpack:///../node_modules/@theia/plugin-ext/src/common/uri-components.ts?","webpack:///../node_modules/@theia/plugin-ext/src/hosted/browser/worker/debug-stub.ts?","webpack:///../node_modules/@theia/plugin-ext/src/hosted/browser/worker/plugin-manifest-loader.ts?","webpack:///../node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-env-ext.ts?","webpack:///../node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-main.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/authentication-ext.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/clipboard-ext.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/command-registry.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/comments.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/custom-editors.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/decorations.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/dialogs.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/document-data.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/documents.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/editors-and-documents.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/env.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/file-system-event-service-ext-impl.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/file-system-ext-impl.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/known-commands.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/label-service.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/call-hierarchy.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/code-action.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/color.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/completion.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/declaration.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/definition.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/diagnostics.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/document-formatting.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/document-highlight.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/folding.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/hover.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/implementation.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/lens.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/link-provider.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/on-type-formatting.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/outline.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/range-formatting.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/reference.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/rename.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/selection-range.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/semantic-highlighting.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/signature.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/type-definition.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/util.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/languages/workspace-symbol.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/markdown-string.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/message-registry.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/node/debug/debug.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-executable-resolver.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-session.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-starter.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-tracker.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/notification.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/output-channel-registry.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/output-channel/output-channel-item.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/path.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/plugin-context.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/plugin-icon-path.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/plugin-manager.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/plugin-storage.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/preference-registry.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/preferences/configuration.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/prefix-sum-computer.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/quick-open.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/scm.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/secrets-ext.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/status-bar-message-registry.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/status-bar/status-bar-item.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/tasks/task-provider.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/tasks/tasks.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/terminal-ext.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/text-editor.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/text-editors.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/theming.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/timeline.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/tree/tree-views.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/type-converters.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/types-impl.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/webviews.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/window-state.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/word-helper.ts?","webpack:///../node_modules/@theia/plugin-ext/src/plugin/workspace.ts?","webpack:///../node_modules/base64-js/index.js?","webpack:///../node_modules/buffer/index.js?","webpack:///../node_modules/ieee754/index.js?","webpack:///../node_modules/is-electron/index.js?","webpack:///../node_modules/lodash.clonedeep/index.js?","webpack:///../node_modules/safer-buffer/safer.js?","webpack:///../node_modules/string_decoder/index.js?","webpack:///../node_modules/uuid/dist/esm-browser/rng.js?","webpack:///../node_modules/uuid/dist/esm-browser/regex.js?","webpack:///../node_modules/uuid/dist/esm-browser/validate.js?","webpack:///../node_modules/uuid/dist/esm-browser/stringify.js?","webpack:///../node_modules/uuid/dist/esm-browser/v1.js?","webpack:///../node_modules/uuid/dist/esm-browser/parse.js?","webpack:///../node_modules/uuid/dist/esm-browser/v35.js?","webpack:///../node_modules/uuid/dist/esm-browser/md5.js?","webpack:///../node_modules/uuid/dist/esm-browser/v3.js?","webpack:///../node_modules/uuid/dist/esm-browser/v4.js?","webpack:///../node_modules/uuid/dist/esm-browser/sha1.js?","webpack:///../node_modules/uuid/dist/esm-browser/v5.js?","webpack:///../node_modules/uuid/dist/esm-browser/nil.js?","webpack:///../node_modules/uuid/dist/esm-browser/version.js?","webpack:///../node_modules/vscode-jsonrpc/lib/cancellation.js?","webpack:///../node_modules/vscode-jsonrpc/lib/events.js?","webpack:///../node_modules/vscode-jsonrpc/lib/is.js?","webpack:///../node_modules/vscode-jsonrpc/lib/linkedMap.js?","webpack:///../node_modules/vscode-jsonrpc/lib/main.js?","webpack:///../node_modules/vscode-jsonrpc/lib/messageReader.js?","webpack:///../node_modules/vscode-jsonrpc/lib/messageWriter.js?","webpack:///../node_modules/vscode-jsonrpc/lib/messages.js?","webpack:///../node_modules/vscode-jsonrpc/lib/pipeSupport.js?","webpack:///../node_modules/vscode-jsonrpc/lib/socketSupport.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/main.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/messages.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.progress.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js?","webpack:///../node_modules/vscode-languageserver-protocol/lib/utils/is.js?","webpack:///../node_modules/vscode-languageserver-types/lib/esm/main.js?","webpack:///../node_modules/vscode-uri/lib/esm/index.js?"],"sourcesContent":["\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n__export(require(\"./json\"));\n__export(require(\"./mime\"));\n__export(require(\"./promise\"));\n__export(require(\"./random\"));\n__export(require(\"./token\"));\n__export(require(\"./uuid\"));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for JSON-specific functions.\n */\nvar JSONExt;\n(function (JSONExt) {\n    /**\n     * A shared frozen empty JSONObject\n     */\n    JSONExt.emptyObject = Object.freeze({});\n    /**\n     * A shared frozen empty JSONArray\n     */\n    JSONExt.emptyArray = Object.freeze([]);\n    /**\n     * Test whether a JSON value is a primitive.\n     *\n     * @param value - The JSON value of interest.\n     *\n     * @returns `true` if the value is a primitive,`false` otherwise.\n     */\n    function isPrimitive(value) {\n        return (value === null ||\n            typeof value === 'boolean' ||\n            typeof value === 'number' ||\n            typeof value === 'string');\n    }\n    JSONExt.isPrimitive = isPrimitive;\n    function isArray(value) {\n        return Array.isArray(value);\n    }\n    JSONExt.isArray = isArray;\n    function isObject(value) {\n        return !isPrimitive(value) && !isArray(value);\n    }\n    JSONExt.isObject = isObject;\n    /**\n     * Compare two JSON values for deep equality.\n     *\n     * @param first - The first JSON value of interest.\n     *\n     * @param second - The second JSON value of interest.\n     *\n     * @returns `true` if the values are equivalent, `false` otherwise.\n     */\n    function deepEqual(first, second) {\n        // Check referential and primitive equality first.\n        if (first === second) {\n            return true;\n        }\n        // If one is a primitive, the `===` check ruled out the other.\n        if (isPrimitive(first) || isPrimitive(second)) {\n            return false;\n        }\n        // Test whether they are arrays.\n        var a1 = isArray(first);\n        var a2 = isArray(second);\n        // Bail if the types are different.\n        if (a1 !== a2) {\n            return false;\n        }\n        // If they are both arrays, compare them.\n        if (a1 && a2) {\n            return deepArrayEqual(first, second);\n        }\n        // At this point, they must both be objects.\n        return deepObjectEqual(first, second);\n    }\n    JSONExt.deepEqual = deepEqual;\n    /**\n     * Create a deep copy of a JSON value.\n     *\n     * @param value - The JSON value to copy.\n     *\n     * @returns A deep copy of the given JSON value.\n     */\n    function deepCopy(value) {\n        // Do nothing for primitive values.\n        if (isPrimitive(value)) {\n            return value;\n        }\n        // Deep copy an array.\n        if (isArray(value)) {\n            return deepArrayCopy(value);\n        }\n        // Deep copy an object.\n        return deepObjectCopy(value);\n    }\n    JSONExt.deepCopy = deepCopy;\n    /**\n     * Compare two JSON arrays for deep equality.\n     */\n    function deepArrayEqual(first, second) {\n        // Check referential equality first.\n        if (first === second) {\n            return true;\n        }\n        // Test the arrays for equal length.\n        if (first.length !== second.length) {\n            return false;\n        }\n        // Compare the values for equality.\n        for (var i = 0, n = first.length; i < n; ++i) {\n            if (!deepEqual(first[i], second[i])) {\n                return false;\n            }\n        }\n        // At this point, the arrays are equal.\n        return true;\n    }\n    /**\n     * Compare two JSON objects for deep equality.\n     */\n    function deepObjectEqual(first, second) {\n        // Check referential equality first.\n        if (first === second) {\n            return true;\n        }\n        // Check for the first object's keys in the second object.\n        for (var key in first) {\n            if (!(key in second)) {\n                return false;\n            }\n        }\n        // Check for the second object's keys in the first object.\n        for (var key in second) {\n            if (!(key in first)) {\n                return false;\n            }\n        }\n        // Compare the values for equality.\n        for (var key in first) {\n            if (!deepEqual(first[key], second[key])) {\n                return false;\n            }\n        }\n        // At this point, the objects are equal.\n        return true;\n    }\n    /**\n     * Create a deep copy of a JSON array.\n     */\n    function deepArrayCopy(value) {\n        var result = new Array(value.length);\n        for (var i = 0, n = value.length; i < n; ++i) {\n            result[i] = deepCopy(value[i]);\n        }\n        return result;\n    }\n    /**\n     * Create a deep copy of a JSON object.\n     */\n    function deepObjectCopy(value) {\n        var result = {};\n        for (var key in value) {\n            result[key] = deepCopy(value[key]);\n        }\n        return result;\n    }\n})(JSONExt = exports.JSONExt || (exports.JSONExt = {}));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * An object which stores MIME data for general application use.\n *\n * #### Notes\n * This class does not attempt to enforce \"correctness\" of MIME types\n * and their associated data. Since this class is designed to transfer\n * arbitrary data and objects within the same application, it assumes\n * that the user provides correct and accurate data.\n */\nvar MimeData = /** @class */ (function () {\n    function MimeData() {\n        this._types = [];\n        this._values = [];\n    }\n    /**\n     * Get an array of the MIME types contained within the dataset.\n     *\n     * @returns A new array of the MIME types, in order of insertion.\n     */\n    MimeData.prototype.types = function () {\n        return this._types.slice();\n    };\n    /**\n     * Test whether the dataset has an entry for the given type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @returns `true` if the dataset contains a value for the given\n     *   MIME type, `false` otherwise.\n     */\n    MimeData.prototype.hasData = function (mime) {\n        return this._types.indexOf(mime) !== -1;\n    };\n    /**\n     * Get the data value for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @returns The value for the given MIME type, or `undefined` if\n     *   the dataset does not contain a value for the type.\n     */\n    MimeData.prototype.getData = function (mime) {\n        var i = this._types.indexOf(mime);\n        return i !== -1 ? this._values[i] : undefined;\n    };\n    /**\n     * Set the data value for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @param data - The data value for the given MIME type.\n     *\n     * #### Notes\n     * This will overwrite any previous entry for the MIME type.\n     */\n    MimeData.prototype.setData = function (mime, data) {\n        this.clearData(mime);\n        this._types.push(mime);\n        this._values.push(data);\n    };\n    /**\n     * Remove the data entry for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * #### Notes\n     * This is a no-op if there is no entry for the given MIME type.\n     */\n    MimeData.prototype.clearData = function (mime) {\n        var i = this._types.indexOf(mime);\n        if (i !== -1) {\n            this._types.splice(i, 1);\n            this._values.splice(i, 1);\n        }\n    };\n    /**\n     * Remove all data entries from the dataset.\n     */\n    MimeData.prototype.clear = function () {\n        this._types.length = 0;\n        this._values.length = 0;\n    };\n    return MimeData;\n}());\nexports.MimeData = MimeData;\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A class which wraps a promise into a delegate object.\n *\n * #### Notes\n * This class is useful when the logic to resolve or reject a promise\n * cannot be defined at the point where the promise is created.\n */\nvar PromiseDelegate = /** @class */ (function () {\n    /**\n     * Construct a new promise delegate.\n     */\n    function PromiseDelegate() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n    /**\n     * Resolve the wrapped promise with the given value.\n     *\n     * @param value - The value to use for resolving the promise.\n     */\n    PromiseDelegate.prototype.resolve = function (value) {\n        var resolve = this._resolve;\n        resolve(value);\n    };\n    /**\n     * Reject the wrapped promise with the given value.\n     *\n     * @reason - The reason for rejecting the promise.\n     */\n    PromiseDelegate.prototype.reject = function (reason) {\n        var reject = this._reject;\n        reject(reason);\n    };\n    return PromiseDelegate;\n}());\nexports.PromiseDelegate = PromiseDelegate;\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for random number related functionality.\n */\nvar Random;\n(function (Random) {\n    /**\n     * A function which generates random bytes.\n     *\n     * @param buffer - The `Uint8Array` to fill with random bytes.\n     *\n     * #### Notes\n     * A cryptographically strong random number generator will be used if\n     * available. Otherwise, `Math.random` will be used as a fallback for\n     * randomness.\n     *\n     * The following RNGs are supported, listed in order of precedence:\n     *   - `window.crypto.getRandomValues`\n     *   - `window.msCrypto.getRandomValues`\n     *   - `require('crypto').randomFillSync\n     *   - `require('crypto').randomBytes\n     *   - `Math.random`\n     */\n    Random.getRandomValues = (function () {\n        // Look up the crypto module if available.\n        var crypto = ((typeof window !== 'undefined' && (window.crypto || window.msCrypto)) ||\n            (typeof require !== 'undefined' && require('crypto')) || null);\n        // Modern browsers and IE 11\n        if (crypto && typeof crypto.getRandomValues === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.getRandomValues(buffer);\n            };\n        }\n        // Node 7+\n        if (crypto && typeof crypto.randomFillSync === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.randomFillSync(buffer);\n            };\n        }\n        // Node 0.10+\n        if (crypto && typeof crypto.randomBytes === 'function') {\n            return function getRandomValues(buffer) {\n                var bytes = crypto.randomBytes(buffer.length);\n                for (var i = 0, n = bytes.length; i < n; ++i) {\n                    buffer[i] = bytes[i];\n                }\n            };\n        }\n        // Fallback\n        return function getRandomValues(buffer) {\n            var value = 0;\n            for (var i = 0, n = buffer.length; i < n; ++i) {\n                if (i % 4 === 0) {\n                    value = Math.random() * 0xFFFFFFFF >>> 0;\n                }\n                buffer[i] = value & 0xFF;\n                value >>>= 8;\n            }\n        };\n    })();\n})(Random = exports.Random || (exports.Random = {}));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A runtime object which captures compile-time type information.\n *\n * #### Notes\n * A token captures the compile-time type of an interface or class in\n * an object which can be used at runtime in a type-safe fashion.\n */\nvar Token = /** @class */ (function () {\n    /**\n     * Construct a new token.\n     *\n     * @param name - A human readable name for the token.\n     */\n    function Token(name) {\n        this.name = name;\n        this._tokenStructuralPropertyT = null;\n    }\n    return Token;\n}());\nexports.Token = Token;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nvar random_1 = require(\"./random\");\n/**\n * The namespace for UUID related functionality.\n */\nvar UUID;\n(function (UUID) {\n    /**\n     * A function which generates UUID v4 identifiers.\n     *\n     * @returns A new UUID v4 string.\n     *\n     * #### Notes\n     * This implementation complies with RFC 4122.\n     *\n     * This uses `Random.getRandomValues()` for random bytes, which in\n     * turn will use the underlying `crypto` module of the platform if\n     * it is available. The fallback for randomness is `Math.random`.\n     */\n    UUID.uuid4 = (function () {\n        // Create a 16 byte array to hold the random values.\n        var bytes = new Uint8Array(16);\n        // Create a look up table from bytes to hex strings.\n        var lut = new Array(256);\n        // Pad the single character hex digits with a leading zero.\n        for (var i = 0; i < 16; ++i) {\n            lut[i] = '0' + i.toString(16);\n        }\n        // Populate the rest of the hex digits.\n        for (var i = 16; i < 256; ++i) {\n            lut[i] = i.toString(16);\n        }\n        // Return a function which generates the UUID.\n        return function uuid4() {\n            // Get a new batch of random values.\n            random_1.Random.getRandomValues(bytes);\n            // Set the UUID version number to 4.\n            bytes[6] = 0x40 | (bytes[6] & 0x0F);\n            // Set the clock sequence bit to the RFC spec.\n            bytes[8] = 0x80 | (bytes[8] & 0x3F);\n            // Assemble the UUID string.\n            return (lut[bytes[0]] +\n                lut[bytes[1]] +\n                lut[bytes[2]] +\n                lut[bytes[3]] +\n                '-' +\n                lut[bytes[4]] +\n                lut[bytes[5]] +\n                '-' +\n                lut[bytes[6]] +\n                lut[bytes[7]] +\n                '-' +\n                lut[bytes[8]] +\n                lut[bytes[9]] +\n                '-' +\n                lut[bytes[10]] +\n                lut[bytes[11]] +\n                lut[bytes[12]] +\n                lut[bytes[13]] +\n                lut[bytes[14]] +\n                lut[bytes[15]]);\n        };\n    })();\n})(UUID = exports.UUID || (exports.UUID = {}));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from '@theia/core/lib/common/strings';\nimport * as paths from './paths';\nimport { CharCode } from '@theia/core/lib/common/char-code';\n\n/* eslint-disable @typescript-eslint/no-shadow, no-null/no-null */\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behavior\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { match as matchGlobPattern } from './glob';\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, uriScheme: string, path: string, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, uriScheme, path, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === uriScheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === path || matchGlobPattern(pattern, path)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/* eslint-disable no-void */\n/* eslint-disable no-null/no-null */\n'use strict';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { startsWithIgnoreCase } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// eslint-disable-next-line @typescript-eslint/no-shadow\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '../common/uri';\n\n/**\n * An endpoint provides URLs for http and ws, based on configuration and defaults.\n */\nexport class Endpoint {\n    static readonly PROTO_HTTPS: string = 'https:';\n    static readonly PROTO_HTTP: string = 'http:';\n    static readonly PROTO_WS: string = 'ws:';\n    static readonly PROTO_WSS: string = 'wss:';\n    static readonly PROTO_FILE: string = 'file:';\n\n    constructor(\n        protected readonly options: Endpoint.Options = {},\n        protected readonly location: Endpoint.Location = self.location\n    ) { }\n\n    getWebSocketUrl(): URI {\n        return new URI(`${this.wsScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    getRestUrl(): URI {\n        return new URI(`${this.httpScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    protected get pathname(): string {\n        if (this.location.protocol === Endpoint.PROTO_FILE) {\n            return '';\n        }\n        if (this.location.pathname === '/') {\n            return '';\n        }\n        if (this.location.pathname.endsWith('/')) {\n            return this.location.pathname.substr(0, this.location.pathname.length - 1);\n        }\n        return this.location.pathname;\n    }\n\n    get host(): string {\n        if (this.options.host) {\n            return this.options.host;\n        }\n        if (this.location.host) {\n            return this.location.host;\n        }\n        return 'localhost:' + this.port;\n    }\n\n    protected get port(): string {\n        return this.getSearchParam('port', '3000');\n    }\n\n    protected getSearchParam(name: string, defaultValue: string): string {\n        const search = this.location.search;\n        if (!search) {\n            return defaultValue;\n        }\n        return search.substr(1).split('&')\n            .filter(value => value.startsWith(name + '='))\n            .map(value => {\n                const encoded = value.substr(name.length + 1);\n                return decodeURIComponent(encoded);\n            })[0] || defaultValue;\n    }\n\n    protected get wsScheme(): string {\n        if (this.options.wsScheme) {\n            return this.options.wsScheme;\n        }\n        return this.httpScheme === Endpoint.PROTO_HTTPS ? Endpoint.PROTO_WSS : Endpoint.PROTO_WS;\n    }\n\n    /**\n     * The HTTP/HTTPS scheme of the endpoint, or the user defined one.\n     * See: `Endpoint.Options.httpScheme`.\n     */\n    get httpScheme(): string {\n        if (this.options.httpScheme) {\n            return this.options.httpScheme;\n        }\n        if (this.location.protocol === Endpoint.PROTO_HTTP ||\n            this.location.protocol === Endpoint.PROTO_HTTPS) {\n            return this.location.protocol;\n        }\n        return Endpoint.PROTO_HTTP;\n    }\n\n    protected get path(): string {\n        if (this.options.path) {\n            if (this.options.path.startsWith('/')) {\n                return this.options.path;\n            } else {\n                return '/' + this.options.path;\n            }\n        }\n        return this.options.path || '';\n    }\n}\n\nexport namespace Endpoint {\n    export class Options {\n        host?: string;\n        wsScheme?: string;\n        httpScheme?: string;\n        path?: string;\n    }\n\n    // Necessary for running tests with dependency on TS lib on node\n    // FIXME figure out how to mock with ts-node\n    export class Location {\n        host: string;\n        pathname: string;\n        search: string;\n        protocol: string;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/buffer.ts\n\n/* eslint-disable no-null/no-null */\n\nimport { Buffer as SaferBuffer } from 'safer-buffer';\nimport * as iconv from 'iconv-lite';\nimport * as streams from './stream';\n\nconst hasBuffer = (typeof Buffer !== 'undefined');\nconst hasTextEncoder = (typeof TextEncoder !== 'undefined');\nconst hasTextDecoder = (typeof TextDecoder !== 'undefined');\n\nlet textEncoder: TextEncoder | null;\nlet textDecoder: TextDecoder | null;\n\nexport class BinaryBuffer {\n\n    static alloc(byteLength: number): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.allocUnsafe(byteLength));\n        } else {\n            return new BinaryBuffer(new Uint8Array(byteLength));\n        }\n    }\n\n    static wrap(actual: Uint8Array): BinaryBuffer {\n        if (hasBuffer && !(Buffer.isBuffer(actual))) {\n            // https://nodejs.org/dist/latest-v10.x/docs/api/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length\n            // Create a zero-copy Buffer wrapper around the ArrayBuffer pointed to by the Uint8Array\n            actual = Buffer.from(actual.buffer, actual.byteOffset, actual.byteLength);\n        }\n        return new BinaryBuffer(actual);\n    }\n\n    static fromString(source: string): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.from(source));\n        } else if (hasTextEncoder) {\n            if (!textEncoder) {\n                textEncoder = new TextEncoder();\n            }\n            return new BinaryBuffer(textEncoder.encode(source));\n        } else {\n            return new BinaryBuffer(iconv.encode(source, 'utf8'));\n        }\n    }\n\n    static concat(buffers: BinaryBuffer[], totalLength?: number): BinaryBuffer {\n        if (typeof totalLength === 'undefined') {\n            totalLength = 0;\n            for (let i = 0, len = buffers.length; i < len; i++) {\n                totalLength += buffers[i].byteLength;\n            }\n        }\n\n        const ret = BinaryBuffer.alloc(totalLength);\n        let offset = 0;\n        for (let i = 0, len = buffers.length; i < len; i++) {\n            const element = buffers[i];\n            ret.set(element, offset);\n            offset += element.byteLength;\n        }\n\n        return ret;\n    }\n\n    readonly buffer: Uint8Array;\n    readonly byteLength: number;\n\n    private constructor(buffer: Uint8Array) {\n        this.buffer = buffer;\n        this.byteLength = this.buffer.byteLength;\n    }\n\n    toString(): string {\n        if (hasBuffer) {\n            return this.buffer.toString();\n        } else if (hasTextDecoder) {\n            if (!textDecoder) {\n                textDecoder = new TextDecoder();\n            }\n            return textDecoder.decode(this.buffer);\n        } else {\n            return iconv.decode(SaferBuffer.from(this.buffer), 'utf8');\n        }\n    }\n\n    slice(start?: number, end?: number): BinaryBuffer {\n        // IMPORTANT: use subarray instead of slice because TypedArray#slice\n        // creates shallow copy and NodeBuffer#slice doesn't. The use of subarray\n        // ensures the same, performant, behaviour.\n        return new BinaryBuffer(this.buffer.subarray(start, end));\n    }\n\n    set(array: BinaryBuffer, offset?: number): void;\n    set(array: Uint8Array, offset?: number): void;\n    set(array: BinaryBuffer | Uint8Array, offset?: number): void {\n        if (array instanceof BinaryBuffer) {\n            this.buffer.set(array.buffer, offset);\n        } else {\n            this.buffer.set(array, offset);\n        }\n    }\n\n    readUInt32BE(offset: number): number {\n        return (\n            this.buffer[offset] * 2 ** 24\n            + this.buffer[offset + 1] * 2 ** 16\n            + this.buffer[offset + 2] * 2 ** 8\n            + this.buffer[offset + 3]\n        );\n    }\n\n    writeUInt32BE(value: number, offset: number): void {\n        this.buffer[offset + 3] = value;\n        value = value >>> 8;\n        this.buffer[offset + 2] = value;\n        value = value >>> 8;\n        this.buffer[offset + 1] = value;\n        value = value >>> 8;\n        this.buffer[offset] = value;\n    }\n\n    readUInt32LE(offset: number): number {\n        return (\n            ((this.buffer[offset + 0] << 0) >>> 0) |\n            ((this.buffer[offset + 1] << 8) >>> 0) |\n            ((this.buffer[offset + 2] << 16) >>> 0) |\n            ((this.buffer[offset + 3] << 24) >>> 0)\n        );\n    }\n\n    writeUInt32LE(value: number, offset: number): void {\n        this.buffer[offset + 0] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 1] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 2] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 3] = (value & 0b11111111);\n    }\n\n    readUInt8(offset: number): number {\n        return this.buffer[offset];\n    }\n\n    writeUInt8(value: number, offset: number): void {\n        this.buffer[offset] = value;\n    }\n\n}\n\nexport interface BinaryBufferReadable extends streams.Readable<BinaryBuffer> { }\nexport namespace BinaryBufferReadable {\n    export function toBuffer(readable: BinaryBufferReadable): BinaryBuffer {\n        return streams.consumeReadable<BinaryBuffer>(readable, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadable {\n        return streams.toReadable<BinaryBuffer>(buffer);\n    }\n    export function fromReadable(readable: streams.Readable<string>): BinaryBufferReadable {\n        return {\n            read(): BinaryBuffer | null {\n                const value = readable.read();\n\n                if (typeof value === 'string') {\n                    return BinaryBuffer.fromString(value);\n                }\n\n                return null;\n            }\n        };\n    }\n}\n\nexport interface BinaryBufferReadableStream extends streams.ReadableStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableStream {\n    export function toBuffer(stream: BinaryBufferReadableStream): Promise<BinaryBuffer> {\n        return streams.consumeStream<BinaryBuffer>(stream, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadableStream {\n        return streams.toStream<BinaryBuffer>(buffer, chunks => BinaryBuffer.concat(chunks));\n    }\n}\n\nexport interface BinaryBufferReadableBufferedStream extends streams.ReadableBufferedStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableBufferedStream {\n    export async function toBuffer(bufferedStream: streams.ReadableBufferedStream<BinaryBuffer>): Promise<BinaryBuffer> {\n        if (bufferedStream.ended) {\n            return BinaryBuffer.concat(bufferedStream.buffer);\n        }\n\n        return BinaryBuffer.concat([\n\n            // Include already read chunks...\n            ...bufferedStream.buffer,\n\n            // ...and all additional chunks\n            await BinaryBufferReadableStream.toBuffer(bufferedStream.stream)\n        ]);\n    }\n}\n\nexport interface BinaryBufferWriteableStream extends streams.WriteableStream<BinaryBuffer> { }\nexport namespace BinaryBufferWriteableStream {\n    export function create(options?: streams.WriteableStreamOptions): BinaryBufferWriteableStream {\n        return streams.newWriteableStream<BinaryBuffer>(chunks => BinaryBuffer.concat(chunks), options);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n     * An event emitted when cancellation is requested\n     * @event\n     */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, { maxListeners: 0 }));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n}\n\nexport class CancellationError extends Error {\n    constructor() {\n        super('Canceled');\n        this.name = this.message;\n    }\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is Disposable {\n        return !!arg && typeof arg === 'object' && 'dispose' in arg && typeof arg['dispose'] === 'function';\n    }\n    export function create(func: () => void): Disposable {\n        return {\n            dispose: func\n        };\n    }\n    export const NULL = create(() => { });\n}\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    /**\n     * This event is fired only once\n     * on first dispose of not empty collection.\n     */\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n            this.onDisposeEmitter.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            disposable.dispose = originalDispose;\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]): Disposable;\n    /**\n     * An emitter will print a warning if more listeners are added for this event.\n     * The event.maxListeners allows the limit to be modified for this specific event.\n     * The value can be set to 0 to indicate an unlimited number of listener.\n     */\n    maxListeners: number\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            maxListeners: 0,\n        });\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static LEAK_WARNING_THRESHHOLD = 175;\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    protected _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    private _leakingStacks: Map<string, number> | undefined;\n    private _leakWarnCountdown = 0;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const removeMaxListenersCheck = this.checkMaxListeners(this._event.maxListeners);\n\n                const result: Disposable = {\n                    dispose: () => {\n                        if (removeMaxListenersCheck) {\n                            removeMaxListenersCheck();\n                        }\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: Emitter.LEAK_WARNING_THRESHHOLD\n            }\n            );\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): (() => void) | undefined {\n        if (maxListeners === 0 || !this._callbacks) {\n            return undefined;\n        }\n        const listenerCount = this._callbacks.length;\n        if (listenerCount <= maxListeners) {\n            return undefined;\n        }\n\n        const popStack = this.pushLeakingStack();\n\n        this._leakWarnCountdown -= 1;\n        if (this._leakWarnCountdown <= 0) {\n            // only warn on first exceed and then every time the limit\n            // is exceeded by 50% again\n            this._leakWarnCountdown = maxListeners * 0.5;\n\n            let topStack: string;\n            let topCount = 0;\n            this._leakingStacks!.forEach((stackCount, stack) => {\n                if (!topStack || topCount < stackCount) {\n                    topStack = stack;\n                    topCount = stackCount;\n                }\n            });\n\n            // eslint-disable-next-line max-len\n            console.warn(`Possible Emitter memory leak detected. ${listenerCount} listeners added. Use event.maxListeners to increase the limit (${maxListeners}). MOST frequent listener (${topCount}):`);\n            console.warn(topStack!);\n        }\n\n        return popStack;\n    }\n\n    protected pushLeakingStack(): () => void {\n        if (!this._leakingStacks) {\n            this._leakingStacks = new Map();\n        }\n        const stack = new Error().stack!.split('\\n').slice(3).join('\\n');\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count + 1);\n        return () => this.popLeakingStack(stack);\n    }\n\n    protected popLeakingStack(stack: string): void {\n        if (!this._leakingStacks) {\n            return;\n        }\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count - 1);\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._leakingStacks) {\n            this._leakingStacks.clear();\n            this._leakingStacks = undefined;\n        }\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport interface WaitUntilEvent {\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n}\nexport namespace WaitUntilEvent {\n    /**\n     * Fire all listeners in the same tick.\n     *\n     * Use `AsyncEmitter.fire` to fire listeners async one after another.\n     */\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: Omit<T, 'waitUntil'>,\n        timeout: number | undefined = undefined\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete asyncEvent['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n\nimport { CancellationToken } from './cancellation';\n\nexport class AsyncEmitter<T extends WaitUntilEvent> extends Emitter<T> {\n\n    protected deliveryQueue: Promise<void> | undefined;\n\n    /**\n     * Fire listeners async one after another.\n     */\n    fire(event: Omit<T, 'waitUntil'>, token: CancellationToken = CancellationToken.None,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        const callbacks = this._callbacks;\n        if (!callbacks) {\n            return Promise.resolve();\n        }\n        const listeners = [...callbacks];\n        if (this.deliveryQueue) {\n            return this.deliveryQueue = this.deliveryQueue.then(() => this.deliver(listeners, event, token, promiseJoin));\n        }\n        return this.deliveryQueue = this.deliver(listeners, event, token, promiseJoin);\n    }\n\n    protected async deliver(listeners: Callback[], event: Omit<T, 'waitUntil'>, token: CancellationToken,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        for (const listener of listeners) {\n            if (token.isCancellationRequested) {\n                return;\n            }\n            const waitables: Promise<void>[] = [];\n            const asyncEvent = Object.assign(event, {\n                waitUntil: (thenable: Promise<any>) => {\n                    if (Object.isFrozen(waitables)) {\n                        throw new Error('waitUntil cannot be called asynchronously.');\n                    }\n                    if (promiseJoin) {\n                        thenable = promiseJoin(thenable, listener);\n                    }\n                    waitables.push(thenable);\n                }\n            }) as T;\n            try {\n                listener(event);\n                // Asynchronous calls to `waitUntil` should fail.\n                Object.freeze(waitables);\n            } catch (e) {\n                console.error(e);\n            } finally {\n                delete asyncEvent['waitUntil'];\n            }\n            if (!waitables.length) {\n                return;\n            }\n            try {\n                await Promise.all(waitables);\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * ┌──────────────────────┬────────────┐\n * │          dir         │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /     home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n *\n * On Windows:\n * ┌──────────────────────┬────────────┐\n * │           dir        │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /c: / home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n */\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"c:\".length === 2\n            }\n            if (path.charCodeAt(0) !== 47 /* '/' */) {\n                path = `${String.fromCharCode(47)}${path}`;\n            }\n        }\n        return path;\n    }\n    /**\n     * Normalize path separator to use Path.separator\n     * @param Path candidate to normalize\n     * @returns Normalized string path\n     */\n    static normalizePathSeparator(path: string): string {\n        return path.split(/[\\\\]/).join(Path.separator);\n    }\n\n    /**\n     * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static tildify(resourcePath: string, home: string): string {\n        const path = new Path(resourcePath);\n        const isWindows = path.root && Path.isDrive(path.root.base);\n\n        if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n            return resourcePath.replace(`${home}/`, '~/');\n        }\n\n        return resourcePath;\n    }\n\n    /**\n     * Untildify path, replacing `~` with `home` if `~` present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static untildify(resourcePath: string, home: string): string {\n        if (resourcePath.startsWith('~')) {\n            const untildifiedResource = resourcePath.replace(/^~/, home);\n            const untildifiedPath = new Path(untildifiedResource);\n            const isWindows = untildifiedPath.root && Path.isDrive(untildifiedPath.root.base);\n            if (!isWindows && home && untildifiedResource.startsWith(`${home}`)) {\n                return untildifiedResource;\n            }\n        }\n        return resourcePath;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        raw = Path.normalizePathSeparator(raw);\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = this.raw.indexOf(Path.separator);\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? this.raw : this.raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    /**\n     *\n     * @param paths portions of a path\n     * @returns a new Path if an absolute path can be computed from the segments passed in + this.raw\n     * If no absolute path can be computed, returns undefined.\n     *\n     * Processes the path segments passed in from right to left (reverse order) concatenating until an\n     * absolute path is found.\n     */\n    resolve(...paths: string[]): Path | undefined {\n        const segments = paths.slice().reverse(); // Don't mutate the caller's array.\n        segments.push(this.raw);\n        let result = new Path('');\n        for (const segment of segments) {\n            if (segment) {\n                const next = new Path(segment).join(result.raw);\n                if (next.isAbsolute) {\n                    return next.normalize();\n                }\n                result = next;\n            }\n        }\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable } from './disposable';\nimport { Event } from './event';\nimport { CancellationToken, CancellationError, cancelled } from './cancellation';\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T = void> {\n    state: 'resolved' | 'rejected' | 'unresolved' = 'unresolved';\n    resolve: (value: T) => void;\n    reject: (err?: any) => void; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = result => {\n            resolve(result);\n            if (this.state === 'unresolved') {\n                this.state = 'resolved';\n            }\n        };\n        this.reject = err => {\n            reject(err);\n            if (this.state === 'unresolved') {\n                this.state = 'rejected';\n            }\n        };\n    });\n}\n\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\nexport function timeout(ms: number, token = CancellationToken.None): Promise<void> {\n    const deferred = new Deferred<void>();\n    const handle = setTimeout(() => deferred.resolve(), ms);\n    token.onCancellationRequested(() => {\n        clearTimeout(handle);\n        deferred.reject(cancelled());\n    });\n    return deferred.promise;\n}\n\nexport async function retry<T>(task: () => Promise<T>, retryDelay: number, retries: number): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await task();\n        } catch (error) {\n            lastError = error;\n\n            await timeout(retryDelay);\n        }\n    }\n\n    throw lastError;\n}\n\n/**\n * A function to allow a promise resolution to be delayed by a number of milliseconds. Usage is as follows:\n *\n * `const stringValue = await myPromise.then(delay(600)).then(value => value.toString());`\n *\n * @param ms the number of millisecond to delay\n * @returns a function that returns a promise that returns the given value, but delayed\n */\nexport function delay<T>(ms: number): (value: T) => Promise<T> {\n    return value => new Promise((resolve, reject) => { setTimeout(() => resolve(value), ms); });\n}\n\n/**\n * Constructs a promise that will resolve after a given delay.\n * @param ms the number of milliseconds to wait\n */\nexport async function wait(ms: number): Promise<void> {\n    await delay(ms)(undefined);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function waitForEvent<T>(event: Event<T>, ms: number, thisArg?: any, disposables?: Disposable[]): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const registration = setTimeout(() => {\n            listener.dispose();\n            reject(new CancellationError());\n        }, ms);\n\n        const listener = event((evt: T) => {\n            clearTimeout(registration);\n            listener.dispose();\n            resolve(evt);\n        }, thisArg, disposables);\n\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/stream.ts\n\n/* eslint-disable max-len */\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface ReadableStreamEvents<T> {\n\n    /**\n     * The 'data' event is emitted whenever the stream is\n     * relinquishing ownership of a chunk of data to a consumer.\n     */\n    on(event: 'data', callback: (data: T) => void): void;\n\n    /**\n     * Emitted when any error occurs.\n     */\n    on(event: 'error', callback: (err: Error) => void): void;\n\n    /**\n     * The 'end' event is emitted when there is no more data\n     * to be consumed from the stream. The 'end' event will\n     * not be emitted unless the data is completely consumed.\n     */\n    on(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in desktop and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n    /**\n     * Stops emitting any events until resume() is called.\n     */\n    pause(): void;\n\n    /**\n     * Starts emitting events again after pause() was called.\n     */\n    resume(): void;\n\n    /**\n     * Destroys the stream and stops emitting any event.\n     */\n    destroy(): void;\n\n    /**\n     * Allows to remove a listener that was previously added.\n     */\n    removeListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in desktop and web environments.\n */\nexport interface Readable<T> {\n\n    /**\n     * Read data from the underlying source. Will return\n     * null to indicate that no more data can be read.\n     */\n    read(): T | null;\n}\nexport namespace Readable {\n    export function fromString(value: string): Readable<string> {\n        let done = false;\n\n        return {\n            read(): string | null {\n                if (!done) {\n                    done = true;\n\n                    return value;\n                }\n\n                return null;\n            }\n        };\n    }\n    export function toString(readable: Readable<string>): string {\n        let result = '';\n        let chunk: string | null;\n        while ((chunk = readable.read()) != null) {\n            result += chunk;\n        }\n        return result;\n    }\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in desktop and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n    /**\n     * Writing data to the stream will trigger the on('data')\n     * event listener if the stream is flowing and buffer the\n     * data otherwise until the stream is flowing.\n     *\n     * If a `highWaterMark` is configured and writing to the\n     * stream reaches this mark, a promise will be returned\n     * that should be awaited on before writing more data.\n     * Otherwise there is a risk of buffering a large number\n     * of data chunks without consumer.\n     */\n    write(data: T): void | Promise<void>;\n\n    /**\n     * Signals an error to the consumer of the stream via the\n     * on('error') handler if the stream is flowing.\n     */\n    error(error: Error): void;\n\n    /**\n     * Signals the end of the stream to the consumer. If the\n     * result is not an error, will trigger the on('data') event\n     * listener if the stream is flowing and buffer the data\n     * otherwise until the stream is flowing.\n     *\n     * In case of an error, the on('error') event will be used\n     * if the stream is flowing.\n     */\n    end(result?: T | Error): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n    /**\n     * The original stream that is being read.\n     */\n    stream: ReadableStream<T>;\n\n    /**\n     * An array of chunks already read from this stream.\n     */\n    buffer: T[];\n\n    /**\n     * Signals if the stream has ended or not. If not, consumers\n     * should continue to read from the stream until consumed.\n     */\n    ended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n    const candidate = obj as ReadableStream<T>;\n\n    return candidate && [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n    const candidate = obj as ReadableBufferedStream<T>;\n\n    return candidate && isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface Reducer<T> {\n    (data: T[]): T;\n}\n\nexport interface DataTransformer<Original, Transformed> {\n    (data: Original): Transformed;\n}\n\nexport interface ErrorTransformer {\n    (error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n    data: DataTransformer<Original, Transformed>;\n    error?: ErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: Reducer<T>, options?: WriteableStreamOptions): WriteableStream<T> {\n    return new WriteableStreamImpl<T>(reducer);\n}\n\nexport interface WriteableStreamOptions {\n\n    /**\n     * The number of objects to buffer before WriteableStream#write()\n     * signals back that the buffer is full. Can be used to reduce\n     * the memory pressure when the stream is not flowing.\n     */\n    highWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n    private readonly state = {\n        flowing: false,\n        ended: false,\n        destroyed: false\n    };\n\n    private readonly buffer = {\n        data: [] as T[],\n        error: [] as Error[]\n    };\n\n    private readonly listeners = {\n        data: [] as { (data: T): void }[],\n        error: [] as { (error: Error): void }[],\n        end: [] as { (): void }[]\n    };\n\n    private readonly pendingWritePromises: Function[] = [];\n\n    constructor(private reducer: Reducer<T>, private options?: WriteableStreamOptions) { }\n\n    pause(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        this.state.flowing = false;\n    }\n\n    resume(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        if (!this.state.flowing) {\n            this.state.flowing = true;\n\n            // emit buffered events\n            this.flowData();\n            this.flowErrors();\n            this.flowEnd();\n        }\n    }\n\n    write(data: T): void | Promise<void> {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the data to listeners\n        if (this.state.flowing) {\n            this.listeners.data.forEach(listener => listener(data));\n        }\n\n        // not yet flowing: buffer data until flowing\n        else {\n            this.buffer.data.push(data);\n\n            // highWaterMark: if configured, signal back when buffer reached limits\n            if (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n                return new Promise(resolve => this.pendingWritePromises.push(resolve));\n            }\n        }\n    }\n\n    error(error: Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the error to listeners\n        if (this.state.flowing) {\n            this.listeners.error.forEach(listener => listener(error));\n        }\n\n        // not yet flowing: buffer errors until flowing\n        else {\n            this.buffer.error.push(error);\n        }\n    }\n\n    end(result?: T | Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // end with data or error if provided\n        if (result instanceof Error) {\n            this.error(result);\n        } else if (result) {\n            this.write(result);\n        }\n\n        // flowing: send end event to listeners\n        if (this.state.flowing) {\n            this.listeners.end.forEach(listener => listener());\n\n            this.destroy();\n        }\n\n        // not yet flowing: remember state\n        else {\n            this.state.ended = true;\n        }\n    }\n\n    on(event: 'data', callback: (data: T) => void): void;\n    on(event: 'error', callback: (err: Error) => void): void;\n    on(event: 'end', callback: () => void): void;\n    on(event: 'data' | 'error' | 'end', callback: (arg0?: any) => void): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        switch (event) {\n            case 'data':\n                this.listeners.data.push(callback);\n\n                // switch into flowing mode as soon as the first 'data'\n                // listener is added and we are not yet in flowing mode\n                this.resume();\n\n                break;\n\n            case 'end':\n                this.listeners.end.push(callback);\n\n                // emit 'end' event directly if we are flowing\n                // and the end has already been reached\n                //\n                // finish() when it went through\n                if (this.state.flowing && this.flowEnd()) {\n                    this.destroy();\n                }\n\n                break;\n\n            case 'error':\n                this.listeners.error.push(callback);\n\n                // emit buffered 'error' events unless done already\n                // now that we know that we have at least one listener\n                if (this.state.flowing) {\n                    this.flowErrors();\n                }\n\n                break;\n        }\n    }\n\n    removeListener(event: string, callback: Function): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        let listeners: unknown[] | undefined = undefined;\n\n        switch (event) {\n            case 'data':\n                listeners = this.listeners.data;\n                break;\n\n            case 'end':\n                listeners = this.listeners.end;\n                break;\n\n            case 'error':\n                listeners = this.listeners.error;\n                break;\n        }\n\n        if (listeners) {\n            const index = listeners.indexOf(callback);\n            if (index >= 0) {\n                listeners.splice(index, 1);\n            }\n        }\n    }\n\n    private flowData(): void {\n        if (this.buffer.data.length > 0) {\n            const fullDataBuffer = this.reducer(this.buffer.data);\n\n            this.listeners.data.forEach(listener => listener(fullDataBuffer));\n\n            this.buffer.data.length = 0;\n\n            // When the buffer is empty, resolve all pending writers\n            const pendingWritePromises = [...this.pendingWritePromises];\n            this.pendingWritePromises.length = 0;\n            pendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n        }\n    }\n\n    private flowErrors(): void {\n        if (this.listeners.error.length > 0) {\n            for (const error of this.buffer.error) {\n                this.listeners.error.forEach(listener => listener(error));\n            }\n\n            this.buffer.error.length = 0;\n        }\n    }\n\n    private flowEnd(): boolean {\n        if (this.state.ended) {\n            this.listeners.end.forEach(listener => listener());\n\n            return this.listeners.end.length > 0;\n        }\n\n        return false;\n    }\n\n    destroy(): void {\n        if (!this.state.destroyed) {\n            this.state.destroyed = true;\n            this.state.ended = true;\n\n            this.buffer.data.length = 0;\n            this.buffer.error.length = 0;\n\n            this.listeners.data.length = 0;\n            this.listeners.error.length = 0;\n            this.listeners.end.length = 0;\n\n            this.pendingWritePromises.length = 0;\n        }\n    }\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: Reducer<T>): T {\n    const chunks: T[] = [];\n\n    let chunk: T | null;\n    while ((chunk = readable.read()) !== null) {\n        chunks.push(chunk);\n    }\n\n    return reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function consumeReadableWithLimit<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to fully read a T stream into a T.\n */\nexport function consumeStream<T>(stream: ReadableStream<T>, reducer: Reducer<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        stream.on('data', data => chunks.push(data));\n        stream.on('error', error => reject(error));\n        stream.on('end', () => resolve(reducer(chunks)));\n    });\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n    return new Promise((resolve, reject) => {\n        const streamListeners = new DisposableCollection();\n\n        // Data Listener\n        const buffer: T[] = [];\n        const dataListener = (chunk: T) => {\n\n            // Add to buffer\n            buffer.push(chunk);\n\n            // We reached maxChunks and thus need to return\n            if (buffer.length > maxChunks) {\n\n                // Dispose any listeners and ensure to pause the\n                // stream so that it can be consumed again by caller\n                streamListeners.dispose();\n                stream.pause();\n\n                return resolve({ stream, buffer, ended: false });\n            }\n        };\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('data', dataListener)));\n        stream.on('data', dataListener);\n\n        // Error Listener\n        const errorListener = (error: Error) => reject(error);\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('error', errorListener)));\n        stream.on('error', errorListener);\n\n        const endListener = () => resolve({ stream, buffer, ended: true });\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('end', endListener)));\n        stream.on('end', endListener);\n    });\n}\n\n/**\n * Helper to read a T stream up to a maximum of chunks. If the limit is\n * reached, will return a stream instead to ensure all data can still\n * be read.\n */\nexport function consumeStreamWithLimit<T>(stream: ReadableStream<T>, reducer: Reducer<T>, maxChunks: number): Promise<T | ReadableStream<T>> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        let wrapperStream: WriteableStream<T> | undefined = undefined;\n\n        stream.on('data', data => {\n\n            // If we reach maxChunks, we start to return a stream\n            // and make sure that any data we have already read\n            // is in it as well\n            if (!wrapperStream && chunks.length === maxChunks) {\n                wrapperStream = newWriteableStream(reducer);\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.write(data);\n\n                return resolve(wrapperStream);\n            }\n\n            if (wrapperStream) {\n                wrapperStream.write(data);\n            } else {\n                chunks.push(data);\n            }\n        });\n\n        stream.on('error', error => {\n            if (wrapperStream) {\n                wrapperStream.error(error);\n            } else {\n                return reject(error);\n            }\n        });\n\n        stream.on('end', () => {\n            if (wrapperStream) {\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.end();\n            } else {\n                return resolve(reducer(chunks));\n            }\n        });\n    });\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: Reducer<T>): ReadableStream<T> {\n    const stream = newWriteableStream<T>(reducer);\n\n    stream.end(t);\n\n    return stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n    let consumed = false;\n\n    return {\n        read: () => {\n            if (consumed) {\n                return null;\n            }\n\n            consumed = true;\n\n            return t;\n        }\n    };\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: Reducer<Transformed>): ReadableStream<Transformed> {\n    const target = newWriteableStream<Transformed>(reducer);\n\n    stream.on('data', data => target.write(transformer.data(data)));\n    stream.on('end', () => target.end());\n    stream.on('error', error => target.error(transformer.error ? transformer.error(error) : error));\n\n    return target;\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/strings.ts\n\nimport { CharCode } from './char-code';\n\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n    let i: number;\n    const len = Math.min(a.length, b.length);\n\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\n            return i;\n        }\n    }\n\n    return len;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n\nexport function compare(a: string, b: string): number {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n        if (codeA < codeB) {\n            return -1;\n        } else if (codeA > codeB) {\n            return 1;\n        }\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n    return compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n\n        if (codeA === codeB) {\n            // equal\n            continue;\n        }\n\n        const diff = codeA - codeB;\n        if (diff === 32 && isUpperAsciiLetter(codeB)) { // codeB =[65-90] && codeA =[97-122]\n            continue;\n\n        } else if (diff === -32 && isUpperAsciiLetter(codeA)) {  // codeB =[97-122] && codeA =[65-90]\n            continue;\n        }\n\n        if (isLowerAsciiLetter(codeA) && isLowerAsciiLetter(codeB)) {\n            //\n            return diff;\n\n        } else {\n            return compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n        }\n    }\n\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n\n    return 0;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI as Uri } from 'vscode-uri';\nimport { Path } from './path';\n\nexport default class URI {\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.toString();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * @returns a new, absolute URI if one can be computed from the path segments passed in.\n     */\n    resolveToAbsolute(...pathSegments: Array<string | Path>): URI | undefined {\n        const absolutePath = this.path.resolve(...pathSegments.map(path => path.toString()));\n        if (absolutePath) {\n            return this.withPath(absolutePath);\n        }\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqual(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n\n        return caseSensitive\n            ? this.toString() === uri.toString()\n            : this.toString().toLowerCase() === uri.toString().toLowerCase();\n    }\n\n    isEqualOrParent(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n        let left = this.path;\n        let right = uri.path;\n        if (!caseSensitive) {\n            left = new Path(left.toString().toLowerCase());\n            right = new Path(right.toString().toLowerCase());\n        }\n        return left.isEqualOrParent(right);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n    private hasSameOrigin(uri: URI): boolean {\n        return (this.authority === uri.authority) && (this.scheme === uri.scheme);\n    }\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = DBCSCodec;\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(codecOptions, iconv) {\n    this.encodingName = codecOptions.encodingName;\n    if (!codecOptions)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!codecOptions.table)\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = codecOptions.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    // Load & create GB18030 tables when needed.\n    if (typeof codecOptions.gb18030 === 'function') {\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 common decode nodes.\n        var commonThirdByteNodeIdx = this.decodeTables.length;\n        this.decodeTables.push(UNASSIGNED_NODE.slice(0));\n\n        var commonFourthByteNodeIdx = this.decodeTables.length;\n        this.decodeTables.push(UNASSIGNED_NODE.slice(0));\n\n        // Fill out the tree\n        var firstByteNode = this.decodeTables[0];\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNode = this.decodeTables[NODE_START - firstByteNode[i]];\n            for (var j = 0x30; j <= 0x39; j++) {\n                if (secondByteNode[j] === UNASSIGNED) {\n                    secondByteNode[j] = NODE_START - commonThirdByteNodeIdx;\n                } else if (secondByteNode[j] > NODE_START) {\n                    throw new Error(\"gb18030 decode tables conflict at byte 2\");\n                }\n\n                var thirdByteNode = this.decodeTables[NODE_START - secondByteNode[j]];\n                for (var k = 0x81; k <= 0xFE; k++) {\n                    if (thirdByteNode[k] === UNASSIGNED) {\n                        thirdByteNode[k] = NODE_START - commonFourthByteNodeIdx;\n                    } else if (thirdByteNode[k] === NODE_START - commonFourthByteNodeIdx) {\n                        continue;\n                    } else if (thirdByteNode[k] > NODE_START) {\n                        throw new Error(\"gb18030 decode tables conflict at byte 3\");\n                    }\n\n                    var fourthByteNode = this.decodeTables[NODE_START - thirdByteNode[k]];\n                    for (var l = 0x30; l <= 0x39; l++) {\n                        if (fourthByteNode[l] === UNASSIGNED)\n                            fourthByteNode[l] = GB18030_CODE;\n                    }\n                }\n            }\n        }\n    }\n\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (codecOptions.encodeSkipVals)\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\n            var val = codecOptions.encodeSkipVals[i];\n            if (typeof val === 'number')\n                skipEncodeChars[val] = true;\n            else\n                for (var j = val.from; j <= val.to; j++)\n                    skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (codecOptions.encodeAdd) {\n        for (var uChar in codecOptions.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n}\n\nDBCSCodec.prototype.encoder = DBCSEncoder;\nDBCSCodec.prototype.decoder = DBCSDecoder;\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    var hasValues = false;\n    var subNodeEmpty = {};\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0) {\n            this._setEncodeChar(uCode, mbCode);\n            hasValues = true;\n        } else if (uCode <= NODE_START) {\n            var subNodeIdx = NODE_START - uCode;\n            if (!subNodeEmpty[subNodeIdx]) {  // Skip empty subtrees (they are too large in gb18030).\n                var newPrefix = (mbCode << 8) >>> 0;  // NOTE: '>>> 0' keeps 32-bit num positive.\n                if (this._fillEncodeTable(subNodeIdx, newPrefix, skipEncodeChars))\n                    hasValues = true;\n                else\n                    subNodeEmpty[subNodeIdx] = true;\n            }\n        } else if (uCode <= SEQ_START) {\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n            hasValues = true;\n        }\n    }\n    return hasValues;\n}\n\n\n\n// == Encoder ==================================================================\n\nfunction DBCSEncoder(options, codec) {\n    // Encoder state\n    this.leadSurrogate = -1;\n    this.seqObj = undefined;\n    \n    // Static data\n    this.encodeTable = codec.encodeTable;\n    this.encodeTableSeq = codec.encodeTableSeq;\n    this.defaultCharSingleByte = codec.defCharSB;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSEncoder.prototype.write = function(str) {\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else if (dbcsCode < 0x1000000) {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        } else {\n            newBuf[j++] = dbcsCode >>> 24;\n            newBuf[j++] = (dbcsCode >>> 16) & 0xFF;\n            newBuf[j++] = (dbcsCode >>> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nDBCSEncoder.prototype.end = function() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = Buffer.alloc(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n// Export for testing\nDBCSEncoder.prototype.findIdx = findIdx;\n\n\n// == Decoder ==================================================================\n\nfunction DBCSDecoder(options, codec) {\n    // Decoder state\n    this.nodeIdx = 0;\n    this.prevBytes = [];\n\n    // Static data\n    this.decodeTables = codec.decodeTables;\n    this.decodeTableSeq = codec.decodeTableSeq;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSDecoder.prototype.write = function(buf) {\n    var newBuf = Buffer.alloc(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBytes = this.prevBytes, prevOffset = this.prevBytes.length,\n        seqStart = -this.prevBytes.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBytes[i + prevOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n            i = seqStart; // Skip one byte ('i' will be incremented by the for loop) and try to parse again.\n        }\n        else if (uCode === GB18030_CODE) {\n            if (i >= 3) {\n                var ptr = (buf[i-3]-0x81)*12600 + (buf[i-2]-0x30)*1260 + (buf[i-1]-0x81)*10 + (curByte-0x30);\n            } else {\n                var ptr = (prevBytes[i-3+prevOffset]-0x81)*12600 + \n                          (((i-2 >= 0) ? buf[i-2] : prevBytes[i-2+prevOffset])-0x30)*1260 + \n                          (((i-1 >= 0) ? buf[i-1] : prevBytes[i-1+prevOffset])-0x81)*10 + \n                          (curByte-0x30);\n            }\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode >= 0x10000) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 | (uCode >> 10);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 | (uCode & 0x3FF);\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBytes = (seqStart >= 0)\n        ? Array.prototype.slice.call(buf, seqStart)\n        : prevBytes.slice(seqStart + prevOffset).concat(Array.prototype.slice.call(buf));\n\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nDBCSDecoder.prototype.end = function() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBytes.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var bytesArr = this.prevBytes.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBytes = [];\n        this.nodeIdx = 0;\n        if (bytesArr.length > 0)\n            ret += this.write(bytesArr);\n    }\n\n    this.prevBytes = [];\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + ((r-l+1) >> 1);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n","\"use strict\";\n\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII + ¥ + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'ms31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    'ms932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    'windows936': 'cp936',\n    'ms936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n    'isoir58': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n        encodeSkipVals: [0x80],\n        encodeAdd: {'€': 0xA2E3},\n    },\n\n    'chinese': 'gb18030',\n\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    'ms949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    'ms950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n        encodeSkipVals: [\n            // Although Encoding Standard says we should avoid encoding to HKSCS area (See Step 1 of\n            // https://encoding.spec.whatwg.org/#index-big5-pointer), we still do it to increase compatibility with ICU.\n            // But if a single unicode point can be encoded both as HKSCS and regular Big5, we prefer the latter.\n            0x8e69, 0x8e6f, 0x8e7e, 0x8eab, 0x8eb4, 0x8ecd, 0x8ed0, 0x8f57, 0x8f69, 0x8f6e, 0x8fcb, 0x8ffe,\n            0x906d, 0x907a, 0x90c4, 0x90dc, 0x90f1, 0x91bf, 0x92af, 0x92b0, 0x92b1, 0x92b2, 0x92d1, 0x9447, 0x94ca,\n            0x95d9, 0x96fc, 0x9975, 0x9b76, 0x9b78, 0x9b7b, 0x9bc6, 0x9bde, 0x9bec, 0x9bf6, 0x9c42, 0x9c53, 0x9c62,\n            0x9c68, 0x9c6b, 0x9c77, 0x9cbc, 0x9cbd, 0x9cd0, 0x9d57, 0x9d5a, 0x9dc4, 0x9def, 0x9dfb, 0x9ea9, 0x9eef,\n            0x9efd, 0x9f60, 0x9fcb, 0xa077, 0xa0dc, 0xa0df, 0x8fcc, 0x92c8, 0x9644, 0x96ed,\n\n            // Step 2 of https://encoding.spec.whatwg.org/#index-big5-pointer: Use last pointer for U+2550, U+255E, U+2561, U+256A, U+5341, or U+5345\n            0xa2a4, 0xa2a5, 0xa2a7, 0xa2a6, 0xa2cc, 0xa2ce,\n        ],\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n};\n","\"use strict\";\n\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf32\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it.\nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Export Node.js internal encodings.\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", bomAware: true},\n    cesu8:  { type: \"_internal\", bomAware: true},\n    unicode11utf8: \"utf8\",\n\n    ucs2:   { type: \"_internal\", bomAware: true},\n    utf16le: \"ucs2\",\n\n    binary: { type: \"_internal\" },\n    base64: { type: \"_internal\" },\n    hex:    { type: \"_internal\" },\n\n    // Codec.\n    _internal: InternalCodec,\n};\n\n//------------------------------------------------------------------------------\n\nfunction InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n\n    if (this.enc === \"base64\")\n        this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n        this.enc = \"utf8\"; // Use utf8 for decoding.\n        this.encoder = InternalEncoderCesu8;\n\n        // Add decoder for versions of Node not supporting CESU-8\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '💩') {\n            this.decoder = InternalDecoderCesu8;\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\n        }\n    }\n}\n\nInternalCodec.prototype.encoder = InternalEncoder;\nInternalCodec.prototype.decoder = InternalDecoder;\n\n//------------------------------------------------------------------------------\n\n// We use node.js internal decoder. Its signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\n\nfunction InternalDecoder(options, codec) {\n    this.decoder = new StringDecoder(codec.enc);\n}\n\nInternalDecoder.prototype.write = function(buf) {\n    if (!Buffer.isBuffer(buf)) {\n        buf = Buffer.from(buf);\n    }\n\n    return this.decoder.write(buf);\n}\n\nInternalDecoder.prototype.end = function() {\n    return this.decoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n// Encoder is mostly trivial\n\nfunction InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n}\n\nInternalEncoder.prototype.write = function(str) {\n    return Buffer.from(str, this.enc);\n}\n\nInternalEncoder.prototype.end = function() {\n}\n\n\n//------------------------------------------------------------------------------\n// Except base64 encoder, which must keep its state.\n\nfunction InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n}\n\nInternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return Buffer.from(str, \"base64\");\n}\n\nInternalEncoderBase64.prototype.end = function() {\n    return Buffer.from(this.prevStr, \"base64\");\n}\n\n\n//------------------------------------------------------------------------------\n// CESU-8 encoder is also special.\n\nfunction InternalEncoderCesu8(options, codec) {\n}\n\nInternalEncoderCesu8.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charCode = str.charCodeAt(i);\n        // Naive implementation, but it works because CESU-8 is especially easy\n        // to convert from UTF-16 (which all JS strings are encoded in).\n        if (charCode < 0x80)\n            buf[bufIdx++] = charCode;\n        else if (charCode < 0x800) {\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n        else { // charCode will always be < 0x10000 in javascript.\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n    }\n    return buf.slice(0, bufIdx);\n}\n\nInternalEncoderCesu8.prototype.end = function() {\n}\n\n//------------------------------------------------------------------------------\n// CESU-8 decoder is not implemented in Node v4.0+\n\nfunction InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n}\n\nInternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n        var curByte = buf[i];\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\n            if (contBytes > 0) { // Previous code is invalid\n                res += this.defaultCharUnicode;\n                contBytes = 0;\n            }\n\n            if (curByte < 0x80) { // Single-byte code\n                res += String.fromCharCode(curByte);\n            } else if (curByte < 0xE0) { // Two-byte code\n                acc = curByte & 0x1F;\n                contBytes = 1; accBytes = 1;\n            } else if (curByte < 0xF0) { // Three-byte code\n                acc = curByte & 0x0F;\n                contBytes = 2; accBytes = 1;\n            } else { // Four or more are not supported for CESU-8.\n                res += this.defaultCharUnicode;\n            }\n        } else { // Continuation byte\n            if (contBytes > 0) { // We're waiting for it.\n                acc = (acc << 6) | (curByte & 0x3f);\n                contBytes--; accBytes++;\n                if (contBytes === 0) {\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\n                        res += this.defaultCharUnicode;\n                    else if (accBytes === 3 && acc < 0x800)\n                        res += this.defaultCharUnicode;\n                    else\n                        // Actually add character.\n                        res += String.fromCharCode(acc);\n                }\n            } else { // Unexpected continuation byte\n                res += this.defaultCharUnicode;\n            }\n        }\n    }\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\n    return res;\n}\n\nInternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n        res += this.defaultCharUnicode;\n    return res;\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = SBCSCodec;\nfunction SBCSCodec(codecOptions, iconv) {\n    if (!codecOptions)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (codecOptions.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        codecOptions.chars = asciiString + codecOptions.chars;\n    }\n\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < codecOptions.chars.length; i++)\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\n\n    this.encodeBuf = encodeBuf;\n}\n\nSBCSCodec.prototype.encoder = SBCSEncoder;\nSBCSCodec.prototype.decoder = SBCSDecoder;\n\n\nfunction SBCSEncoder(options, codec) {\n    this.encodeBuf = codec.encodeBuf;\n}\n\nSBCSEncoder.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\nSBCSEncoder.prototype.end = function() {\n}\n\n\nfunction SBCSDecoder(options, codec) {\n    this.decodeBuf = codec.decodeBuf;\n}\n\nSBCSDecoder.prototype.write = function(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = Buffer.alloc(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0; i < buf.length; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\nSBCSDecoder.prototype.end = function() {\n}\n","\"use strict\";\n\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€����…�����������‘’“”•–—�������� กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚�„…†‡�‰Š‹ŚŤŽŹ�‘’“”•–—�™š›śťžź ˇ˘Ł¤Ą¦§¨©Ş«¬­®Ż°±˛ł´µ¶·¸ąş»Ľ˝ľżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ЂЃ‚ѓ„…†‡€‰Љ‹ЊЌЋЏђ‘’“”•–—�™љ›њќћџ ЎўЈ¤Ґ¦§Ё©Є«¬­®Ї°±Ііґµ¶·ё№є»јЅѕїАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰Š‹Œ�Ž��‘’“”•–—˜™š›œ�žŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡�‰�‹�����‘’“”•–—�™�›���� ΅Ά£¤¥¦§¨©�«¬­®―°±²³΄µ¶·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰Š‹Œ����‘’“”•–—˜™š›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖ×ØÙÚÛÜİŞßàáâãäåæçèéêëìíîïğñòóôõö÷øùúûüışÿ\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰�‹�����‘’“”•–—˜™�›���� ¡¢£₪¥¦§¨©×«¬­®¯°±²³´µ¶·¸¹÷»¼½¾¿ְֱֲֳִֵֶַָֹֺֻּֽ־ֿ׀ׁׂ׃װױײ׳״�������אבגדהוזחטיךכלםמןנסעףפץצקרשת��‎‏�\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€پ‚ƒ„…†‡ˆ‰ٹ‹Œچژڈگ‘’“”•–—ک™ڑ›œ‌‍ں ،¢£¤¥¦§¨©ھ«¬­®¯°±²³´µ¶·¸¹؛»¼½¾؟ہءآأؤإئابةتثجحخدذرزسشصض×طظعغـفقكàلâمنهوçèéêëىيîïًٌٍَôُِ÷ّùْûü‎‏ے\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚�„…†‡�‰�‹�¨ˇ¸�‘’“”•–—�™�›�¯˛� �¢£¤�¦§Ø©Ŗ«¬­®Æ°±²³´µ¶·ø¹ŗ»¼½¾æĄĮĀĆÄÅĘĒČÉŹĖĢĶĪĻŠŃŅÓŌÕÖ×ŲŁŚŪÜŻŽßąįāćäåęēčéźėģķīļšńņóōõö÷ųłśūüżž˙\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€�‚ƒ„…†‡ˆ‰�‹Œ����‘’“”•–—˜™�›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ą˘Ł¤ĽŚ§¨ŠŞŤŹ­ŽŻ°ą˛ł´ľśˇ¸šşťź˝žżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ħ˘£¤�Ĥ§¨İŞĞĴ­�Ż°ħ²³´µĥ·¸ışğĵ½�żÀÁÂ�ÄĊĈÇÈÉÊËÌÍÎÏ�ÑÒÓÔĠÖ×ĜÙÚÛÜŬŜßàáâ�äċĉçèéêëìíîï�ñòóôġö÷ĝùúûüŭŝ˙\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄĸŖ¤ĨĻ§¨ŠĒĢŦ­Ž¯°ą˛ŗ´ĩļˇ¸šēģŧŊžŋĀÁÂÃÄÅÆĮČÉĘËĖÍÎĪĐŅŌĶÔÕÖ×ØŲÚÛÜŨŪßāáâãäåæįčéęëėíîīđņōķôõö÷øųúûüũū˙\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ЁЂЃЄЅІЇЈЉЊЋЌ­ЎЏАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя№ёђѓєѕіїјљњћќ§ўџ\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ���¤�������،­�������������؛���؟�ءآأؤإئابةتثجحخدذرزسشصضطظعغ�����ـفقكلمنهوىيًٌٍَُِّْ�������������\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ‘’£€₯¦§¨©ͺ«¬­�―°±²³΄΅Ά·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" �¢£¤¥¦§¨©×«¬­®¯°±²³´µ¶·¸¹÷»¼½¾��������������������������������‗אבגדהוזחטיךכלםמןנסעףפץצקרשת��‎‏�\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖ×ØÙÚÛÜİŞßàáâãäåæçèéêëìíîïğñòóôõö÷øùúûüışÿ\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄĒĢĪĨĶ§ĻĐŠŦŽ­ŪŊ°ąēģīĩķ·ļđšŧž―ūŋĀÁÂÃÄÅÆĮČÉĘËĖÍÎÏÐŅŌÓÔÕÖŨØŲÚÛÜÝÞßāáâãäåæįčéęëėíîïðņōóôõöũøųúûüýþĸ\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ”¢£¤„¦§Ø©Ŗ«¬­®Æ°±²³“µ¶·ø¹ŗ»¼½¾æĄĮĀĆÄÅĘĒČÉŹĖĢĶĪĻŠŃŅÓŌÕÖ×ŲŁŚŪÜŻŽßąįāćäåęēčéźėģķīļšńņóōõö÷ųłśūüżž’\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" Ḃḃ£ĊċḊ§Ẁ©ẂḋỲ­®ŸḞḟĠġṀṁ¶ṖẁṗẃṠỳẄẅṡÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏŴÑÒÓÔÕÖṪØÙÚÛÜÝŶßàáâãäåæçèéêëìíîïŵñòóôõöṫøùúûüýŷÿ\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£€¥Š§š©ª«¬­®¯°±²³Žµ¶·ž¹º»ŒœŸ¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ĄąŁ€„Š§š©Ș«Ź­źŻ°±ČłŽ”¶·žčș»ŒœŸżÀÁÂĂÄĆÆÇÈÉÊËÌÍÎÏĐŃÒÓÔŐÖŚŰÙÚÛÜĘȚßàáâăäćæçèéêëìíîïđńòóôőöśűùúûüęțÿ\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαβγδεζηθικλμνξοπρσςτυφχψ░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀ωάέήϊίόύϋώΆΈΉΊΌΎΏ±≥≤ΪΫ÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ĆüéāäģåćłēŖŗīŹÄÅÉæÆōöĢ¢ŚśÖÜø£Ø×¤ĀĪóŻżź”¦©®¬½¼Ł«»░▒▓│┤ĄČĘĖ╣║╗╝ĮŠ┐└┴┬├─┼ŲŪ╚╔╩╦╠═╬Žąčęėįšųūž┘┌█▄▌▐▀ÓßŌŃõÕµńĶķĻļņĒŅ’­±“¾¶§÷„°∙·¹³²■ \"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ðÐÊËÈıÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµþÞÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäůćçłëŐőîŹÄĆÉĹĺôöĽľŚśÖÜŤťŁ×čáíóúĄąŽžĘę¬źČş«»░▒▓│┤ÁÂĚŞ╣║╗╝Żż┐└┴┬├─┼Ăă╚╔╩╦╠═╬¤đĐĎËďŇÍÎě┘┌█▄ŢŮ▀ÓßÔŃńňŠšŔÚŕŰýÝţ´­˝˛ˇ˘§÷¸°¨˙űŘř■ \"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ђЂѓЃёЁєЄѕЅіІїЇјЈљЉњЊћЋќЌўЎџЏюЮъЪаАбБцЦдДеЕфФгГ«»░▒▓│┤хХиИ╣║╗╝йЙ┐└┴┬├─┼кК╚╔╩╦╠═╬¤лЛмМнНоОп┘┌█▄Пя▀ЯрРсСтТуУжЖвВьЬ№­ыЫзЗшШэЭщЩчЧ§■ \"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"אבגדהוזחטיךכלםמןנסעףפץצקרשת�£�×����������®¬½¼�«»░▒▓│┤���©╣║╗╝¢¥┐└┴┬├─┼��╚╔╩╦╠═╬¤���������┘┌█▄¦�▀������µ�������¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîıÄÅÉæÆôöòûùİÖÜø£ØŞşáíóúñÑĞğ¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ºªÊËÈ�ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµ�×ÚÛÙìÿ¯´­±�¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ðÐÊËÈ€ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµþÞÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ \"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâãàÁçêÊèÍÔìÃÂÉÀÈôõòÚùÌÕÜ¢£Ù₧ÓáíóúñÑªº¿Ò¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèÐðÞÄÅÉæÆôöþûÝýÖÜø£Ø₧ƒáíóúÁÍÓÚ¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"אבגדהוזחטיךכלםמןנסעףפץצקרשת¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâÂà¶çêëèïî‗À§ÉÈÊôËÏûù¤ÔÜ¢£ÙÛƒ¦´óú¨¸³¯Î⌐¬½¼¾«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$٪&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~°·∙√▒─│┼┤┬├┴┐┌└┘β∞φ±½¼≈«»ﻷﻸ��ﻻﻼ� ­ﺂ£¤ﺄ��ﺎﺏﺕﺙ،ﺝﺡﺥ٠١٢٣٤٥٦٧٨٩ﻑ؛ﺱﺵﺹ؟¢ﺀﺁﺃﺅﻊﺋﺍﺑﺓﺗﺛﺟﺣﺧﺩﺫﺭﺯﺳﺷﺻﺿﻁﻅﻋﻏ¦¬÷×ﻉـﻓﻗﻛﻟﻣﻧﻫﻭﻯﻳﺽﻌﻎﻍﻡﹽّﻥﻩﻬﻰﻲﻐﻕﻵﻶﻝﻙﻱ■�\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø₧ƒáíóúñÑªº¿⌐¬½¼¡«¤░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·√№¤■ \"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"������Ά�·¬¦‘’Έ―ΉΊΪΌ��ΎΫ©Ώ²³ά£έήίϊΐόύΑΒΓΔΕΖΗ½ΘΙ«»░▒▓│┤ΚΛΜΝ╣║╗╝ΞΟ┐└┴┬├─┼ΠΡ╚╔╩╦╠═╬ΣΤΥΦΧΨΩαβγ┘┌█▄δε▀ζηθικλμνξοπρσςτ΄­±υφχ§ψ΅°¨ωϋΰώ■ \"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§¨©ª«¬­®‾°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏŠÑÒÓÔÕÖ×ØÙÚÛÜÝŽßàáâãäåæçèéêëìíîïšñòóôõö÷øùúûüýžÿ\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ﺈ×÷ﹱ■│─┐┌└┘ﹹﹻﹽﹿﹷﺊﻰﻳﻲﻎﻏﻐﻶﻸﻺﻼ ¤ﺋﺑﺗﺛﺟﺣ،­ﺧﺳ٠١٢٣٤٥٦٧٨٩ﺷ؛ﺻﺿﻊ؟ﻋءآأؤإئابةتثجحخدذرزسشصضطﻇعغﻌﺂﺄﺎﻓـفقكلمنهوىيًٌٍَُِّْﻗﻛﻟﻵﻷﻹﻻﻣﻧﻬﻩ�\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ЁЂҐЄЅІЇЈЉЊЋЌ­ЎЏАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя№ёђґєѕіїјљњћќ§ўџ\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёҐґЄєІіЇї·√№¤■ \"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£¤¥¦§œ©ª«¬­®¯°±²³Ÿµ¶·Œ¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ກຂຄງຈສຊຍດຕຖທນບປຜຝພຟມຢຣລວຫອຮ���ຯະາຳິີຶືຸູຼັົຽ���ເແໂໃໄ່້໊໋໌ໍໆ�ໜໝ₭����������������໐໑໒໓໔໕໖໗໘໙��¢¬¦�\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"��������������������������������่กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู้๊๋€฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛¢¬¦ \"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"€…‘’“”•–— กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ¡¢£€¥¦§œ©ª«¬­®¯°±²³Ÿµ¶·Œ¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊�©⁄¤‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°¢£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµ∂ЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю¤\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦­ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ�\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂŞ∞±≤≥¥µ∂∑∏π∫ªºΩăş¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›Ţţ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"«»…“”�•‘’� กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู﻿​–—฿เแโใไๅๆ็่้๊๋์ํ™๏๐๑๒๓๔๕๖๗๘๙®©����\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙ�ˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю¤\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ё╓╔╕╖╗╘╙╚╛╜╝╞╟╠╡Ё╢╣╤╥╦╧╨╩╪╫╬©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ёє╔ії╗╘╙╚╛ґ╝╞╟╠╡ЁЄ╣ІЇ╦╧╨╩╪Ґ╬©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"─│┌┐└┘├┤┬┴┼▀▄█▌▐░▒▓⌠■∙√≈≤≥ ⌡°²·÷═║╒ёє╔ії╗╘╙╚╛ґў╞╟╠╡ЁЄ╣ІЇ╦╧╨╩╪ҐЎ©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"қғ‚Ғ„…†‡�‰ҳ‹ҲҷҶ�Қ‘’“”•–—�™�›�����ӯӮё¤ӣ¦§���«¬­®�°±²Ё�Ӣ¶·�№�»���©юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧЪ\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" �և։)(»«—.՝,-֊…՜՛՞ԱաԲբԳգԴդԵեԶզԷէԸըԹթԺժԻիԼլԽխԾծԿկՀհՁձՂղՃճՄմՅյՆնՇշՈոՉչՊպՋջՌռՍսՎվՏտՐրՑցՒւՓփՔքՕօՖֆ՚�\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ЂЃ‚ѓ„…†‡€‰Љ‹ЊҚҺЏђ‘’“”•–—�™љ›њқһџ ҰұӘ¤Ө¦§Ё©Ғ«¬­®Ү°±Ііөµ¶·ё№ғ»әҢңүАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000ÚỤ\\u0003ỪỬỮ\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010ỨỰỲỶỸÝỴ\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ÀẢÃÁẠẶẬÈẺẼÉẸỆÌỈĨÍỊÒỎÕÓỌỘỜỞỠỚỢÙỦŨ ĂÂÊÔƠƯĐăâêôơưđẶ̀̀̉̃́àảãáạẲằẳẵắẴẮẦẨẪẤỀặầẩẫấậèỂẻẽéẹềểễếệìỉỄẾỒĩíịòỔỏõóọồổỗốộờởỡớợùỖủũúụừửữứựỳỷỹýỵỐ\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"‚ƒ„…†‡ˆ‰Š‹Œ‘’“”•–—˜™š›œŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿აბგდევზთიკლმნოპჟრსტუფქღყშჩცძწჭხჯჰჱჲჳჴჵჶçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"‚ƒ„…†‡ˆ‰Š‹Œ‘’“”•–—˜™š›œŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿აბგდევზჱთიკლმნჲოპჟრსტჳუფქღყშჩცძწჭხჴჯჰჵæçèéêëìíîïðñòóôõö÷øùúûüýþÿ\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ҖҒӮғ„…ҶҮҲүҠӢҢҚҺҸҗ‘’“”•–—ҳҷҡӣңқһҹ ЎўЈӨҘҰ§Ё©Ә«¬ӯ®Ҝ°ұІіҙө¶·ё№ә»јҪҫҝАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001Ẳ\\u0003\\u0004ẴẪ\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013Ỷ\\u0015\\u0016\\u0017\\u0018Ỹ\\u001a\\u001b\\u001c\\u001dỴ\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ẠẮẰẶẤẦẨẬẼẸẾỀỂỄỆỐỒỔỖỘỢỚỜỞỊỎỌỈỦŨỤỲÕắằặấầẩậẽẹếềểễệốồổỗỠƠộờởịỰỨỪỬơớƯÀÁÂÃẢĂẳẵÈÉÊẺÌÍĨỳĐứÒÓÔạỷừửÙÚỹỵÝỡưàáâãảăữẫèéêẻìíĩỉđựòóôõỏọụùúũủýợỮ\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#¥%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}‾��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[¥]^_`abcdefghijklmnopqrstuvwxyz{|}‾��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \" ÀÂÈÊËÎÏ´ˋˆ¨˜ÙÛ₤¯Ýý°ÇçÑñ¡¿¤£¥§ƒ¢âêôûáéóúàèòùäëöüÅîØÆåíøæÄìÖÜÉïßÔÁÃãÐðÍÌÓÒÕõŠšÚŸÿÞþ·µ¶¾—¼½ªº«■»±�\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄¤‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔ�ÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"��������������������������������������������������������������������������������������������������������������������������������\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"���������������������������������กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����\"\n  }\n}","\"use strict\";\n\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·√№€■ \"\n    },\n\n    \"mik\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя└┴┬├─┼╣║╚╔╩╦╠═╬┐░▒▓│┤№§╗╝┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ \"\n    },\n\n    \"cp720\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\\x80\\x81éâ\\x84à\\x86çêëèïî\\x8d\\x8e\\x8f\\x90\\u0651\\u0652ô¤ـûùءآأؤ£إئابةتثجحخدذرزسشص«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀ضطظعغفµقكلمنهوىي≡\\u064b\\u064c\\u064d\\u064e\\u064f\\u0650≈°∙·√ⁿ²■\\u00a0\"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = Utf16BECodec;\nfunction Utf16BECodec() {\n}\n\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\nUtf16BECodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf16BEEncoder() {\n}\n\nUtf16BEEncoder.prototype.write = function(str) {\n    var buf = Buffer.from(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\nUtf16BEEncoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf16BEDecoder() {\n    this.overflowByte = -1;\n}\n\nUtf16BEDecoder.prototype.write = function(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = Buffer.alloc(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\nUtf16BEDecoder.prototype.end = function() {\n    this.overflowByte = -1;\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\n\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\n\nexports.utf16 = Utf16Codec;\nfunction Utf16Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n}\n\nUtf16Codec.prototype.encoder = Utf16Encoder;\nUtf16Codec.prototype.decoder = Utf16Decoder;\n\n\n// -- Encoding (pass-through)\n\nfunction Utf16Encoder(options, codec) {\n    options = options || {};\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\n}\n\nUtf16Encoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n}\n\nUtf16Encoder.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n// -- Decoding\n\nfunction Utf16Decoder(options, codec) {\n    this.decoder = null;\n    this.initialBufs = [];\n    this.initialBufsLen = 0;\n\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf16Decoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBufs.push(buf);\n        this.initialBufsLen += buf.length;\n        \n        if (this.initialBufsLen < 16) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.write(buf);\n}\n\nUtf16Decoder.prototype.end = function() {\n    if (!this.decoder) {\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        var trail = this.decoder.end();\n        if (trail)\n            resStr += trail;\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n    return this.decoder.end();\n}\n\nfunction detectEncoding(bufs, defaultEncoding) {\n    var b = [];\n    var charsProcessed = 0;\n    var asciiCharsLE = 0, asciiCharsBE = 0; // Number of ASCII chars when decoded as LE or BE.\n\n    outer_loop:\n    for (var i = 0; i < bufs.length; i++) {\n        var buf = bufs[i];\n        for (var j = 0; j < buf.length; j++) {\n            b.push(buf[j]);\n            if (b.length === 2) {\n                if (charsProcessed === 0) {\n                    // Check BOM first.\n                    if (b[0] === 0xFF && b[1] === 0xFE) return 'utf-16le';\n                    if (b[0] === 0xFE && b[1] === 0xFF) return 'utf-16be';\n                }\n\n                if (b[0] === 0 && b[1] !== 0) asciiCharsBE++;\n                if (b[0] !== 0 && b[1] === 0) asciiCharsLE++;\n\n                b.length = 0;\n                charsProcessed++;\n\n                if (charsProcessed >= 100) {\n                    break outer_loop;\n                }\n            }\n        }\n    }\n\n    // Make decisions.\n    // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\n    // So, we count ASCII as if it was LE or BE, and decide from that.\n    if (asciiCharsBE > asciiCharsLE) return 'utf-16be';\n    if (asciiCharsBE < asciiCharsLE) return 'utf-16le';\n\n    // Couldn't decide (likely all zeros or not enough data).\n    return defaultEncoding || 'utf-16le';\n}\n\n\n","'use strict';\n\nvar Buffer = require('safer-buffer').Buffer;\n\n// == UTF32-LE/BE codec. ==========================================================\n\nexports._utf32 = Utf32Codec;\n\nfunction Utf32Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n    this.bomAware = true;\n    this.isLE = codecOptions.isLE;\n}\n\nexports.utf32le = { type: '_utf32', isLE: true };\nexports.utf32be = { type: '_utf32', isLE: false };\n\n// Aliases\nexports.ucs4le = 'utf32le';\nexports.ucs4be = 'utf32be';\n\nUtf32Codec.prototype.encoder = Utf32Encoder;\nUtf32Codec.prototype.decoder = Utf32Decoder;\n\n// -- Encoding\n\nfunction Utf32Encoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.highSurrogate = 0;\n}\n\nUtf32Encoder.prototype.write = function(str) {\n    var src = Buffer.from(str, 'ucs2');\n    var dst = Buffer.alloc(src.length * 2);\n    var write32 = this.isLE ? dst.writeUInt32LE : dst.writeUInt32BE;\n    var offset = 0;\n\n    for (var i = 0; i < src.length; i += 2) {\n        var code = src.readUInt16LE(i);\n        var isHighSurrogate = (0xD800 <= code && code < 0xDC00);\n        var isLowSurrogate = (0xDC00 <= code && code < 0xE000);\n\n        if (this.highSurrogate) {\n            if (isHighSurrogate || !isLowSurrogate) {\n                // There shouldn't be two high surrogates in a row, nor a high surrogate which isn't followed by a low\n                // surrogate. If this happens, keep the pending high surrogate as a stand-alone semi-invalid character\n                // (technically wrong, but expected by some applications, like Windows file names).\n                write32.call(dst, this.highSurrogate, offset);\n                offset += 4;\n            }\n            else {\n                // Create 32-bit value from high and low surrogates;\n                var codepoint = (((this.highSurrogate - 0xD800) << 10) | (code - 0xDC00)) + 0x10000;\n\n                write32.call(dst, codepoint, offset);\n                offset += 4;\n                this.highSurrogate = 0;\n\n                continue;\n            }\n        }\n\n        if (isHighSurrogate)\n            this.highSurrogate = code;\n        else {\n            // Even if the current character is a low surrogate, with no previous high surrogate, we'll\n            // encode it as a semi-invalid stand-alone character for the same reasons expressed above for\n            // unpaired high surrogates.\n            write32.call(dst, code, offset);\n            offset += 4;\n            this.highSurrogate = 0;\n        }\n    }\n\n    if (offset < dst.length)\n        dst = dst.slice(0, offset);\n\n    return dst;\n};\n\nUtf32Encoder.prototype.end = function() {\n    // Treat any leftover high surrogate as a semi-valid independent character.\n    if (!this.highSurrogate)\n        return;\n\n    var buf = Buffer.alloc(4);\n\n    if (this.isLE)\n        buf.writeUInt32LE(this.highSurrogate, 0);\n    else\n        buf.writeUInt32BE(this.highSurrogate, 0);\n\n    this.highSurrogate = 0;\n\n    return buf;\n};\n\n// -- Decoding\n\nfunction Utf32Decoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.badChar = codec.iconv.defaultCharUnicode.charCodeAt(0);\n    this.overflow = [];\n}\n\nUtf32Decoder.prototype.write = function(src) {\n    if (src.length === 0)\n        return '';\n\n    var i = 0;\n    var codepoint = 0;\n    var dst = Buffer.alloc(src.length + 4);\n    var offset = 0;\n    var isLE = this.isLE;\n    var overflow = this.overflow;\n    var badChar = this.badChar;\n\n    if (overflow.length > 0) {\n        for (; i < src.length && overflow.length < 4; i++)\n            overflow.push(src[i]);\n        \n        if (overflow.length === 4) {\n            // NOTE: codepoint is a signed int32 and can be negative.\n            // NOTE: We copied this block from below to help V8 optimize it (it works with array, not buffer).\n            if (isLE) {\n                codepoint = overflow[i] | (overflow[i+1] << 8) | (overflow[i+2] << 16) | (overflow[i+3] << 24);\n            } else {\n                codepoint = overflow[i+3] | (overflow[i+2] << 8) | (overflow[i+1] << 16) | (overflow[i] << 24);\n            }\n            overflow.length = 0;\n\n            offset = _writeCodepoint(dst, offset, codepoint, badChar);\n        }\n    }\n\n    // Main loop. Should be as optimized as possible.\n    for (; i < src.length - 3; i += 4) {\n        // NOTE: codepoint is a signed int32 and can be negative.\n        if (isLE) {\n            codepoint = src[i] | (src[i+1] << 8) | (src[i+2] << 16) | (src[i+3] << 24);\n        } else {\n            codepoint = src[i+3] | (src[i+2] << 8) | (src[i+1] << 16) | (src[i] << 24);\n        }\n        offset = _writeCodepoint(dst, offset, codepoint, badChar);\n    }\n\n    // Keep overflowing bytes.\n    for (; i < src.length; i++) {\n        overflow.push(src[i]);\n    }\n\n    return dst.slice(0, offset).toString('ucs2');\n};\n\nfunction _writeCodepoint(dst, offset, codepoint, badChar) {\n    // NOTE: codepoint is signed int32 and can be negative. We keep it that way to help V8 with optimizations.\n    if (codepoint < 0 || codepoint > 0x10FFFF) {\n        // Not a valid Unicode codepoint\n        codepoint = badChar;\n    } \n\n    // Ephemeral Planes: Write high surrogate.\n    if (codepoint >= 0x10000) {\n        codepoint -= 0x10000;\n\n        var high = 0xD800 | (codepoint >> 10);\n        dst[offset++] = high & 0xff;\n        dst[offset++] = high >> 8;\n\n        // Low surrogate is written below.\n        var codepoint = 0xDC00 | (codepoint & 0x3FF);\n    }\n\n    // Write BMP char or low surrogate.\n    dst[offset++] = codepoint & 0xff;\n    dst[offset++] = codepoint >> 8;\n\n    return offset;\n};\n\nUtf32Decoder.prototype.end = function() {\n    this.overflow.length = 0;\n};\n\n// == UTF-32 Auto codec =============================================================\n// Decoder chooses automatically from UTF-32LE and UTF-32BE using BOM and space-based heuristic.\n// Defaults to UTF-32LE. http://en.wikipedia.org/wiki/UTF-32\n// Encoder/decoder default can be changed: iconv.decode(buf, 'utf32', {defaultEncoding: 'utf-32be'});\n\n// Encoder prepends BOM (which can be overridden with (addBOM: false}).\n\nexports.utf32 = Utf32AutoCodec;\nexports.ucs4 = 'utf32';\n\nfunction Utf32AutoCodec(options, iconv) {\n    this.iconv = iconv;\n}\n\nUtf32AutoCodec.prototype.encoder = Utf32AutoEncoder;\nUtf32AutoCodec.prototype.decoder = Utf32AutoDecoder;\n\n// -- Encoding\n\nfunction Utf32AutoEncoder(options, codec) {\n    options = options || {};\n\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n\n    this.encoder = codec.iconv.getEncoder(options.defaultEncoding || 'utf-32le', options);\n}\n\nUtf32AutoEncoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n};\n\nUtf32AutoEncoder.prototype.end = function() {\n    return this.encoder.end();\n};\n\n// -- Decoding\n\nfunction Utf32AutoDecoder(options, codec) {\n    this.decoder = null;\n    this.initialBufs = [];\n    this.initialBufsLen = 0;\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf32AutoDecoder.prototype.write = function(buf) {\n    if (!this.decoder) { \n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBufs.push(buf);\n        this.initialBufsLen += buf.length;\n\n        if (this.initialBufsLen < 32) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.write(buf);\n};\n\nUtf32AutoDecoder.prototype.end = function() {\n    if (!this.decoder) {\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        var trail = this.decoder.end();\n        if (trail)\n            resStr += trail;\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.end();\n};\n\nfunction detectEncoding(bufs, defaultEncoding) {\n    var b = [];\n    var charsProcessed = 0;\n    var invalidLE = 0, invalidBE = 0;   // Number of invalid chars when decoded as LE or BE.\n    var bmpCharsLE = 0, bmpCharsBE = 0; // Number of BMP chars when decoded as LE or BE.\n\n    outer_loop:\n    for (var i = 0; i < bufs.length; i++) {\n        var buf = bufs[i];\n        for (var j = 0; j < buf.length; j++) {\n            b.push(buf[j]);\n            if (b.length === 4) {\n                if (charsProcessed === 0) {\n                    // Check BOM first.\n                    if (b[0] === 0xFF && b[1] === 0xFE && b[2] === 0 && b[3] === 0) {\n                        return 'utf-32le';\n                    }\n                    if (b[0] === 0 && b[1] === 0 && b[2] === 0xFE && b[3] === 0xFF) {\n                        return 'utf-32be';\n                    }\n                }\n\n                if (b[0] !== 0 || b[1] > 0x10) invalidBE++;\n                if (b[3] !== 0 || b[2] > 0x10) invalidLE++;\n\n                if (b[0] === 0 && b[1] === 0 && (b[2] !== 0 || b[3] !== 0)) bmpCharsBE++;\n                if ((b[0] !== 0 || b[1] !== 0) && b[2] === 0 && b[3] === 0) bmpCharsLE++;\n\n                b.length = 0;\n                charsProcessed++;\n\n                if (charsProcessed >= 100) {\n                    break outer_loop;\n                }\n            }\n        }\n    }\n\n    // Make decisions.\n    if (bmpCharsBE - invalidBE > bmpCharsLE - invalidLE)  return 'utf-32be';\n    if (bmpCharsBE - invalidBE < bmpCharsLE - invalidLE)  return 'utf-32le';\n\n    // Couldn't decide (likely all zeros or not enough data).\n    return defaultEncoding || 'utf-32le';\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = Utf7Codec;\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\nfunction Utf7Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7Codec.prototype.encoder = Utf7Encoder;\nUtf7Codec.prototype.decoder = Utf7Decoder;\nUtf7Codec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction Utf7Encoder(options, codec) {\n    this.iconv = codec.iconv;\n}\n\nUtf7Encoder.prototype.write = function(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\nUtf7Encoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf7Decoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nUtf7Decoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + this.iconv.decode(buf.slice(lastI, i), \"ascii\");\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + this.iconv.decode(buf.slice(lastI), \"ascii\");\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7Decoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = Utf7IMAPCodec;\nfunction Utf7IMAPCodec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\nUtf7IMAPCodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf7IMAPEncoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = Buffer.alloc(6);\n    this.base64AccumIdx = 0;\n}\n\nUtf7IMAPEncoder.prototype.write = function(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nUtf7IMAPEncoder.prototype.end = function() {\n    var buf = Buffer.alloc(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\n// -- Decoding\n\nfunction Utf7IMAPDecoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nUtf7IMAPDecoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + this.iconv.decode(buf.slice(lastI, i), \"ascii\").replace(/,/g, '/');\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + this.iconv.decode(buf.slice(lastI), \"ascii\").replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7IMAPDecoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n","\"use strict\";\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n","\"use strict\";\n\nvar Buffer = require(\"safer-buffer\").Buffer;\n\nvar bomHandling = require(\"./bom-handling\"),\n    iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '�';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getEncoder(encoding, options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getDecoder(encoding, options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return trail ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = iconv._canonicalizeEncoding(encoding);\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecOptions = {};\n    while (true) {\n        var codec = iconv._codecDataCache[enc];\n        if (codec)\n            return codec;\n\n        var codecDef = iconv.encodings[enc];\n\n        switch (typeof codecDef) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codecDef;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                for (var key in codecDef)\n                    codecOptions[key] = codecDef[key];\n\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n                \n                enc = codecDef.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codec = new codecDef(codecOptions, iconv);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\n                return codec;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\niconv._canonicalizeEncoding = function(encoding) {\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\n}\n\niconv.getEncoder = function getEncoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        encoder = new codec.encoder(options, codec);\n\n    if (codec.bomAware && options && options.addBOM)\n        encoder = new bomHandling.PrependBOM(encoder, options);\n\n    return encoder;\n}\n\niconv.getDecoder = function getDecoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        decoder = new codec.decoder(options, codec);\n\n    if (codec.bomAware && !(options && options.stripBOM === false))\n        decoder = new bomHandling.StripBOM(decoder, options);\n\n    return decoder;\n}\n\n// Streaming API\n// NOTE: Streaming API naturally depends on 'stream' module from Node.js. Unfortunately in browser environments this module can add\n// up to 100Kb to the output bundle. To avoid unnecessary code bloat, we don't enable Streaming API in browser by default.\n// If you would like to enable it explicitly, please add the following code to your app:\n// > iconv.enableStreamingAPI(require('stream'));\niconv.enableStreamingAPI = function enableStreamingAPI(stream_module) {\n    if (iconv.supportsStreams)\n        return;\n\n    // Dependency-inject stream module to create IconvLite stream classes.\n    var streams = require(\"./streams\")(stream_module);\n\n    // Not public API yet, but expose the stream classes.\n    iconv.IconvLiteEncoderStream = streams.IconvLiteEncoderStream;\n    iconv.IconvLiteDecoderStream = streams.IconvLiteDecoderStream;\n\n    // Streaming API.\n    iconv.encodeStream = function encodeStream(encoding, options) {\n        return new iconv.IconvLiteEncoderStream(iconv.getEncoder(encoding, options), options);\n    }\n\n    iconv.decodeStream = function decodeStream(encoding, options) {\n        return new iconv.IconvLiteDecoderStream(iconv.getDecoder(encoding, options), options);\n    }\n\n    iconv.supportsStreams = true;\n}\n\n// Enable Streaming API automatically if 'stream' module is available and non-empty (the majority of environments).\nvar stream_module;\ntry {\n    stream_module = require(\"stream\");\n} catch (e) {}\n\nif (stream_module && stream_module.Transform) {\n    iconv.enableStreamingAPI(stream_module);\n\n} else {\n    // In rare cases where 'stream' module is not available by default, throw a helpful exception.\n    iconv.encodeStream = iconv.decodeStream = function() {\n        throw new Error(\"iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.\");\n    };\n}\n\nif (\"Ā\" != \"\\u0100\") {\n    console.error(\"iconv-lite warning: js files use non-utf8 encoding. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\n}\n","\"use strict\";\n\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// NOTE: Due to 'stream' module being pretty large (~100Kb, significant in browser environments), \n// we opt to dependency-inject it instead of creating a hard dependency.\nmodule.exports = function(stream_module) {\n    var Transform = stream_module.Transform;\n\n    // == Encoder stream =======================================================\n\n    function IconvLiteEncoderStream(conv, options) {\n        this.conv = conv;\n        options = options || {};\n        options.decodeStrings = false; // We accept only strings, so we don't need to decode them.\n        Transform.call(this, options);\n    }\n\n    IconvLiteEncoderStream.prototype = Object.create(Transform.prototype, {\n        constructor: { value: IconvLiteEncoderStream }\n    });\n\n    IconvLiteEncoderStream.prototype._transform = function(chunk, encoding, done) {\n        if (typeof chunk != 'string')\n            return done(new Error(\"Iconv encoding stream needs strings as its input.\"));\n        try {\n            var res = this.conv.write(chunk);\n            if (res && res.length) this.push(res);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteEncoderStream.prototype._flush = function(done) {\n        try {\n            var res = this.conv.end();\n            if (res && res.length) this.push(res);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteEncoderStream.prototype.collect = function(cb) {\n        var chunks = [];\n        this.on('error', cb);\n        this.on('data', function(chunk) { chunks.push(chunk); });\n        this.on('end', function() {\n            cb(null, Buffer.concat(chunks));\n        });\n        return this;\n    }\n\n\n    // == Decoder stream =======================================================\n\n    function IconvLiteDecoderStream(conv, options) {\n        this.conv = conv;\n        options = options || {};\n        options.encoding = this.encoding = 'utf8'; // We output strings.\n        Transform.call(this, options);\n    }\n\n    IconvLiteDecoderStream.prototype = Object.create(Transform.prototype, {\n        constructor: { value: IconvLiteDecoderStream }\n    });\n\n    IconvLiteDecoderStream.prototype._transform = function(chunk, encoding, done) {\n        if (!Buffer.isBuffer(chunk) && !(chunk instanceof Uint8Array))\n            return done(new Error(\"Iconv decoding stream needs buffers as its input.\"));\n        try {\n            var res = this.conv.write(chunk);\n            if (res && res.length) this.push(res, this.encoding);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteDecoderStream.prototype._flush = function(done) {\n        try {\n            var res = this.conv.end();\n            if (res && res.length) this.push(res, this.encoding);                \n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteDecoderStream.prototype.collect = function(cb) {\n        var res = '';\n        this.on('error', cb);\n        this.on('data', function(chunk) { res += chunk; });\n        this.on('end', function() {\n            cb(null, res);\n        });\n        return this;\n    }\n\n    return {\n        IconvLiteEncoderStream: IconvLiteEncoderStream,\n        IconvLiteDecoderStream: IconvLiteDecoderStream,\n    };\n};\n","module.exports = require('@phosphor/coreutils');\n","module.exports = require('vscode-languageserver-protocol');\n","module.exports = require('vscode-uri');\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Some entities copied and modified from https://github.com/Microsoft/vscode-debugadapter-node/blob/master/adapter/src/protocol.ts\n\nimport {\n    DebugAdapter,\n    DebugAdapterSession\n} from './debug-model';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { Channel } from '../common/debug-service';\n\n/**\n * [DebugAdapterSession](#DebugAdapterSession) implementation.\n */\nexport class DebugAdapterSessionImpl implements DebugAdapterSession {\n\n    private channel: Channel | undefined;\n    private isClosed: boolean = false;\n\n    constructor(\n        readonly id: string,\n        protected readonly debugAdapter: DebugAdapter\n    ) {\n        this.debugAdapter.onMessageReceived((message: string) => this.send(message));\n        this.debugAdapter.onClose(() => this.onDebugAdapterExit());\n        this.debugAdapter.onError(error => this.onDebugAdapterError(error));\n\n    }\n\n    async start(channel: Channel): Promise<void> {\n\n        console.debug(`starting debug adapter session '${this.id}'`);\n        if (this.channel) {\n            throw new Error('The session has already been started, id: ' + this.id);\n        }\n        this.channel = channel;\n        this.channel.onMessage((message: string) => this.write(message));\n        this.channel.onClose(() => this.channel = undefined);\n\n    }\n\n    protected onDebugAdapterExit(): void {\n        this.isClosed = true;\n        console.debug(`onDebugAdapterExit session: '${this.id}'`);\n        if (this.channel) {\n            this.channel.close();\n            this.channel = undefined;\n        }\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        console.debug(`error in debug adapter session: '${this.id}': ${JSON.stringify(error)}`);\n        const event: DebugProtocol.Event = {\n            type: 'event',\n            event: 'error',\n            seq: -1,\n            body: error\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected send(message: string): void {\n        if (this.channel) {\n            this.channel.send(message);\n        }\n    }\n\n    protected write(message: string): void {\n        if (!this.isClosed) {\n            this.debugAdapter.send(message);\n        }\n    }\n\n    async stop(): Promise<void> {\n        console.debug(`stopping debug adapter session: '${this.id}'`);\n\n        if (!this.isClosed) {\n            await this.debugAdapter.stop();\n        }\n        this.channel?.close();\n        this.channel = undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DebugAdapter } from './debug-model';\nimport * as theia from '@theia/plugin';\n\n/**\n * A debug adapter for using the inline implementation from a plugin.\n */\nexport class InlineDebugAdapter implements DebugAdapter {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    onError: Event<Error> = Event.None;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    constructor(private debugAdapter: theia.DebugAdapter) {\n        this.debugAdapter.onDidSendMessage(msg => {\n            this.messageReceivedEmitter.fire(JSON.stringify(msg));\n        });\n    }\n\n    async start(): Promise<void> {\n    }\n\n    send(message: string): void {\n        this.debugAdapter.handleMessage(JSON.parse(message));\n    }\n\n    async stop(): Promise<void> {\n        this.debugAdapter.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ChildProcess } from 'child_process';\nimport * as stream from 'stream';\nimport * as net from 'net';\nimport { DebugAdapter } from './debug-model';\n\nabstract class StreamDebugAdapter extends DisposableCollection {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    private errorEmitter = new Emitter<Error>();\n    onError: Event<Error> = this.errorEmitter.event;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    // these constants are for the message header, see: https://microsoft.github.io/debug-adapter-protocol/overview#header-part\n    private static TWO_CRLF = '\\r\\n\\r\\n';\n    private static CONTENT_LENGTH = 'Content-Length';\n    private contentLength: number = -1;\n    private buffer: Buffer = Buffer.alloc(0);\n\n    constructor(private fromAdapter: stream.Readable, private toAdapter: stream.Writable) {\n        super();\n\n        this.fromAdapter.on('data', (data: Buffer) => this.handleData(data));\n        this.fromAdapter.on('close', () => this.handleClosed()); // FIXME pass a proper exit code\n        this.fromAdapter.on('error', error => this.errorEmitter.fire(error));\n        this.toAdapter.on('error', error => this.errorEmitter.fire(error));\n    }\n\n    handleClosed(): void {\n        this.closeEmitter.fire();\n    }\n\n    send(message: string): void {\n        const msg = `${StreamDebugAdapter.CONTENT_LENGTH}: ${Buffer.byteLength(message, 'utf8')}${StreamDebugAdapter.TWO_CRLF}${message}`;\n\n        this.toAdapter.write(msg, 'utf8');\n    }\n\n    protected handleData(data: Buffer): void {\n        this.buffer = Buffer.concat([this.buffer, data]);\n\n        while (true) {\n            if (this.contentLength >= 0) {\n                if (this.buffer.length >= this.contentLength) {\n                    const message = this.buffer.toString('utf8', 0, this.contentLength);\n                    this.buffer = this.buffer.slice(this.contentLength);\n                    this.contentLength = -1;\n\n                    if (message.length > 0) {\n                        this.messageReceivedEmitter.fire(message);\n                    }\n                    continue; // there may be more complete messages to process\n                }\n            } else {\n                let idx = this.buffer.indexOf(StreamDebugAdapter.CONTENT_LENGTH);\n                if (idx > 0) {\n                    // log unrecognized output\n                    const output = this.buffer.slice(0, idx);\n                    console.log(output.toString('utf-8'));\n\n                    this.buffer = this.buffer.slice(idx);\n                }\n\n                idx = this.buffer.indexOf(StreamDebugAdapter.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this.buffer.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] === StreamDebugAdapter.CONTENT_LENGTH) {\n                            this.contentLength = +pair[1];\n                        }\n                    }\n                    this.buffer = this.buffer.slice(idx + StreamDebugAdapter.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n}\n\nexport class ProcessDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    protected readonly process: ChildProcess;\n    constructor(process: ChildProcess) {\n        super(process.stdout!, process.stdin!);\n        this.process = process;\n    }\n\n    async stop(): Promise<void> {\n        this.process.kill();\n        this.process.stdin?.end();\n    }\n}\n\nexport class SocketDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    private readonly socket: net.Socket;\n    constructor(socket: net.Socket) {\n        super(socket, socket);\n        this.socket = socket;\n    }\n\n    stop(): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.socket.end(() => resolve());\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/platform/files/common/files.ts\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Event } from '@theia/core/lib/common/event';\nimport { Disposable as IDisposable } from '@theia/core/lib/common/disposable';\nimport { BinaryBuffer, BinaryBufferReadableStream } from '@theia/core/lib/common/buffer';\nimport type { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ReadableStreamEvents } from '@theia/core/lib/common/stream';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\nexport const enum FileOperation {\n    CREATE,\n    DELETE,\n    MOVE,\n    COPY\n}\n\nexport class FileOperationEvent {\n\n    constructor(resource: URI, operation: FileOperation.DELETE);\n    constructor(resource: URI, operation: FileOperation.CREATE | FileOperation.MOVE | FileOperation.COPY, target: FileStatWithMetadata);\n    constructor(public readonly resource: URI, public readonly operation: FileOperation, public readonly target?: FileStatWithMetadata) { }\n\n    isOperation(operation: FileOperation.DELETE): boolean;\n    isOperation(operation: FileOperation.MOVE | FileOperation.COPY | FileOperation.CREATE): this is { readonly target: FileStatWithMetadata };\n    isOperation(operation: FileOperation): boolean {\n        return this.operation === operation;\n    }\n}\n\n/**\n * Possible changes that can occur to a file.\n */\nexport const enum FileChangeType {\n    UPDATED = 0,\n    ADDED = 1,\n    DELETED = 2\n}\n\n/**\n * Identifies a single change in a file.\n */\nexport interface FileChange {\n\n    /**\n     * The type of change that occurred to the file.\n     */\n    readonly type: FileChangeType;\n\n    /**\n     * The unified resource identifier of the file that changed.\n     */\n    readonly resource: URI;\n}\n\nexport class FileChangesEvent {\n\n    constructor(public readonly changes: readonly FileChange[]) { }\n\n    /**\n     * Returns true if this change event contains the provided file with the given change type (if provided). In case of\n     * type DELETED, this method will also return true if a folder got deleted that is the parent of the\n     * provided file path.\n     */\n    contains(resource: URI, type?: FileChangeType): boolean {\n        if (!resource) {\n            return false;\n        }\n\n        const checkForChangeType = typeof type === 'number';\n\n        return this.changes.some(change => {\n            if (checkForChangeType && change.type !== type) {\n                return false;\n            }\n\n            // For deleted also return true when deleted folder is parent of target path\n            if (change.type === FileChangeType.DELETED) {\n                return resource.isEqualOrParent(change.resource);\n            }\n\n            return resource.toString() === change.resource.toString();\n        });\n    }\n\n    /**\n     * Returns the changes that describe added files.\n     */\n    getAdded(): FileChange[] {\n        return this.getOfType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns if this event contains added files.\n     */\n    gotAdded(): boolean {\n        return this.hasType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns the changes that describe deleted files.\n     */\n    getDeleted(): FileChange[] {\n        return this.getOfType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns if this event contains deleted files.\n     */\n    gotDeleted(): boolean {\n        return this.hasType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns the changes that describe updated files.\n     */\n    getUpdated(): FileChange[] {\n        return this.getOfType(FileChangeType.UPDATED);\n    }\n\n    /**\n     * Returns if this event contains updated files.\n     */\n    gotUpdated(): boolean {\n        return this.hasType(FileChangeType.UPDATED);\n    }\n\n    private getOfType(type: FileChangeType): FileChange[] {\n        return this.changes.filter(change => change.type === type);\n    }\n\n    private hasType(type: FileChangeType): boolean {\n        return this.changes.some(change => change.type === type);\n    }\n}\n\nexport interface BaseStat {\n\n    /**\n     * The unified resource identifier of this file or folder.\n     */\n    resource: URI;\n\n    /**\n     * The name which is the last segment\n     * of the {{path}}.\n     */\n    name: string;\n\n    /**\n     * The size of the file.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    size?: number;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    mtime?: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    ctime?: number;\n\n    /**\n     * A unique identifier that represents the\n     * current state of the file or directory.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    etag?: string;\n}\nexport namespace BaseStat {\n    export function is(arg: Object | undefined): arg is BaseStat {\n        return !!arg && typeof arg === 'object'\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            && ('resource' in arg && <any>arg['resource'] instanceof URI)\n            && ('name' in arg && typeof arg['name'] === 'string');\n    }\n}\n\nexport interface BaseStatWithMetadata extends BaseStat {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n}\n\n/**\n * A file resource with meta information.\n */\nexport interface FileStat extends BaseStat {\n\n    /**\n     * The resource is a file.\n     */\n    isFile: boolean;\n\n    /**\n     * The resource is a directory.\n     */\n    isDirectory: boolean;\n\n    /**\n     * The resource is a symbolic link.\n     */\n    isSymbolicLink: boolean;\n\n    /**\n     * The children of the file stat or undefined if none.\n     */\n    children?: FileStat[];\n}\nexport namespace FileStat {\n    export function is(arg: Object | undefined): arg is FileStat {\n        return BaseStat.is(arg) &&\n            ('isFile' in arg && typeof arg['isFile'] === 'boolean') &&\n            ('isDirectory' in arg && typeof arg['isDirectory'] === 'boolean') &&\n            ('isSymbolicLink' in arg && typeof arg['isSymbolicLink'] === 'boolean');\n    }\n    export function asFileType(stat: FileStat): FileType {\n        let res = 0;\n        if (stat.isFile) {\n            res += FileType.File;\n\n        } else if (stat.isDirectory) {\n            res += FileType.Directory;\n        }\n        if (stat.isSymbolicLink) {\n            res += FileType.SymbolicLink;\n        }\n        return res;\n    }\n    export function toStat(stat: FileStat): Stat | { type: FileType } & Partial<Stat> {\n        return {\n            type: asFileType(stat),\n            ctime: stat.ctime,\n            mtime: stat.mtime,\n            size: stat.size\n        };\n    }\n    export function fromStat(resource: URI, stat: Stat): FileStatWithMetadata;\n    export function fromStat(resource: URI, stat: { type: FileType } & Partial<Stat>): FileStat;\n    export function fromStat(resource: URI, stat: Stat | { type: FileType } & Partial<Stat>): FileStat {\n        return {\n            resource,\n            name: resource.path.base || resource.path.toString(),\n            isFile: (stat.type & FileType.File) !== 0,\n            isDirectory: (stat.type & FileType.Directory) !== 0,\n            isSymbolicLink: (stat.type & FileType.SymbolicLink) !== 0,\n            mtime: stat.mtime,\n            ctime: stat.ctime,\n            size: stat.size,\n            etag: etag({ mtime: stat.mtime, size: stat.size })\n        };\n    }\n    export function dir(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.Directory, ...stat });\n    }\n    export function file(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.File, ...stat });\n    }\n}\n\nexport interface FileStatWithMetadata extends FileStat, BaseStatWithMetadata {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n    children?: FileStatWithMetadata[];\n}\n\nexport interface ResolveFileResult {\n    stat?: FileStat;\n    success: boolean;\n}\n\nexport interface ResolveFileResultWithMetadata extends ResolveFileResult {\n    stat?: FileStatWithMetadata;\n}\n\nexport interface FileContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as buffer.\n     */\n    value: BinaryBuffer;\n}\n\nexport interface FileStreamContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as stream.\n     */\n    value: BinaryBufferReadableStream;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ReadFileOptions extends FileReadStreamOptions {\n\n    /**\n     * The optional etag parameter allows to return early from resolving the resource if\n     * the contents on disk match the etag. This prevents accumulated reading of resources\n     * that have been read already with the same etag.\n     * It is the task of the caller to makes sure to handle this error case from the promise.\n     */\n    readonly etag?: string;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ResolveFileOptions {\n\n    /**\n     * Automatically continue resolving children of a directory until the provided resources\n     * are found.\n     */\n    readonly resolveTo?: readonly URI[];\n\n    /**\n     * Automatically continue resolving children of a directory if the number of children is 1.\n     */\n    readonly resolveSingleChildDescendants?: boolean;\n\n    /**\n     * Will resolve mtime, ctime, size and etag of files if enabled. This can have a negative impact\n     * on performance and thus should only be used when these values are required.\n     */\n    readonly resolveMetadata?: boolean;\n}\n\nexport interface ResolveMetadataFileOptions extends ResolveFileOptions {\n    readonly resolveMetadata: true;\n}\n\nexport interface FileOperationOptions {\n    /**\n     * Indicates that a user action triggered the opening, e.g.\n     * via mouse or keyboard use. Default is true.\n     */\n    fromUserGesture?: boolean\n}\n\nexport interface MoveFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CopyFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CreateFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport class FileOperationError extends Error {\n    constructor(message: string, public fileOperationResult: FileOperationResult, public options?: ReadFileOptions & WriteFileOptions & CreateFileOptions) {\n        super(message);\n        Object.setPrototypeOf(this, FileOperationError.prototype);\n    }\n}\n\nexport const enum FileOperationResult {\n    FILE_IS_DIRECTORY,\n    FILE_NOT_FOUND,\n    FILE_NOT_MODIFIED_SINCE,\n    FILE_MODIFIED_SINCE,\n    FILE_MOVE_CONFLICT,\n    FILE_READ_ONLY,\n    FILE_PERMISSION_DENIED,\n    FILE_TOO_LARGE,\n    FILE_INVALID_PATH,\n    FILE_EXCEEDS_MEMORY_LIMIT,\n    FILE_NOT_DIRECTORY,\n    FILE_OTHER_ERROR\n}\n\nexport interface FileOverwriteOptions {\n    /**\n     * Overwrite the file to create if it already exists on disk. Otherwise\n     * an error will be thrown (FILE_MODIFIED_SINCE).\n     */\n    overwrite: boolean;\n}\n\nexport interface FileReadStreamOptions {\n\n    /**\n     * Is an integer specifying where to begin reading from in the file. If position is undefined,\n     * data will be read from the current file position.\n     */\n    readonly position?: number;\n\n    /**\n     * Is an integer specifying how many bytes to read from the file. By default, all bytes\n     * will be read.\n     */\n    readonly length?: number;\n\n    /**\n     * If provided, the size of the file will be checked against the limits.\n     */\n    limits?: {\n        readonly size?: number;\n        readonly memory?: number;\n    };\n}\n\nexport interface FileUpdateOptions {\n    readEncoding: string;\n    writeEncoding: string;\n    overwriteEncoding: boolean;\n}\nexport interface FileUpdateResult extends Stat {\n    encoding: string;\n}\n\nexport interface FileWriteOptions {\n    overwrite: boolean;\n    create: boolean;\n}\n\nexport interface FileOpenOptions {\n    create: boolean;\n}\n\nexport interface FileDeleteOptions {\n    recursive: boolean;\n    useTrash: boolean;\n}\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport interface Stat {\n    type: FileType;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     */\n    mtime: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     */\n    ctime: number;\n\n    size: number;\n}\n\nexport interface WatchOptions {\n    recursive: boolean;\n    excludes: string[];\n}\n\nexport const enum FileSystemProviderCapabilities {\n    FileReadWrite = 1 << 1,\n    FileOpenReadWriteClose = 1 << 2,\n    FileReadStream = 1 << 4,\n\n    FileFolderCopy = 1 << 3,\n\n    PathCaseSensitive = 1 << 10,\n    Readonly = 1 << 11,\n\n    Trash = 1 << 12,\n\n    Access = 1 << 24,\n    Update = 1 << 25\n}\n\nexport enum FileSystemProviderErrorCode {\n    FileExists = 'EntryExists',\n    FileNotFound = 'EntryNotFound',\n    FileNotADirectory = 'EntryNotADirectory',\n    FileIsADirectory = 'EntryIsADirectory',\n    FileExceedsMemoryLimit = 'EntryExceedsMemoryLimit',\n    FileTooLarge = 'EntryTooLarge',\n    NoPermissions = 'NoPermissions',\n    Unavailable = 'Unavailable',\n    Unknown = 'Unknown'\n}\n\nexport class FileSystemProviderError extends Error {\n\n    constructor(message: string, public readonly code: FileSystemProviderErrorCode) {\n        super(message);\n        Object.setPrototypeOf(this, FileSystemProviderError.prototype);\n    }\n}\n\nexport function createFileSystemProviderError(error: Error | string, code: FileSystemProviderErrorCode): FileSystemProviderError {\n    const providerError = new FileSystemProviderError(error.toString(), code);\n    markAsFileSystemProviderError(providerError, code);\n\n    return providerError;\n}\n\nexport function ensureFileSystemProviderError(error?: Error): Error {\n    if (!error) {\n        return createFileSystemProviderError('Unknown Error', FileSystemProviderErrorCode.Unknown); // https://github.com/Microsoft/vscode/issues/72798\n    }\n\n    return error;\n}\n\nexport const FileSystemProvider = Symbol('FileSystemProvider');\n/**\n * A {@link FileSystemProvider} provides the capabilities to read, write, discover, and to manage files and folders\n * of the underlying (potentially virtual) file system. {@link FileSystemProvider}s can be used to serve files from both the\n * local disk as well as remote locations like ftp-servers, REST-services etc. A {@link FileSystemProvider} is registered for a certain\n * scheme and can handle all resources whose uri does conform to that scheme.\n */\nexport interface FileSystemProvider {\n\n    /** The {@link FileSystemProviderCapabilities} for this provider. */\n    readonly capabilities: FileSystemProviderCapabilities;\n\n    /** * Event that is fired if the capabilities of this provider have changed. */\n    readonly onDidChangeCapabilities: Event<void>;\n\n    /** Event that is fired if a (watched) file in the filesystem of this provider has changed. */\n    readonly onDidChangeFile: Event<readonly FileChange[]>;\n\n    /** Event that is fired if an error occurred when watching files in the filesystem of this provider. */\n    readonly onFileWatchError: Event<void>;\n\n    /**\n     * Watch the given resource and react to changes by firing the {@link FileSystemProvider#onDidChangeFile} event.\n     * @param resource `URI` of the resource to be watched.\n     * @param opts Options to define if the resource should be watched recursively and to\n     *  provide a set of resources that should be excluded from watching.\n     *\n     * @returns A `Disposable` that can be invoked to stop watching the resource.\n     */\n    watch(resource: URI, opts: WatchOptions): IDisposable;\n\n    /**\n     * Retrieve metadata about a given file.\n     *\n     * @param uri The `URI` of the file to retrieve meta data about.\n     * @returns A promise of the metadata about the resource.\n     */\n    stat(resource: URI): Promise<Stat>;\n\n    /**\n     * Create a new directory using the given resource uri.\n     * @param resource The `URI` of the new folder.\n     */\n    mkdir(resource: URI): Promise<void>;\n\n    /**\n     * Retrieve the content of a given directory.\n     * @param resource The `URI` of the directory.\n     *\n     * @returns A map containing the {@link FileType} for each child resource, identified by name.\n     */\n    readdir(resource: URI): Promise<[string, FileType][]>;\n\n    /**\n     * Delete the given resource.\n     * @param resource The `URI` of the resource to delete.\n     * @param opts Options to define if files should be deleted recursively and if the trash should be used.\n     */\n    delete(resource: URI, opts: FileDeleteOptions): Promise<void>;\n\n    /**\n     * Rename a file or folder.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the target location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    rename(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileFolderCopyCapability}.\n     * See {@link FileSystemProviderWithFileFolderCopyCapability#copy}} for additional documentation.\n     */\n    copy?(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#readFile} for additional documentation.\n     */\n    readFile?(resource: URI): Promise<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#writeFile} for additional documentation.\n     */\n    writeFile?(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadStreamCapability}.\n     * See {@link FileSystemProviderWithFileReadStreamCapability#readFileStream} for additional documentation.\n     */\n    readFileStream?(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#open} for additional documentation.\n     */\n    open?(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#close} for additional documentation.\n     */\n    close?(fd: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#read} for additional documentation.\n     */\n    read?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#write} for additional documentation.\n     */\n    write?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#access} for additional documentation.\n     */\n    access?(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#fsPath} for additional documentation.\n     */\n    fsPath?(resource: URI): Promise<string>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithUpdateCapability}.\n     * See {@link FileSystemProviderWithUpdateCapability#updateFile} for additional documentation.\n     */\n    updateFile?(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed for providers, that should be\n * able access files, are implemented.\n */\nexport interface FileSystemProviderWithAccessCapability extends FileSystemProvider {\n    /**\n     * Test if the user has the permission to access the given file in the specified mode.\n     * @param resource The `URI` of the file that should be tested.\n     * @param mode The access mode that should be tested.\n     *\n     * @returns A promise that resolves if the user has the required permissions, should be rejected otherwise.\n     */\n    access(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Derive the platform specific file system path that is represented by the resource.\n     * @param resource `URI` of the resource to derive the path from.\n     *\n     * @returns A promise of the corresponding file system path.\n     */\n    fsPath(resource: URI): Promise<string>;\n}\n\nexport function hasAccessCapability(provider: FileSystemProvider): provider is FileSystemProviderWithAccessCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Access);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed, for providers that should be\n * able to update (text) files, are implemented.\n */\nexport interface FileSystemProviderWithUpdateCapability extends FileSystemProvider {\n    /**\n     * Update the content of the given (text) file according to the given text document changes.\n     * @param resource `URI` of the resource to update.\n     * @param changes Array of events describing the changes to the file.\n     * @param opts The encoding options.\n     *\n     * @returns A promise of the file metadata that resolves after the update process has completed.\n     */\n    updateFile(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\nexport function hasUpdateCapability(provider: FileSystemProvider): provider is FileSystemProviderWithUpdateCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Update);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers\n * that should be able to read & write files, are implemented.\n */\nexport interface FileSystemProviderWithFileReadWriteCapability extends FileSystemProvider {\n    /**\n     * Read the contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFile(resource: URI): Promise<Uint8Array>;\n\n    /**\n     *  Write data to a file, replacing its entire contents.\n     * @param resource The uri of the file.\n     * @param content The new content of the file.\n     * @param opts Options to define if the file should be created if missing and if an existing file should be overwritten.\n     */\n    writeFile(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n}\n\nexport function hasReadWriteCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadWriteCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadWrite);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to copy\n * file folders, are implemented.\n */\nexport interface FileSystemProviderWithFileFolderCopyCapability extends FileSystemProvider {\n    /**\n     * Copy files or folders.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the destination location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    copy(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n}\n\nexport function hasFileFolderCopyCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileFolderCopyCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileFolderCopy);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to open,read, write\n * or close files, are implemented.\n */\nexport interface FileSystemProviderWithOpenReadWriteCloseCapability extends FileSystemProvider {\n    /**\n     * Open the give file.\n     * @param resource The `URI` of the file to open.\n     * @param opts Options to define if the file should be created if it does not exist yet.\n     *\n     * @returns A promise of the file descriptor that resolves after the file is open.\n     */\n    open(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Close the file with the given file descriptor.\n     * @param fd the file descriptor to close.\n     */\n    close(fd: number): Promise<void>;\n\n    /**\n     * Read specified content from a given file descriptor into a data buffer.\n     * @param fd The file descriptor referencing the file to read from.\n     * @param pos The offset from the beginning of the file from which data should be read.\n     * @param data The buffer that the data will be written to.\n     * @param offset The offset in the buffer at which to start writing.\n     * @param length The number of bytes to read.\n     *\n     * @returns A promise of the number of bytes read.\n     */\n    read(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Write specified content from the data buffer to the file referenced by the given file descriptor.\n     * @param fd The file descriptor referencing the file to write to.\n     * @param pos The offset from the beginning of the file where this data should be written.\n     * @param offset The part of the buffer to be read from.\n     * @param length The number of bytes to write.\n     *\n     * @returns A promise of the number of bytes written.\n     */\n    write(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n}\n\nexport function hasOpenReadWriteCloseCapability(provider: FileSystemProvider): provider is FileSystemProviderWithOpenReadWriteCloseCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileOpenReadWriteClose);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to read\n * files as streams, are implemented.\n */\nexport interface FileSystemProviderWithFileReadStreamCapability extends FileSystemProvider {\n    /**\n     * Read the  contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n}\n\nexport function hasFileReadStreamCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadStreamCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadStream);\n}\n\nexport function markAsFileSystemProviderError(error: Error, code: FileSystemProviderErrorCode): Error {\n    error.name = code ? `${code} (FileSystemError)` : 'FileSystemError';\n\n    return error;\n}\n\nexport function toFileSystemProviderErrorCode(error: Error | undefined | null): FileSystemProviderErrorCode {\n\n    // Guard against abuse\n    if (!error) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    // FileSystemProviderError comes with the code\n    if (error instanceof FileSystemProviderError) {\n        return error.code;\n    }\n\n    // Any other error, check for name match by assuming that the error\n    // went through the markAsFileSystemProviderError() method\n    const match = /^(.+) \\(FileSystemError\\)$/.exec(error.name);\n    if (!match) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    switch (match[1]) {\n        case FileSystemProviderErrorCode.FileExists: return FileSystemProviderErrorCode.FileExists;\n        case FileSystemProviderErrorCode.FileIsADirectory: return FileSystemProviderErrorCode.FileIsADirectory;\n        case FileSystemProviderErrorCode.FileNotADirectory: return FileSystemProviderErrorCode.FileNotADirectory;\n        case FileSystemProviderErrorCode.FileNotFound: return FileSystemProviderErrorCode.FileNotFound;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit: return FileSystemProviderErrorCode.FileExceedsMemoryLimit;\n        case FileSystemProviderErrorCode.FileTooLarge: return FileSystemProviderErrorCode.FileTooLarge;\n        case FileSystemProviderErrorCode.NoPermissions: return FileSystemProviderErrorCode.NoPermissions;\n        case FileSystemProviderErrorCode.Unavailable: return FileSystemProviderErrorCode.Unavailable;\n    }\n\n    return FileSystemProviderErrorCode.Unknown;\n}\n\nexport function toFileOperationResult(error: Error): FileOperationResult {\n\n    // FileSystemProviderError comes with the result already\n    if (error instanceof FileOperationError) {\n        return error.fileOperationResult;\n    }\n\n    // Otherwise try to find from code\n    switch (toFileSystemProviderErrorCode(error)) {\n        case FileSystemProviderErrorCode.FileNotFound:\n            return FileOperationResult.FILE_NOT_FOUND;\n        case FileSystemProviderErrorCode.FileIsADirectory:\n            return FileOperationResult.FILE_IS_DIRECTORY;\n        case FileSystemProviderErrorCode.FileNotADirectory:\n            return FileOperationResult.FILE_NOT_DIRECTORY;\n        case FileSystemProviderErrorCode.NoPermissions:\n            return FileOperationResult.FILE_PERMISSION_DENIED;\n        case FileSystemProviderErrorCode.FileExists:\n            return FileOperationResult.FILE_MOVE_CONFLICT;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit:\n            return FileOperationResult.FILE_EXCEEDS_MEMORY_LIMIT;\n        case FileSystemProviderErrorCode.FileTooLarge:\n            return FileOperationResult.FILE_TOO_LARGE;\n        default:\n            return FileOperationResult.FILE_OTHER_ERROR;\n    }\n}\n\n/**\n * A hint to disable etag checking for reading/writing.\n */\nexport const ETAG_DISABLED = '';\n\nexport function etag(stat: { mtime: number, size: number }): string;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined {\n    if (typeof stat.size !== 'number' || typeof stat.mtime !== 'number') {\n        return undefined;\n    }\n\n    return stat.mtime.toString(29) + stat.size.toString(31);\n}\n/**\n * Helper to format a raw byte size into a human readable label.\n */\nexport class BinarySize {\n    static readonly KB = 1024;\n    static readonly MB = BinarySize.KB * BinarySize.KB;\n    static readonly GB = BinarySize.MB * BinarySize.KB;\n    static readonly TB = BinarySize.GB * BinarySize.KB;\n\n    static formatSize(size: number): string {\n        if (size < BinarySize.KB) {\n            return size + 'B';\n        }\n        if (size < BinarySize.MB) {\n            return (size / BinarySize.KB).toFixed(2) + 'KB';\n        }\n        if (size < BinarySize.GB) {\n            return (size / BinarySize.MB).toFixed(2) + 'MB';\n        }\n        if (size < BinarySize.TB) {\n            return (size / BinarySize.GB).toFixed(2) + 'GB';\n        }\n        return (size / BinarySize.TB).toFixed(2) + 'TB';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/arrays.ts\n\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nexport function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n    return <T[]>array.filter(e => !!e);\n}\n\n/**\n * @returns True if the provided object is an array and has at least one element.\n */\nexport function isNonEmptyArray<T>(obj: T[] | undefined | null): obj is T[];\nexport function isNonEmptyArray<T>(obj: readonly T[] | undefined | null): obj is readonly T[];\nexport function isNonEmptyArray<T>(obj: T[] | readonly T[] | undefined | null): obj is T[] | readonly T[] {\n    return Array.isArray(obj) && obj.length > 0;\n}\n\nexport function flatten<T>(arr: T[][]): T[] {\n    return (<T[]>[]).concat(...arr);\n}\n\nexport interface Splice<T> {\n    readonly start: number;\n    readonly deleteCount: number;\n    readonly toInsert: T[];\n}\n\n/**\n * @returns 'true' if the 'arg' is a 'ReadonlyArray'.\n */\nexport function isReadonlyArray(arg: unknown): arg is readonly unknown[] {\n    // Since Typescript does not properly narrow down typings for 'ReadonlyArray' we need to help it.\n    return Array.isArray(arg);\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/core/characterClassifier.ts\n\nimport { toUint8 } from './uint';\n\n/**\n * A fast character classifier that uses a compact array for ASCII values.\n */\nexport class CharacterClassifier<T extends number> {\n    /**\n     * Maintain a compact (fully initialized ASCII map for quickly classifying ASCII characters - used more often in code).\n     */\n    protected _asciiMap: Uint8Array;\n\n    /**\n     * The entire map (sparse array).\n     */\n    protected _map: Map<number, number>;\n\n    protected _defaultValue: number;\n\n    constructor(_defaultValue: T) {\n        const defaultValue = toUint8(_defaultValue);\n\n        this._defaultValue = defaultValue;\n        this._asciiMap = CharacterClassifier._createAsciiMap(defaultValue);\n        this._map = new Map<number, number>();\n    }\n\n    private static _createAsciiMap(defaultValue: number): Uint8Array {\n        const asciiMap: Uint8Array = new Uint8Array(256);\n        for (let i = 0; i < 256; i++) {\n            asciiMap[i] = defaultValue;\n        }\n        return asciiMap;\n    }\n\n    public set(charCode: number, _value: T): void {\n        const value = toUint8(_value);\n\n        if (charCode >= 0 && charCode < 256) {\n            this._asciiMap[charCode] = value;\n        } else {\n            this._map.set(charCode, value);\n        }\n    }\n\n    public get(charCode: number): T {\n        if (charCode >= 0 && charCode < 256) {\n            return <T>this._asciiMap[charCode];\n        } else {\n            return <T>(this._map.get(charCode) || this._defaultValue);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Channel } from '@theia/debug/lib/common/debug-service';\nimport { ConnectionExt, ConnectionMain } from './plugin-api-rpc';\nimport { Emitter } from '@theia/core/lib/common/event';\n\n/**\n * A channel communicating with a counterpart in a plugin host.\n */\nexport class PluginChannel implements Channel {\n    private messageEmitter: Emitter<string> = new Emitter();\n    private errorEmitter: Emitter<unknown> = new Emitter();\n    private closedEmitter: Emitter<void> = new Emitter();\n\n    constructor(\n        protected readonly id: string,\n        protected readonly connection: ConnectionExt | ConnectionMain) { }\n\n    send(content: string): void {\n        this.connection.$sendMessage(this.id, content);\n    }\n\n    fireMessageReceived(msg: string): void {\n        this.messageEmitter.fire(msg);\n    }\n\n    fireError(error: unknown): void {\n        this.errorEmitter.fire(error);\n    }\n\n    fireClosed(): void {\n        this.closedEmitter.fire();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(cb: (data: any) => void): void {\n        this.messageEmitter.event(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.errorEmitter.event(cb);\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.closedEmitter.event(() => cb(-1, 'closed'));\n    }\n\n    close(): void {\n        this.connection.$deleteConnection(this.id);\n    }\n}\n\nexport class ConnectionImpl implements ConnectionMain, ConnectionExt {\n    private readonly proxy: ConnectionExt | ConnectionExt;\n    private readonly connections = new Map<string, PluginChannel>();\n\n    constructor(proxy: ConnectionMain | ConnectionExt) {\n        this.proxy = proxy;\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.fireMessageReceived(message);\n        } else {\n            console.warn(`Received message for unknown connection: ${id}`);\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        console.debug(`Creating plugin connection: ${id}`);\n\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        console.debug(`Deleting plugin connection: ${id}`);\n        const connection = this.connections.get(id);\n        if (connection) {\n            this.connections.delete(id);\n            connection.fireClosed();\n        }\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginChannel> {\n        console.debug(`Creating local connection: ${id}`);\n        const connection = await this.doEnsureConnection(id);\n        await this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginChannel> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginChannel> {\n        const channel = new PluginChannel(id, this.proxy);\n        channel.onClose(() => this.connections.delete(id));\n        return channel;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): 'line' | 'block' | 'underline' | 'line-thin' | 'block-outline' | 'underline-thin' {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Here we expose types from @theia/plugin, so it becomes a direct dependency\nexport * from './plugin-protocol';\nexport * from './plugin-api-rpc';\nexport * from './plugin-ext-api-contribution';\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/modes/linkComputer.ts\n\n/* eslint-disable max-len */\n\nimport { CharacterClassifier } from './character-classifier';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { DocumentLink as ILink } from './plugin-api-rpc-model';\n\nexport interface ILinkComputerTarget {\n    getLineCount(): number;\n    getLineContent(lineNumber: number): string;\n}\n\nexport const enum State {\n    Invalid = 0,\n    Start = 1,\n    H = 2,\n    HT = 3,\n    HTT = 4,\n    HTTP = 5,\n    F = 6,\n    FI = 7,\n    FIL = 8,\n    BeforeColon = 9,\n    AfterColon = 10,\n    AlmostThere = 11,\n    End = 12,\n    Accept = 13,\n    LastKnownState = 14 // marker, custom states may follow\n}\n\nexport type Edge = [State, number, State];\n\nexport class Uint8Matrix {\n\n    private readonly _data: Uint8Array;\n    public readonly rows: number;\n    public readonly cols: number;\n\n    constructor(rows: number, cols: number, defaultValue: number) {\n        const data = new Uint8Array(rows * cols);\n        for (let i = 0, len = rows * cols; i < len; i++) {\n            data[i] = defaultValue;\n        }\n\n        this._data = data;\n        this.rows = rows;\n        this.cols = cols;\n    }\n\n    public get(row: number, col: number): number {\n        return this._data[row * this.cols + col];\n    }\n\n    public set(row: number, col: number, value: number): void {\n        this._data[row * this.cols + col] = value;\n    }\n}\n\nexport class StateMachine {\n\n    private readonly _states: Uint8Matrix;\n    private readonly _maxCharCode: number;\n\n    constructor(edges: Edge[]) {\n        let maxCharCode = 0;\n        let maxState = State.Invalid;\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            if (chCode > maxCharCode) {\n                maxCharCode = chCode;\n            }\n            if (from > maxState) {\n                maxState = from;\n            }\n            if (to > maxState) {\n                maxState = to;\n            }\n        }\n\n        maxCharCode++;\n        maxState++;\n\n        const states = new Uint8Matrix(maxState, maxCharCode, State.Invalid);\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            states.set(from, chCode, to);\n        }\n\n        this._states = states;\n        this._maxCharCode = maxCharCode;\n    }\n\n    public nextState(currentState: State, chCode: number): State {\n        if (chCode < 0 || chCode >= this._maxCharCode) {\n            return State.Invalid;\n        }\n        return this._states.get(currentState, chCode);\n    }\n}\n\n// State machine for http:// or https:// or file://\nlet _stateMachine: StateMachine | null = null;\nfunction getStateMachine(): StateMachine {\n    if (_stateMachine === null) {\n        _stateMachine = new StateMachine([\n            [State.Start, CharCode.h, State.H],\n            [State.Start, CharCode.H, State.H],\n            [State.Start, CharCode.f, State.F],\n            [State.Start, CharCode.F, State.F],\n\n            [State.H, CharCode.t, State.HT],\n            [State.H, CharCode.T, State.HT],\n\n            [State.HT, CharCode.t, State.HTT],\n            [State.HT, CharCode.T, State.HTT],\n\n            [State.HTT, CharCode.p, State.HTTP],\n            [State.HTT, CharCode.P, State.HTTP],\n\n            [State.HTTP, CharCode.s, State.BeforeColon],\n            [State.HTTP, CharCode.S, State.BeforeColon],\n            [State.HTTP, CharCode.Colon, State.AfterColon],\n\n            [State.F, CharCode.i, State.FI],\n            [State.F, CharCode.I, State.FI],\n\n            [State.FI, CharCode.l, State.FIL],\n            [State.FI, CharCode.L, State.FIL],\n\n            [State.FIL, CharCode.e, State.BeforeColon],\n            [State.FIL, CharCode.E, State.BeforeColon],\n\n            [State.BeforeColon, CharCode.Colon, State.AfterColon],\n\n            [State.AfterColon, CharCode.Slash, State.AlmostThere],\n\n            [State.AlmostThere, CharCode.Slash, State.End],\n        ]);\n    }\n    return _stateMachine;\n}\n\nconst enum CharacterClass {\n    None = 0,\n    ForceTermination = 1,\n    CannotEndIn = 2\n}\n\nlet _classifier: CharacterClassifier<CharacterClass> | null = null;\nfunction getClassifier(): CharacterClassifier<CharacterClass> {\n    if (_classifier === null) {\n        _classifier = new CharacterClassifier<CharacterClass>(CharacterClass.None);\n\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…';\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), CharacterClass.ForceTermination);\n        }\n\n        const CANNOT_END_WITH_CHARACTERS = '.,;';\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), CharacterClass.CannotEndIn);\n        }\n    }\n    return _classifier;\n}\n\nexport class LinkComputer {\n\n    private static _createLink(classifier: CharacterClassifier<CharacterClass>, line: string, lineNumber: number, linkBeginIndex: number, linkEndIndex: number): ILink {\n        // Do not allow to end link in certain characters...\n        let lastIncludedCharIndex = linkEndIndex - 1;\n        do {\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\n            const chClass = classifier.get(chCode);\n            if (chClass !== CharacterClass.CannotEndIn) {\n                break;\n            }\n            lastIncludedCharIndex--;\n        } while (lastIncludedCharIndex > linkBeginIndex);\n\n        // Handle links enclosed in parens, square and curly brackets.\n        if (linkBeginIndex > 0) {\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\n\n            if (\n                (charCodeBeforeLink === CharCode.OpenParen && lastCharCodeInLink === CharCode.CloseParen)\n                || (charCodeBeforeLink === CharCode.OpenSquareBracket && lastCharCodeInLink === CharCode.CloseSquareBracket)\n                || (charCodeBeforeLink === CharCode.OpenCurlyBrace && lastCharCodeInLink === CharCode.CloseCurlyBrace)\n            ) {\n                // Do not end in ) if ( is before the link start\n                // Do not end in ] if [ is before the link start\n                // Do not end in } if { is before the link start\n                lastIncludedCharIndex--;\n            }\n        }\n\n        return {\n            range: {\n                startLineNumber: lineNumber,\n                startColumn: linkBeginIndex + 1,\n                endLineNumber: lineNumber,\n                endColumn: lastIncludedCharIndex + 2\n            },\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\n        };\n    }\n\n    public static computeLinks(model: ILinkComputerTarget, stateMachine: StateMachine = getStateMachine()): ILink[] {\n        const classifier = getClassifier();\n\n        const result: ILink[] = [];\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\n            const line = model.getLineContent(i);\n            const len = line.length;\n\n            let j = 0;\n            let linkBeginIndex = 0;\n            let linkBeginChCode = 0;\n            let state = State.Start;\n            let hasOpenParens = false;\n            let hasOpenSquareBracket = false;\n            let inSquareBrackets = false;\n            let hasOpenCurlyBracket = false;\n\n            while (j < len) {\n\n                let resetStateMachine = false;\n                const chCode = line.charCodeAt(j);\n\n                if (state === State.Accept) {\n                    let chClass: CharacterClass;\n                    switch (chCode) {\n                        case CharCode.OpenParen:\n                            hasOpenParens = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseParen:\n                            chClass = (hasOpenParens ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenSquareBracket:\n                            inSquareBrackets = true;\n                            hasOpenSquareBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseSquareBracket:\n                            inSquareBrackets = false;\n                            chClass = (hasOpenSquareBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenCurlyBrace:\n                            hasOpenCurlyBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseCurlyBrace:\n                            chClass = (hasOpenCurlyBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\n                        case CharCode.SingleQuote:\n                            chClass = (linkBeginChCode === CharCode.DoubleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.DoubleQuote:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.BackTick:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.DoubleQuote) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.Asterisk:\n                            // `*` terminates a link if the link began with `*`\n                            chClass = (linkBeginChCode === CharCode.Asterisk) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Pipe:\n                            // `|` terminates a link if the link began with `|`\n                            chClass = (linkBeginChCode === CharCode.Pipe) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Space:\n                            // ` ` allow space in between [ and ]\n                            chClass = (inSquareBrackets ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        default:\n                            chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\n                        resetStateMachine = true;\n                    }\n                } else if (state === State.End) {\n\n                    let chClass: CharacterClass;\n                    if (chCode === CharCode.OpenSquareBracket) {\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\n                        hasOpenSquareBracket = true;\n                        chClass = CharacterClass.None;\n                    } else {\n                        chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        resetStateMachine = true;\n                    } else {\n                        state = State.Accept;\n                    }\n                } else {\n                    state = stateMachine.nextState(state, chCode);\n                    if (state === State.Invalid) {\n                        resetStateMachine = true;\n                    }\n                }\n\n                if (resetStateMachine) {\n                    state = State.Start;\n                    hasOpenParens = false;\n                    hasOpenSquareBracket = false;\n                    hasOpenCurlyBracket = false;\n\n                    // Record where the link started\n                    linkBeginIndex = j + 1;\n                    linkBeginChCode = chCode;\n                }\n\n                j++;\n            }\n\n            if (state === State.Accept) {\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\n            }\n\n        }\n\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/* eslint-disable */\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// file copied from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n// Original license:\n/*\n====\n\nCopyright (c) 2015 John Vilk and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n====\n*/\n\nimport { sep } from '@theia/callhierarchy/lib/common/paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from './uri-components';\nimport { CompletionItemTag } from '../plugin/types-impl';\nimport { Event as TheiaEvent } from '@theia/core/lib/common/event';\nimport { URI } from '@theia/core/shared/vscode-uri';\n\n// Should contains internal Plugin API types\n\n/**\n * Represents options to configure the behavior of showing a document in an editor.\n */\nexport interface TextDocumentShowOptions {\n    /**\n     * An optional selection to apply for the document in the editor.\n     */\n    selection?: Range;\n\n    /**\n     * An optional flag that when `true` will stop the editor from taking focus.\n     */\n    preserveFocus?: boolean;\n\n    /**\n     * An optional flag that controls if an editor-tab will be replaced\n     * with the next editor or if it will be kept.\n     */\n    preview?: boolean;\n\n    /**\n     * Denotes a location of an editor in the window. Editors can be arranged in a grid\n     * and each column represents one editor location in that grid by counting the editors\n     * in order of their appearance.\n     */\n    viewColumn?: theia.ViewColumn;\n}\n\nexport interface Range {\n    /**\n     * Line number on which the range starts (starts at 1).\n     */\n    readonly startLineNumber: number;\n    /**\n     * Column on which the range starts in line `startLineNumber` (starts at 1).\n     */\n    readonly startColumn: number;\n    /**\n     * Line number on which the range ends.\n     */\n    readonly endLineNumber: number;\n    /**\n     * Column on which the range ends in line `endLineNumber`.\n     */\n    readonly endColumn: number;\n}\n\nexport interface MarkdownString {\n    value: string;\n    isTrusted?: boolean;\n    uris?: {\n        [href: string]: UriComponents;\n    };\n}\n\nexport interface SerializedDocumentFilter {\n    $serialized: true;\n    language?: string;\n    scheme?: string;\n    pattern?: theia.GlobPattern;\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport interface CompletionContext {\n    triggerKind: CompletionTriggerKind;\n    triggerCharacter?: string;\n}\n\nexport enum CompletionItemInsertTextRule {\n    KeepWhitespace = 1,\n    InsertAsSnippet = 4\n}\n\nexport interface Completion {\n    label: string;\n    label2?: string;\n    kind: CompletionItemKind;\n    detail?: string;\n    documentation?: string | MarkdownString;\n    sortText?: string;\n    filterText?: string;\n    preselect?: boolean;\n    insertText: string;\n    insertTextRules?: CompletionItemInsertTextRule;\n    range?: Range | {\n        insert: Range;\n        replace: Range;\n    };\n    commitCharacters?: string[];\n    additionalTextEdits?: SingleEditOperation[];\n    command?: Command;\n    tags?: CompletionItemTag[];\n    /** @deprecated use tags instead. */\n    deprecated?: boolean;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text: string | null;\n    /**\n     * This indicates that this operation has \"insert\" semantics.\n     * i.e. forceMoveMarkers = true => if `range` is collapsed, all markers at the position will be moved.\n     */\n    forceMoveMarkers?: boolean;\n}\n\nexport interface Command {\n    id: string;\n    title: string;\n    tooltip?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    arguments?: any[];\n}\n\nexport enum CompletionItemKind {\n    Method = 0,\n    Function = 1,\n    Constructor = 2,\n    Field = 3,\n    Variable = 4,\n    Class = 5,\n    Struct = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Event = 10,\n    Operator = 11,\n    Unit = 12,\n    Value = 13,\n    Constant = 14,\n    Enum = 15,\n    EnumMember = 16,\n    Keyword = 17,\n    Text = 18,\n    Color = 19,\n    File = 20,\n    Reference = 21,\n    Customcolor = 22,\n    Folder = 23,\n    TypeParameter = 24,\n    User = 25,\n    Issue = 26,\n    Snippet = 27\n}\n\nexport class IdObject {\n    id?: number;\n}\nexport interface CompletionDto extends Completion {\n    id: number;\n    parentId: number;\n}\n\nexport interface CompletionResultDto extends IdObject {\n    id: number;\n    defaultRange: {\n        insert: Range,\n        replace: Range\n    }\n    completions: CompletionDto[];\n    incomplete?: boolean;\n}\n\nexport interface MarkerData {\n    code?: string;\n    severity: MarkerSeverity;\n    message: string;\n    source?: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n    relatedInformation?: RelatedInformation[];\n    tags?: MarkerTag[];\n}\n\nexport interface RelatedInformation {\n    resource: string;\n    message: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\nexport interface ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n}\n\nexport interface SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n}\n\nexport interface SignatureHelp extends IdObject {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport interface SignatureHelpContext {\n    triggerKind: theia.SignatureHelpTriggerKind;\n    triggerCharacter?: string;\n    isRetrigger: boolean;\n    activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface Hover {\n    contents: MarkdownString[];\n    range?: Range;\n}\n\nexport interface HoverProvider {\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Hover | undefined | Thenable<Hover | undefined>;\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport interface DocumentHighlight {\n    range: Range;\n    kind?: DocumentHighlightKind;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): DocumentHighlight[] | undefined;\n}\n\nexport interface FormattingOptions {\n    tabSize: number;\n    insertSpaces: boolean;\n}\n\nexport interface TextEdit {\n    range: Range;\n    text: string;\n    eol?: monaco.editor.EndOfLineSequence;\n}\n\nexport interface Location {\n    uri: UriComponents;\n    range: Range;\n}\n\nexport type Definition = Location | Location[] | LocationLink[];\n\nexport interface LocationLink {\n    uri: UriComponents;\n    range: Range;\n    originSelectionRange?: Range;\n    targetSelectionRange?: Range;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\n/**\n * Value-object that contains additional information when\n * requesting references.\n */\nexport interface ReferenceContext {\n\n    /**\n     * Include the declaration of the current symbol.\n     */\n    includeDeclaration: boolean;\n}\n\nexport type CacheId = number;\nexport type ChainedCacheId = [CacheId, CacheId];\n\nexport interface DocumentLink {\n    cacheId?: ChainedCacheId,\n    range: Range;\n    url?: UriComponents | string;\n    tooltip?: string;\n}\n\nexport interface DocumentLinkProvider {\n    provideLinks(model: monaco.editor.ITextModel, token: monaco.CancellationToken): DocumentLink[] | undefined | PromiseLike<DocumentLink[] | undefined>;\n    resolveLink?: (link: DocumentLink, token: monaco.CancellationToken) => DocumentLink | PromiseLike<DocumentLink[]>;\n}\n\nexport interface CodeLensSymbol {\n    range: Range;\n    command?: Command;\n}\n\nexport interface CodeAction {\n    title: string;\n    command?: Command;\n    edit?: WorkspaceEdit;\n    diagnostics?: MarkerData[];\n    kind?: string;\n}\n\nexport interface CodeActionContext {\n    only?: string;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(\n        model: monaco.editor.ITextModel,\n        range: Range | Selection,\n        context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken\n    ): CodeAction[] | PromiseLike<CodeAction[]>;\n\n    providedCodeActionKinds?: string[];\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEdit {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: { overwrite?: boolean, ignoreIfNotExists?: boolean, ignoreIfExists?: boolean, recursive?: boolean };\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceTextEdit {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceEdit {\n    edits: Array<WorkspaceTextEdit | WorkspaceFileEdit>;\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\nexport interface DocumentSymbol {\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags: ReadonlyArray<SymbolTag>;\n    containerName?: string;\n    range: Range;\n    selectionRange: Range;\n    children?: DocumentSymbol[];\n}\n\nexport interface WorkspaceRootsChangeEvent {\n    roots: string[];\n}\n\nexport interface WorkspaceFolder {\n    uri: UriComponents;\n    name: string;\n    index: number;\n}\n\nexport interface Breakpoint {\n    readonly id: string;\n    readonly enabled: boolean;\n    readonly condition?: string;\n    readonly hitCondition?: string;\n    readonly logMessage?: string;\n    readonly location?: Location;\n    readonly functionName?: string;\n}\n\nexport interface WorkspaceSymbolParams {\n    query: string\n}\n\nexport interface FoldingContext {\n}\n\nexport interface FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n}\n\nexport class FoldingRangeKind {\n    static readonly Comment = new FoldingRangeKind('comment');\n    static readonly Imports = new FoldingRangeKind('imports');\n    static readonly Region = new FoldingRangeKind('region');\n    public constructor(public value: string) { }\n}\n\nexport interface SelectionRange {\n    range: Range;\n}\n\nexport interface Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n}\n\nexport interface ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n}\n\nexport interface ColorInformation {\n    range: Range;\n    color: Color;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(model: monaco.editor.ITextModel): PromiseLike<ColorInformation[]>;\n    provideColorPresentations(model: monaco.editor.ITextModel, colorInfo: ColorInformation): PromiseLike<ColorPresentation[]>;\n}\n\nexport interface Rejection {\n    rejectReason?: string;\n}\n\nexport interface RenameLocation {\n    range: Range;\n    text: string;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(model: monaco.editor.ITextModel, position: Position, newName: string): PromiseLike<WorkspaceEdit & Rejection>;\n    resolveRenameLocation?(model: monaco.editor.ITextModel, position: Position): PromiseLike<RenameLocation & Rejection>;\n}\n\nexport interface CallHierarchyDefinition {\n    name: string;\n    kind: SymbolKind;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n    tags?: readonly SymbolTag[];\n    data: unknown;\n}\n\nexport interface CallHierarchyReference {\n    callerDefinition: CallHierarchyDefinition,\n    references: Range[]\n}\n\nexport interface CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n    tags?: readonly SymbolTag[];\n    data: unknown;\n}\n\nexport interface CallHierarchyIncomingCall {\n    from: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface CallHierarchyOutgoingCall {\n    to: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface SearchInWorkspaceResult {\n    root: string;\n    fileUri: string;\n    matches: SearchMatch[];\n}\n\nexport interface SearchMatch {\n    line: number;\n    character: number;\n    length: number;\n    lineText: string | LinePreview;\n\n}\nexport interface LinePreview {\n    text: string;\n    character: number;\n}\n\nexport interface AuthenticationSession {\n    id: string;\n    accessToken: string;\n    account: { id: string, label: string };\n    scopes: ReadonlyArray<string>;\n}\n\nexport interface AuthenticationSessionsChangeEvent {\n    added: ReadonlyArray<string>;\n    removed: ReadonlyArray<string>;\n    changed: ReadonlyArray<string>;\n}\n\nexport interface AuthenticationProviderInformation {\n    id: string;\n    label: string;\n}\n\nexport interface CommentOptions {\n    /**\n     * An optional string to show on the comment input box when it's collapsed.\n     */\n    prompt?: string;\n\n    /**\n     * An optional string to show as placeholder in the comment input box when it's focused.\n     */\n    placeHolder?: string;\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\nexport interface Comment {\n    readonly uniqueIdInThread: number;\n    readonly body: MarkdownString;\n    readonly userName: string;\n    readonly userIconPath?: string;\n    readonly contextValue?: string;\n    readonly label?: string;\n    readonly mode?: CommentMode;\n}\n\nexport enum CommentThreadCollapsibleState {\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 0,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 1\n}\n\nexport interface CommentInput {\n    value: string;\n    uri: URI;\n}\n\nexport interface CommentThread {\n    commentThreadHandle: number;\n    controllerHandle: number;\n    extensionId?: string;\n    threadId: string;\n    resource: string | null;\n    range: Range;\n    label: string | undefined;\n    contextValue: string | undefined;\n    comments: Comment[] | undefined;\n    onDidChangeComments: TheiaEvent<Comment[] | undefined>;\n    collapsibleState?: CommentThreadCollapsibleState;\n    input?: CommentInput;\n    onDidChangeInput: TheiaEvent<CommentInput | undefined>;\n    onDidChangeRange: TheiaEvent<Range>;\n    onDidChangeLabel: TheiaEvent<string | undefined>;\n    onDidChangeCollapsibleState: TheiaEvent<CommentThreadCollapsibleState | undefined>;\n    isDisposed: boolean;\n}\n\nexport interface CommentThreadChangedEventMain extends CommentThreadChangedEvent {\n    owner: string;\n}\n\nexport interface CommentThreadChangedEvent {\n    /**\n     * Added comment threads.\n     */\n    readonly added: CommentThread[];\n\n    /**\n     * Removed comment threads.\n     */\n    readonly removed: CommentThread[];\n\n    /**\n     * Changed comment threads.\n     */\n    readonly changed: CommentThread[];\n}\n\nexport interface CommentingRanges {\n    readonly resource: URI;\n    ranges: Range[];\n}\n\nexport interface CommentInfo {\n    extensionId?: string;\n    threads: CommentThread[];\n    commentingRanges: CommentingRanges;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createProxyIdentifier, ProxyIdentifier, RPCProtocol } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage, IconUrl, PluginJsonValidationContribution } from './plugin-protocol';\nimport { QueryParameters } from './env';\nimport { TextEditorCursorStyle } from './editor-options';\nimport {\n    ConfigurationTarget,\n    TextEditorLineNumbersStyle,\n    EndOfLine,\n    OverviewRulerLane,\n    IndentAction,\n    FileOperationOptions\n} from '../plugin/types-impl';\nimport { UriComponents } from './uri-components';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    FormattingOptions,\n    ChainedCacheId,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit,\n    DocumentSymbol,\n    ReferenceContext,\n    TextDocumentShowOptions,\n    WorkspaceRootsChangeEvent,\n    Location,\n    Breakpoint,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeAction,\n    CodeActionContext,\n    FoldingContext,\n    FoldingRange,\n    SelectionRange,\n    CallHierarchyDefinition,\n    CallHierarchyReference,\n    SearchInWorkspaceResult,\n    AuthenticationSession,\n    AuthenticationSessionsChangeEvent,\n    AuthenticationProviderInformation,\n    Comment,\n    CommentOptions,\n    CommentThreadCollapsibleState,\n    CommentThread,\n    CommentThreadChangedEvent,\n} from './plugin-api-rpc-model';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ArgumentProcessor } from '../plugin/command-registry';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineChangeEvent,\n    TimelineProviderDescriptor\n} from '@theia/timeline/lib/common/timeline-model';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { ThemeType } from '@theia/core/lib/common/theme';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { PickOptions, QuickInputButtonHandle, QuickPickItem, WidgetOpenerOptions } from '@theia/core/lib/browser';\n\nexport interface PreferenceData {\n    [scope: number]: any;\n}\n\nexport interface Plugin {\n    pluginPath: string | undefined;\n    pluginFolder: string;\n    pluginUri: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n}\n\nexport interface ConfigStorage {\n    hostLogPath: string;\n    hostStoragePath?: string;\n    hostGlobalStoragePath: string;\n}\n\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n    language: string;\n    shell: string;\n    uiKind: UIKind,\n    appName: string;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    isActive(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n    onDidChange: theia.Event<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty',\n        packageUri: 'empty',\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    pluginUri: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    }\n};\n\nexport interface PluginManagerInitializeParams {\n    preferences: PreferenceData\n    globalState: KeysToKeysToAnyValue\n    workspaceState: KeysToKeysToAnyValue\n    env: EnvInit\n    extApi?: ExtPluginApi[]\n    webview: WebviewInitData\n    jsonValidation: PluginJsonValidationContribution[]\n}\n\nexport interface PluginManagerStartParams {\n    plugins: PluginMetadata[]\n    configStorage: ConfigStorage\n    activationEvents: string[]\n}\n\nexport interface PluginManagerExt {\n\n    /** initialize the manager, should be called only once */\n    $init(params: PluginManagerInitializeParams): Promise<void>;\n\n    /** load and activate plugins */\n    $start(params: PluginManagerStartParams): Promise<void>;\n\n    /** deactivate the plugin */\n    $stop(pluginId: string): Promise<void>;\n\n    /** deactivate all plugins */\n    $stop(): Promise<void>;\n\n    $updateStoragePath(path: string | undefined): Promise<void>;\n\n    $activateByEvent(event: string): Promise<void>;\n\n    $activatePlugin(id: string): Promise<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.CommandDescription): void;\n    $unregisterCommand(id: string): void;\n\n    $registerHandler(id: string): void;\n    $unregisterHandler(id: string): void;\n\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T | undefined>;\n    registerArgumentProcessor(processor: ArgumentProcessor): void;\n}\n\nexport interface TerminalServiceExt {\n    $terminalCreated(id: string, name: string): void;\n    $terminalNameChanged(id: string, name: string): void;\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void;\n    $terminalClosed(id: string): void;\n    $terminalOnInput(id: string, data: string): void;\n    $terminalSizeChanged(id: string, cols: number, rows: number): void;\n    $currentTerminalChanged(id: string | undefined): void;\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void;\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection;\n}\nexport interface OutputChannelRegistryExt {\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel\n}\n\nexport interface ConnectionMain {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface ConnectionExt {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(id: string, options: theia.TerminalOptions, isPseudoTerminal?: boolean): Promise<string>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal widget id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: string, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal widget id.\n     * @param data - data.\n     */\n    $write(id: string, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal widget id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resize(id: string, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal widget id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: string, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal widget id.\n     */\n    $hide(id: string): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal widget id.\n     */\n    $dispose(id: string): void;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendTextByTerminalId(id: number, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal id.\n     * @param data - data.\n     */\n    $writeByTerminalId(id: number, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resizeByTerminalId(id: number, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $showByTerminalId(id: number, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hideByTerminalId(id: number): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal id.\n     * @param waitOnExit - Whether to wait for a key press before closing the terminal.\n     */\n    $disposeByTerminalId(id: number, waitOnExit?: boolean | string): void;\n\n    $setEnvironmentVariableCollection(extensionIdentifier: string, persistent: boolean, collection: SerializableEnvironmentVariableCollection | undefined): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport enum MainMessageType {\n    Error,\n    Warning,\n    Info\n}\n\nexport interface MainMessageOptions {\n    detail?: string;\n    modal?: boolean\n    onCloseActionHandle?: number\n}\n\nexport interface MainMessageItem {\n    title: string,\n    isCloseAffordance?: boolean;\n    handle?: number\n}\n\nexport interface MessageRegistryMain {\n    $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): PromiseLike<number | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined,\n        args: any[] | undefined): PromiseLike<void>;\n    $dispose(id: string): void;\n}\n\nexport type Item = string | theia.QuickPickItem;\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): Promise<string | null | undefined> | undefined;\n\n    $acceptOnDidAccept(sessionId: number): Promise<void>;\n    $acceptDidChangeValue(sessionId: number, changedValue: string): Promise<void>;\n    $acceptOnDidHide(sessionId: number): Promise<void>;\n    $acceptOnDidTriggerButton(sessionId: number, btn: QuickInputButtonHandle): Promise<void>;\n    $onDidChangeActive(sessionId: number, handles: number[]): void;\n    $onDidChangeSelection(sessionId: number, handles: number[]): void;\n\n    /* eslint-disable max-len */\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options: theia.QuickPickOptions & { canPickMany: true; },\n        token?: theia.CancellationToken): Promise<Array<QuickPickItem> | undefined>;\n    showQuickPick(itemsOrItemsPromise: string[] | Promise<string[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<string | undefined>;\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<theia.QuickPickItem | undefined>;\n    showQuickPick(itemsOrItemsPromise: Item[] | Promise<Item[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<Item | Item[] | undefined>;\n\n    showInput(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined>;\n    // showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions, token?: theia.CancellationToken): Promise<theia.WorkspaceFolder | undefined>\n    createQuickPick<T extends theia.QuickPickItem>(plugin: Plugin): theia.QuickPick<T>;\n    createInputBox(plugin: Plugin): theia.InputBox;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on open dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on save dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file upload dialog.\n */\nexport interface UploadDialogOptionsMain {\n    /**\n     * The resource, where files should be uploaded.\n     */\n    defaultUri?: string;\n}\n\nexport interface FileUploadResultMain {\n    uploaded: string[]\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport interface TransferQuickPickItems extends theia.QuickPickItem {\n    handle: number;\n}\n\nexport interface TransferQuickInputButton extends theia.QuickInputButton {\n    handle?: number;\n}\n\nexport type TransferQuickInput = TransferQuickPick | TransferInputBox;\n\nexport interface BaseTransferQuickInput {\n    [key: string]: any;\n    id: number;\n    type?: 'quickPick' | 'inputBox';\n    enabled?: boolean;\n    busy?: boolean;\n    visible?: boolean;\n}\n\nexport interface TransferQuickPick extends BaseTransferQuickInput {\n    type?: 'quickPick';\n    value?: string;\n    placeholder?: string;\n    buttons?: TransferQuickInputButton[];\n    items?: TransferQuickPickItems[];\n    activeItems?: ReadonlyArray<theia.QuickPickItem>;\n    selectedItems?: ReadonlyArray<theia.QuickPickItem>;\n    canSelectMany?: boolean;\n    ignoreFocusOut?: boolean;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    sortByLabel?: boolean;\n}\n\nexport interface TransferInputBox extends BaseTransferQuickInput {\n    type?: 'inputBox';\n    value?: string;\n    placeholder?: string;\n    password?: boolean;\n    buttons?: TransferQuickInputButton[];\n    prompt?: string;\n    validationMessage?: string;\n}\n\nexport interface IInputBoxOptions {\n    value?: string;\n    valueSelection?: [number, number];\n    prompt?: string;\n    placeHolder?: string;\n    password?: boolean;\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickOpenMain {\n    $show(instance: number, options: PickOptions<TransferQuickPickItems>, token: CancellationToken): Promise<number | number[] | undefined>;\n    $setItems(instance: number, items: TransferQuickPickItems[]): Promise<any>;\n    $setError(instance: number, error: Error): Promise<void>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean, token: CancellationToken): Promise<string | undefined>;\n    $createOrUpdate<T extends theia.QuickPickItem>(params: TransferQuickInput): Promise<void>;\n    $dispose(id: number): Promise<void>;\n\n    $hide(): void;\n    $showInputBox(options: TransferInputBox, validateInput: boolean): Promise<string | undefined>;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, includeFolder: string | undefined, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $findTextInFiles(query: theia.TextSearchQuery, options: theia.FindTextInFilesOptions, searchRequestId: number,\n        token?: theia.CancellationToken): Promise<theia.TextSearchComplete>\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n    $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void>;\n    $getWorkspace(): Promise<files.FileStat | undefined>;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void;\n    $onWorkspaceLocationChanged(event: files.FileStat | undefined): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined>;\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void;\n}\n\nexport interface TimelineExt {\n    $getTimeline(source: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined>;\n}\n\nexport interface TimelineMain {\n    $registerTimelineProvider(provider: TimelineProviderDescriptor): Promise<void>;\n    $fireTimelineChanged(e: TimelineChangeEvent): Promise<void>;\n    $unregisterTimelineProvider(source: string): Promise<void>;\n}\n\nexport interface ThemingExt {\n    $onColorThemeChange(type: ThemeType): void;\n}\nexport interface ThemingMain extends Disposable {\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n    $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined>;\n}\n\nexport interface TreeViewRevealOptions {\n    select: boolean\n    focus: boolean\n    expand: boolean | number\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $unregisterTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): Promise<void>;\n    $reveal(treeViewId: string, elementParentChain: string[], options: TreeViewRevealOptions): Promise<any>;\n    $setMessage(treeViewId: string, message: string): void;\n    $setTitle(treeViewId: string, title: string): void;\n    $setDescription(treeViewId: string, description: string): void;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void>;\n    $setVisible(treeViewId: string, visible: boolean): Promise<void>;\n}\n\nexport interface TreeViewItem {\n\n    id: string;\n\n    label: string;\n\n    description?: string | boolean;\n\n    /* font-awesome icon for compatibility */\n    icon?: string;\n    iconUrl?: IconUrl;\n\n    themeIconId?: string;\n\n    resourceUri?: UriComponents;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n    contextValue?: string;\n\n    command?: Command;\n\n}\n\nexport interface TreeViewSelection {\n    treeViewId: string\n    treeItemId: string\n}\nexport namespace TreeViewSelection {\n    export function is(arg: Object | any): arg is TreeViewSelection {\n        return !!arg && typeof arg === 'object' && 'treeViewId' in arg && 'treeItemId' in arg;\n    }\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowMain {\n    $openUri(uri: UriComponents): Promise<boolean>;\n    $asExternalUri(uri: UriComponents): Promise<UriComponents>;\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport interface NotificationExt {\n    withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): PromiseLike<R>;\n}\n\nexport interface ScmCommandArg {\n    sourceControlHandle: number\n    resourceGroupHandle?: number\n    resourceStateHandle?: number\n}\nexport namespace ScmCommandArg {\n    export function is(arg: Object | undefined): arg is ScmCommandArg {\n        return !!arg && typeof arg === 'object' && 'sourceControlHandle' in arg;\n    }\n}\n\nexport interface ScmExt {\n    createSourceControl(plugin: Plugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl;\n    getLastInputBox(plugin: Plugin): theia.SourceControlInputBox | undefined;\n    $onInputBoxValueChange(sourceControlHandle: number, message: string): Promise<void>;\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void>;\n    $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined>;\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void>;\n    $provideOriginalResource(sourceControlHandle: number, uri: string, token: theia.CancellationToken): Promise<UriComponents | undefined>;\n}\n\nexport namespace TimelineCommandArg {\n    export function is(arg: Object | undefined): arg is TimelineCommandArg {\n        return !!arg && typeof arg === 'object' && 'timelineHandle' in arg;\n    }\n}\nexport interface TimelineCommandArg {\n    timelineHandle: string;\n    source: string;\n    uri: string;\n}\n\nexport interface DecorationRequest {\n    readonly id: number;\n    readonly uri: UriComponents;\n}\n\nexport type DecorationData = [boolean, string, string, ThemeColor];\nexport interface DecorationReply { [id: number]: DecorationData; }\n\nexport namespace CommentsCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'text' in arg && !('commentUniqueId' in arg);\n    }\n}\nexport interface CommentsCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    text: string\n}\n\nexport namespace CommentsContextCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsContextCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && !('text' in arg);\n    }\n}\nexport interface CommentsContextCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n}\n\nexport namespace CommentsEditCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsEditCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && 'text' in arg;\n    }\n}\nexport interface CommentsEditCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n    text: string\n}\n\nexport interface DecorationsExt {\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable\n    $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply>;\n}\n\nexport interface DecorationsMain {\n    $registerDecorationProvider(handle: number): Promise<void>;\n    $unregisterDecorationProvider(handle: number): void;\n    $onDidChange(handle: number, resources: UriComponents[] | null): void;\n}\n\nexport interface ScmMain {\n    $registerSourceControl(sourceControlHandle: number, id: string, label: string, rootUri?: UriComponents): Promise<void>;\n    $updateSourceControl(sourceControlHandle: number, features: SourceControlProviderFeatures): Promise<void>;\n    $unregisterSourceControl(sourceControlHandle: number): Promise<void>;\n\n    $registerGroups(sourceControlHandle: number, groups: ScmRawResourceGroup[], splices: ScmRawResourceSplices[]): void;\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): void;\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): void;\n    $unregisterGroup(sourceControlHandle: number, groupHandle: number): void;\n\n    $spliceResourceStates(sourceControlHandle: number, splices: ScmRawResourceSplices[]): void;\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): void;\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): void;\n}\n\nexport interface SourceControlProviderFeatures {\n    hasQuickDiffProvider?: boolean;\n    count?: number;\n    commitTemplate?: string;\n    acceptInputCommand?: Command;\n    statusBarCommands?: Command[];\n}\n\nexport interface SourceControlGroupFeatures {\n    hideWhenEmpty: boolean | undefined;\n}\n\nexport interface ScmRawResource {\n    handle: number,\n    sourceUri: UriComponents,\n    icons: UriComponents[],\n    tooltip: string,\n    strikeThrough: boolean,\n    faded: boolean,\n    contextValue: string,\n    command: Command | undefined\n}\n\nexport interface ScmRawResourceGroup {\n    handle: number,\n    id: string,\n    label: string,\n    features: SourceControlGroupFeatures\n}\n\nexport interface ScmRawResourceSplice {\n    start: number,\n    deleteCount: number,\n    rawResources: ScmRawResource[]\n}\n\nexport interface ScmRawResourceSplices {\n    handle: number,\n    splices: ScmRawResourceSplice[]\n}\n\nexport interface SourceControlResourceState {\n    readonly handle: number\n    /**\n     * The uri of the underlying resource inside the workspace.\n     */\n    readonly resourceUri: string;\n\n    /**\n     * The command which should be run when the resource\n     * state is open in the Source Control viewlet.\n     */\n    readonly command?: Command;\n\n    /**\n     * The decorations for this source control\n     * resource state.\n     */\n    readonly decorations?: SourceControlResourceDecorations;\n\n    readonly letter?: string;\n\n    readonly colorId?: string\n}\n\n/**\n * The decorations for a [source control resource state](#SourceControlResourceState).\n * Can be independently specified for light and dark themes.\n */\nexport interface SourceControlResourceDecorations {\n\n    /**\n     * Whether the source control resource state should be striked-through in the UI.\n     */\n    readonly strikeThrough?: boolean;\n\n    /**\n     * Whether the source control resource state should be faded in the UI.\n     */\n    readonly faded?: boolean;\n\n    /**\n     * The title for a specific source control resource state.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * The icon path for a specific source control resource state.\n     */\n    readonly iconPath?: string;\n}\n\nexport interface NotificationMain {\n    $startProgress(options: NotificationMain.StartProgressOptions): Promise<string>;\n    $stopProgress(id: string): void;\n    $updateProgress(id: string, report: NotificationMain.ProgressReport): void;\n}\nexport namespace NotificationMain {\n    export interface StartProgressOptions {\n        title: string;\n        location?: string;\n        cancellable?: boolean;\n    }\n    export interface ProgressReport {\n        message?: string;\n        increment?: number;\n        total?: number;\n    }\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2,\n    FOUR = 3,\n    FIVE = 4,\n    SIX = 5,\n    SEVEN = 6,\n    EIGHT = 7,\n    NINE = 8\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range?: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: string;\n    letterSpacing?: string;\n\n    gutterIconPath?: UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    // $tryShowTextDocument(resource: UriComponents, options: TextDocumentShowOptions): Promise<string>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    // $tryShowEditor(id: string, position: EditorPosition): Promise<void>;\n    // $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    $saveAll(includeUntitled?: boolean): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    /**\n     * undefined means no changes\n     * null means no active\n     * string means id of active\n     */\n    newActiveEditor?: string | null;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]>;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $tryOpenDocument(uri: UriComponents): Promise<boolean>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n    $tryCloseDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n    $getClientOperatingSystem(): Promise<theia.OperatingSystem>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource?: string\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource?: string\n    ): PromiseLike<void>;\n}\n\nexport interface PreferenceChangeExt {\n    preferenceName: string,\n    newValue: any\n}\n\nexport interface TerminalOptionsExt {\n    attributes?: {\n        [key: string]: string;\n    }\n}\n\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChangeExt[]): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface EnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    action: EnterAction;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n    isPreferred?: boolean;\n    disabled?: string;\n}\n\nexport interface WorkspaceEditMetadataDto {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEditDto {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadataDto;\n}\n\nexport interface WorkspaceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadataDto;\n\n}\nexport namespace WorkspaceTextEditDto {\n    export function is(arg: WorkspaceTextEditDto | WorkspaceFileEditDto): arg is WorkspaceTextEditDto {\n        return !!arg\n            && 'resource' in arg\n            && 'edit' in arg\n            && arg.edit !== null\n            && typeof arg.edit === 'object';\n    }\n}\n\nexport interface WorkspaceEditDto {\n    edits: Array<WorkspaceTextEditDto | WorkspaceFileEditDto>;\n}\n\nexport interface CommandProperties {\n    command: string;\n    args?: string[];\n    options?: {\n        cwd?: string;\n        [key: string]: any\n    };\n}\n\nexport interface TaskDto {\n    type: string;\n    taskType?: 'shell' | 'process' | 'customExecution'; // the task execution type\n    executionId?: string,\n    label: string;\n    source?: string;\n    scope: string | number;\n    // Provide a more specific type when necessary (see ProblemMatcherContribution)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    problemMatcher?: any;\n    group?: string;\n    detail?: string;\n    presentation?: TaskPresentationOptionsDTO;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\nexport interface TaskPresentationOptionsDTO {\n    reveal?: number;\n    focus?: boolean;\n    echo?: boolean;\n    panel?: number;\n    showReuseMessage?: boolean;\n}\n\nexport interface TaskExecutionDto {\n    id: number;\n    task: TaskDto;\n}\n\nexport interface ProcessTaskDto extends TaskDto, CommandProperties {\n    windows?: CommandProperties;\n}\n\nexport interface PluginInfo {\n    id: string;\n    name: string;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: CancellationToken): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: CancellationToken): Promise<Completion | undefined>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: CancellationToken): Promise<Location[] | undefined>;\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: CancellationToken\n    ): Promise<SignatureHelp | undefined>;\n    $releaseSignatureHelp(handle: number, id: number): void;\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Hover | undefined>;\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions,\n        token: CancellationToken\n    ): Promise<TextEdit[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: CancellationToken): Promise<DocumentLink | undefined>;\n    $releaseDocumentLinks(handle: number, ids: number[]): void;\n    $provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: CancellationToken): Promise<CodeLensSymbol | undefined>;\n    $releaseCodeLenses(handle: number, ids: number[]): void;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: CancellationToken\n    ): Promise<CodeAction[] | undefined>;\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentSymbol[] | undefined>;\n    $provideWorkspaceSymbols(handle: number, query: string, token: CancellationToken): PromiseLike<SymbolInformation[]>;\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: CancellationToken): PromiseLike<SymbolInformation | undefined>;\n    $provideFoldingRange(\n        handle: number,\n        resource: UriComponents,\n        context: FoldingContext,\n        token: CancellationToken\n    ): PromiseLike<FoldingRange[] | undefined>;\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: CancellationToken): PromiseLike<SelectionRange[][]>;\n    $provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): PromiseLike<RawColorInfo[]>;\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: CancellationToken): PromiseLike<ColorPresentation[]>;\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: CancellationToken): PromiseLike<WorkspaceEditDto | undefined>;\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): PromiseLike<RenameLocation | undefined>;\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void;\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $provideRootDefinition(handle: number, resource: UriComponents, location: Position, token: CancellationToken): Promise<CallHierarchyDefinition | CallHierarchyDefinition[] | undefined>;\n    $provideCallers(handle: number, definition: CallHierarchyDefinition, token: CancellationToken): Promise<CallHierarchyReference[] | undefined>;\n    $provideCallees(handle: number, definition: CallHierarchyDefinition, token: CancellationToken): Promise<CallHierarchyReference[] | undefined>;\n}\n\nexport const LanguagesMainFactory = Symbol('LanguagesMainFactory');\nexport interface LanguagesMainFactory {\n    (proxy: RPCProtocol): LanguagesMain;\n}\n\nexport const OutputChannelRegistryFactory = Symbol('OutputChannelRegistryFactory');\nexport interface OutputChannelRegistryFactory {\n    (): OutputChannelRegistryMain;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo,\n        selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void;\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], codeActionKinds?: string[]): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void;\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSelectionRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveInitialValues: boolean): void;\n    $registerDocumentSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[],\n        legend: theia.SemanticTokensLegend, eventHandle: number | undefined): void;\n    $emitDocumentSemanticTokensEvent(eventHandle: number): void;\n    $registerDocumentRangeSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], legend: theia.SemanticTokensLegend): void;\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n}\n\nexport interface WebviewInitData {\n    webviewResourceRoot: string\n    webviewCspSource: string\n}\n\nexport interface WebviewPanelViewState {\n    readonly active: boolean;\n    readonly visible: boolean;\n    readonly position: number;\n}\n\nexport interface WebviewsExt {\n    $onMessage(handle: string, message: any): void;\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void;\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void>;\n    $deserializeWebviewPanel(newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void>;\n}\n\nexport interface WebviewsMain {\n    $createWebviewPanel(handle: string,\n        viewType: string,\n        title: string,\n        showOptions: theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions): void;\n    $disposeWebview(handle: string): void;\n    $reveal(handle: string, showOptions: theia.WebviewPanelShowOptions): void;\n    $setTitle(handle: string, value: string): void;\n    $setIconPath(handle: string, value: IconUrl | undefined): void;\n    $setHtml(handle: string, value: string): void;\n    $setOptions(handle: string, options: theia.WebviewOptions): void;\n    $postMessage(handle: string, value: any): Thenable<boolean>;\n\n    $registerSerializer(viewType: string): void;\n    $unregisterSerializer(viewType: string): void;\n}\n\nexport interface CustomEditorsExt {\n    $resolveWebviewEditor(\n        resource: UriComponents,\n        newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: WidgetOpenerOptions | undefined,\n        options: theia.WebviewPanelOptions,\n        cancellation: CancellationToken): Promise<void>;\n    $createCustomDocument(resource: UriComponents, viewType: string, backupId: string | undefined, cancellation: CancellationToken): Promise<{ editable: boolean }>;\n    $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void>;\n    $undo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $redo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $revert(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void;\n    $onSave(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $onSaveAs(resource: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void>;\n    // $backup(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<string>;\n    $onMoveCustomEditor(handle: string, newResource: UriComponents, viewType: string): Promise<void>;\n}\n\nexport interface CustomTextEditorCapabilities {\n    readonly supportsMove?: boolean;\n}\n\nexport interface CustomEditorsMain {\n    $registerTextEditorProvider(viewType: string, options: theia.WebviewPanelOptions, capabilities: CustomTextEditorCapabilities): void;\n    $registerCustomEditorProvider(viewType: string, options: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument: boolean): void;\n    $unregisterEditorProvider(viewType: string): void;\n    $createCustomEditorPanel(handle: string, title: string, widgetOpenerOptions: WidgetOpenerOptions | undefined, options: theia.WebviewPanelOptions & theia.WebviewOptions): Promise<void>;\n    $onDidEdit(resource: UriComponents, viewType: string, editId: number, label: string | undefined): void;\n    $onContentChange(resource: UriComponents, viewType: string): void;\n}\n\nexport interface StorageMain {\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean>;\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues>;\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue>;\n}\n\nexport interface StorageExt {\n    $updatePluginsWorkspaceData(data: KeysToKeysToAnyValue): void;\n}\n\n/**\n * A DebugConfigurationProviderTriggerKind specifies when the `provideDebugConfigurations` method of a `DebugConfigurationProvider` should be called.\n * Currently there are two situations:\n *  (1) providing debug configurations to populate a newly created `launch.json`\n *  (2) providing dynamically generated configurations when the user asks for them through the UI (e.g. via the \"Select and Start Debugging\" command).\n * A trigger kind is used when registering a `DebugConfigurationProvider` with {@link debug.registerDebugConfigurationProvider}.\n */\nexport enum DebugConfigurationProviderTriggerKind {\n    /**\n     * `DebugConfigurationProvider.provideDebugConfigurations` is called to provide the initial debug\n     * configurations for a newly created launch.json.\n     */\n    Initial = 1,\n    /**\n     * `DebugConfigurationProvider.provideDebugConfigurations` is called to provide dynamically generated debug configurations when the user asks for them through the UI\n     * (e.g. via the \"Select and Start Debugging\" command).\n     */\n    Dynamic = 2\n}\n\nexport interface DebugExt {\n    $onSessionCustomEvent(sessionId: string, event: string, body?: any): void;\n    $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): void;\n    $sessionDidCreate(sessionId: string): void;\n    $sessionDidDestroy(sessionId: string): void;\n    $sessionDidChange(sessionId: string | undefined): void;\n    $provideDebugConfigurations(debugType: string, workspaceFolder: string | undefined, dynamic?: boolean): Promise<theia.DebugConfiguration[]>;\n    $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration | undefined>;\n    $resolveDebugConfigurationWithSubstitutedVariables(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined):\n        Promise<theia.DebugConfiguration | undefined>;\n    $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string>;\n    $terminateDebugSession(sessionId: string): Promise<void>;\n    $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined>;\n}\n\nexport interface DebugMain {\n    $appendToDebugConsole(value: string): Promise<void>;\n    $appendLineToDebugConsole(value: string): Promise<void>;\n    $registerDebuggerContribution(description: DebuggerDescription): Promise<void>;\n    $unregisterDebuggerConfiguration(debugType: string): Promise<void>;\n    $addBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $removeBreakpoints(breakpoints: string[]): Promise<void>;\n    $startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): Promise<boolean>;\n    $stopDebugging(sessionId?: string): Promise<void>;\n    $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response>;\n}\n\nexport interface FileSystemExt {\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat>;\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void>;\n    $rename(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(handle: number, resource: UriComponents): Promise<void>;\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void;\n    $unwatch(handle: number, session: number): void;\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number>;\n    $close(handle: number, fd: number): Promise<void>;\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer>;\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number>;\n}\n\nexport interface IFileChangeDto {\n    resource: UriComponents;\n    type: files.FileChangeType;\n}\n\nexport interface FileSystemMain {\n    $registerFileSystemProvider(handle: number, scheme: string, capabilities: files.FileSystemProviderCapabilities): void;\n    $unregisterProvider(handle: number): void;\n    $onFileSystemChange(handle: number, resource: IFileChangeDto[]): void;\n\n    $stat(uri: UriComponents): Promise<files.Stat>;\n    $readdir(resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(resource: UriComponents, content: BinaryBuffer): Promise<void>;\n    $rename(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(resource: UriComponents): Promise<void>;\n    $delete(resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n}\n\nexport interface FileSystemEvents {\n    created: UriComponents[];\n    changed: UriComponents[];\n    deleted: UriComponents[];\n}\n\nexport interface ExtHostFileSystemEventServiceShape {\n    $onFileEvent(events: FileSystemEvents): void;\n    $onWillRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any>;\n    $onDidRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined): void;\n}\n\nexport interface ClipboardMain {\n    $readText(): Promise<string>;\n    $writeText(value: string): Promise<void>;\n}\n\nexport interface CommentsExt {\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void;\n    $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void>;\n    $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void>;\n    $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: CancellationToken): Promise<Range[] | undefined>;\n}\n\nexport interface CommentProviderFeatures {\n    options?: CommentOptions;\n}\n\nexport type CommentThreadChanges = Partial<{\n    range: Range,\n    label: string,\n    contextValue: string,\n    comments: Comment[],\n    collapseState: CommentThreadCollapsibleState;\n}>;\n\nexport interface CommentsMain {\n    $registerCommentController(handle: number, id: string, label: string): void;\n    $unregisterCommentController(handle: number): void;\n    $updateCommentControllerFeatures(handle: number, features: CommentProviderFeatures): void;\n    $createCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, range: Range, extensionId: string): CommentThread | undefined;\n    $updateCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, changes: CommentThreadChanges): void;\n    $deleteCommentThread(handle: number, commentThreadHandle: number): void;\n    $onDidCommentThreadsChange(handle: number, event: CommentThreadChangedEvent): void;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    AUTHENTICATION_MAIN: <ProxyIdentifier<AuthenticationMain>>createProxyIdentifier<AuthenticationMain>('AuthenticationMain'),\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n    CONNECTION_MAIN: createProxyIdentifier<ConnectionMain>('ConnectionMain'),\n    WEBVIEWS_MAIN: createProxyIdentifier<WebviewsMain>('WebviewsMain'),\n    CUSTOM_EDITORS_MAIN: createProxyIdentifier<CustomEditorsMain>('CustomEditorsMain'),\n    STORAGE_MAIN: createProxyIdentifier<StorageMain>('StorageMain'),\n    TASKS_MAIN: createProxyIdentifier<TasksMain>('TasksMain'),\n    DEBUG_MAIN: createProxyIdentifier<DebugMain>('DebugMain'),\n    FILE_SYSTEM_MAIN: createProxyIdentifier<FileSystemMain>('FileSystemMain'),\n    SCM_MAIN: createProxyIdentifier<ScmMain>('ScmMain'),\n    SECRETS_MAIN: createProxyIdentifier<SecretsMain>('SecretsMain'),\n    DECORATIONS_MAIN: createProxyIdentifier<DecorationsMain>('DecorationsMain'),\n    WINDOW_MAIN: createProxyIdentifier<WindowMain>('WindowMain'),\n    CLIPBOARD_MAIN: <ProxyIdentifier<ClipboardMain>>createProxyIdentifier<ClipboardMain>('ClipboardMain'),\n    LABEL_SERVICE_MAIN: <ProxyIdentifier<LabelServiceMain>>createProxyIdentifier<LabelServiceMain>('LabelServiceMain'),\n    TIMELINE_MAIN: <ProxyIdentifier<TimelineMain>>createProxyIdentifier<TimelineMain>('TimelineMain'),\n    THEMING_MAIN: <ProxyIdentifier<ThemingMain>>createProxyIdentifier<ThemingMain>('ThemingMain'),\n    COMMENTS_MAIN: <ProxyIdentifier<CommentsMain>>createProxyIdentifier<CommentsMain>('CommentsMain')\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    AUTHENTICATION_EXT: createProxyIdentifier<AuthenticationExt>('AuthenticationExt'),\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    OUTPUT_CHANNEL_REGISTRY_EXT: createProxyIdentifier<OutputChannelRegistryExt>('OutputChannelRegistryExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n    CONNECTION_EXT: createProxyIdentifier<ConnectionExt>('ConnectionExt'),\n    WEBVIEWS_EXT: createProxyIdentifier<WebviewsExt>('WebviewsExt'),\n    CUSTOM_EDITORS_EXT: createProxyIdentifier<CustomEditorsExt>('CustomEditorsExt'),\n    STORAGE_EXT: createProxyIdentifier<StorageExt>('StorageExt'),\n    TASKS_EXT: createProxyIdentifier<TasksExt>('TasksExt'),\n    DEBUG_EXT: createProxyIdentifier<DebugExt>('DebugExt'),\n    FILE_SYSTEM_EXT: createProxyIdentifier<FileSystemExt>('FileSystemExt'),\n    ExtHostFileSystemEventService: createProxyIdentifier<ExtHostFileSystemEventServiceShape>('ExtHostFileSystemEventService'),\n    SCM_EXT: createProxyIdentifier<ScmExt>('ScmExt'),\n    SECRETS_EXT: createProxyIdentifier<SecretsExt>('SecretsExt'),\n    DECORATIONS_EXT: createProxyIdentifier<DecorationsExt>('DecorationsExt'),\n    LABEL_SERVICE_EXT: createProxyIdentifier<LabelServiceExt>('LabelServiceExt'),\n    TIMELINE_EXT: createProxyIdentifier<TimelineExt>('TimeLineExt'),\n    THEMING_EXT: createProxyIdentifier<ThemingExt>('ThemingExt'),\n    COMMENTS_EXT: createProxyIdentifier<CommentsExt>('CommentsExt')\n};\n\nexport interface TasksExt {\n    $initLoadedTasks(executions: TaskExecutionDto[]): Promise<void>;\n    $provideTasks(handle: number): Promise<TaskDto[] | undefined>;\n    $resolveTask(handle: number, task: TaskDto, token?: CancellationToken): Promise<TaskDto | undefined>;\n    $onDidStartTask(execution: TaskExecutionDto, terminalId: number): void;\n    $onDidEndTask(id: number): void;\n    $onDidStartTaskProcess(processId: number | undefined, execution: TaskExecutionDto): void;\n    $onDidEndTaskProcess(exitCode: number | undefined, taskId: number): void;\n}\n\nexport interface TasksMain {\n    $registerTaskProvider(handle: number, type: string): void;\n    $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]>;\n    $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined>;\n    $taskExecutions(): Promise<TaskExecutionDto[]>;\n    $unregister(handle: number): void;\n    $terminateTask(id: number): void;\n    $customExecutionComplete(id: number, exitCode: number | undefined): void;\n}\n\nexport interface AuthenticationExt {\n    $getSessions(id: string): Promise<ReadonlyArray<AuthenticationSession>>;\n    $login(id: string, scopes: string[]): Promise<AuthenticationSession>;\n    $logout(id: string, sessionId: string): Promise<void>;\n    $onDidChangeAuthenticationSessions(id: string, label: string, event: AuthenticationSessionsChangeEvent): Promise<void>;\n    $onDidChangeAuthenticationProviders(added: AuthenticationProviderInformation[], removed: AuthenticationProviderInformation[]): Promise<void>;\n}\n\nexport interface AuthenticationMain {\n    $registerAuthenticationProvider(id: string, label: string, supportsMultipleAccounts: boolean): void;\n    $unregisterAuthenticationProvider(id: string): void;\n    $getProviderIds(): Promise<string[]>;\n    $updateSessions(providerId: string, event: AuthenticationSessionsChangeEvent): void;\n    $getSession(providerId: string, scopes: string[], extensionId: string, extensionName: string,\n        options: { createIfNone?: boolean, clearSessionPreference?: boolean }): Promise<theia.AuthenticationSession | undefined>;\n    $logout(providerId: string, sessionId: string): Promise<void>;\n}\n\nexport interface RawColorInfo {\n    color: [number, number, number, number];\n    range: Range;\n}\n\nexport interface LabelServiceExt {\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): theia.Disposable;\n}\n\nexport interface LabelServiceMain {\n    $registerResourceLabelFormatter(handle: number, formatter: ResourceLabelFormatter): void;\n    $unregisterResourceLabelFormatter(handle: number): void;\n}\n\nexport interface SecretsExt {\n    $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void>;\n}\n\nexport interface SecretsMain {\n    $getPassword(extensionId: string, key: string): Promise<string | undefined>;\n    $setPassword(extensionId: string, key: string, value: string): Promise<void>;\n    $deletePassword(extensionId: string, key: string): Promise<void>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { RPCProtocol } from './rpc-protocol';\nimport { PluginManager, Plugin } from './plugin-api-rpc';\nimport { interfaces } from '@theia/core/shared/inversify';\n\nexport const ExtPluginApiProvider = 'extPluginApi';\n/**\n * Provider for extension API description\n */\nexport interface ExtPluginApiProvider {\n    /**\n     * Provide API description\n     */\n    provideApi(): ExtPluginApi;\n}\n\n/**\n * Plugin API extension description.\n * This interface describes scripts for both plugin runtimes: frontend(WebWorker) and backend(NodeJs)\n */\nexport interface ExtPluginApi {\n\n    /**\n     * Path to the script which should be loaded to provide api, module should export `provideApi` function with\n     * [ExtPluginApiBackendInitializationFn](#ExtPluginApiBackendInitializationFn) signature\n     */\n    backendInitPath?: string;\n\n    /**\n     * Initialization information for frontend part of Plugin API\n     */\n    frontendExtApi?: FrontendExtPluginApi;\n}\n\nexport interface ExtPluginApiFrontendInitializationFn {\n    (rpc: RPCProtocol, plugins: Map<string, Plugin>): void;\n}\n\nexport interface ExtPluginApiBackendInitializationFn {\n    (rpc: RPCProtocol, pluginManager: PluginManager): void;\n}\n\n/**\n * Interface contains information for frontend(WebWorker) Plugin API extension initialization\n */\nexport interface FrontendExtPluginApi {\n    /**\n     * path to js file\n     */\n    initPath: string;\n    /** global variable name */\n    initVariable: string;\n    /**\n     * init function name,\n     * function should have  [ExtPluginApiFrontendInitializationFn](#ExtPluginApiFrontendInitializationFn)\n     */\n    initFunction: string;\n}\n\nexport const MainPluginApiProvider = Symbol('mainPluginApi');\n\n/**\n * Implementation should contains main(Theia) part of new namespace in Plugin API.\n * [initialize](#initialize) will be called once per plugin runtime\n */\nexport interface MainPluginApiProvider {\n    initialize(rpc: RPCProtocol, container: interfaces.Container): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from './rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart, KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from './plugin-api-rpc';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/common/preferences/preference-schema';\nimport { ProblemMatcherContribution, ProblemPatternContribution, TaskDefinition } from '@theia/task/lib/common';\nimport { ColorDefinition } from '@theia/core/lib/common/color';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\n\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    publisher: string;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n    activationEvents?: string[];\n    extensionDependencies?: string[];\n    extensionPack?: string[];\n    icon?: string;\n}\nexport namespace PluginPackage {\n    export function toPluginUrl(pck: PluginPackage | PluginModel, relativePath: string): string {\n        return `hostedPlugin/${getPluginId(pck)}/${encodeURIComponent(relativePath)}`;\n    }\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration?: RecursivePartial<PreferenceSchema> | RecursivePartial<PreferenceSchema>[];\n    configurationDefaults?: RecursivePartial<PreferenceSchemaProperties>;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    customEditors?: PluginPackageCustomEditor[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    viewsWelcome?: PluginPackageViewWelcome[];\n    commands?: PluginPackageCommand | PluginPackageCommand[];\n    menus?: { [location: string]: PluginPackageMenu[] };\n    submenus?: PluginPackageSubmenu[];\n    keybindings?: PluginPackageKeybinding | PluginPackageKeybinding[];\n    debuggers?: PluginPackageDebuggersContribution[];\n    snippets?: PluginPackageSnippetsContribution[];\n    themes?: PluginThemeContribution[];\n    iconThemes?: PluginIconThemeContribution[];\n    colors?: PluginColorContribution[];\n    taskDefinitions?: PluginTaskDefinitionContribution[];\n    problemMatchers?: PluginProblemMatcherContribution[];\n    problemPatterns?: PluginProblemPatternContribution[];\n    jsonValidation?: PluginJsonValidationContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n    localizations?: PluginPackageLocalization[];\n}\n\nexport interface PluginPackageLocalization {\n    languageId: string;\n    languageName?: string;\n    localizedLanguageName?: string;\n    translations: PluginPackageTranslation[];\n    minimalTranslations?: { [key: string]: string };\n}\n\nexport interface PluginPackageTranslation {\n    id: string;\n    path: string;\n}\n\nexport interface PluginPackageCustomEditor {\n    viewType: string;\n    displayName: string;\n    selector?: CustomEditorSelector[];\n    priority?: CustomEditorPriority;\n}\n\nexport interface CustomEditorSelector {\n    readonly filenamePattern?: string;\n}\n\nexport enum CustomEditorPriority {\n    default = 'default',\n    builtin = 'builtin',\n    option = 'option',\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginPackageViewWelcome {\n    view: string;\n    contents: string;\n    when?: string;\n}\n\nexport interface PluginPackageCommand {\n    command: string;\n    title: string;\n    original?: string;\n    category?: string;\n    icon?: string | { light: string; dark: string; };\n    enablement?: string;\n}\n\nexport interface PluginPackageMenu {\n    command?: string;\n    submenu?: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface PluginPackageSubmenu {\n    id: string;\n    label: string;\n}\n\nexport interface PluginPackageKeybinding {\n    key?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\nexport interface PluginPackageSnippetsContribution {\n    language?: string;\n    path?: string;\n}\n\nexport interface PluginColorContribution {\n    id?: string;\n    description?: string;\n    defaults?: { light?: string, dark?: string, highContrast?: string };\n}\n\nexport type PluginUiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface PluginThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PluginIconThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PlatformSpecificAdapterContribution {\n    program?: string;\n    args?: string[];\n    runtime?: string;\n    runtimeArgs?: string[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface PluginPackageDebuggersContribution extends PlatformSpecificAdapterContribution {\n    type: string;\n    label?: string;\n    languages?: string[];\n    enableBreakpointsFor?: { languageIds: string[] };\n    configurationAttributes: { [request: string]: IJSONSchema };\n    configurationSnippets: IJSONSchemaSnippet[];\n    variables?: ScopeMap;\n    adapterExecutableCommand?: string;\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n}\n\nexport interface PluginTaskDefinitionContribution {\n    type: string;\n    required: string[];\n    properties?: {\n        [name: string]: {\n            type: string;\n            description?: string;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            [additionalProperty: string]: any;\n        }\n    }\n}\n\nexport interface PluginProblemMatcherContribution extends ProblemMatcherContribution {\n    name: string;\n}\n\nexport interface PluginProblemPatternContribution extends ProblemPatternContribution {\n    name: string;\n}\n\nexport interface PluginJsonValidationContribution {\n    fileMatch: string | string[];\n    url: string;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n\n    getContribution(plugin: PluginPackage): PluginContribution | undefined;\n\n    /**\n     * A mapping between a dependency as its defined in package.json\n     * and its deployable form, e.g. `publisher.name` -> `vscode:extension/publisher.name`\n     */\n    getDependencies(plugin: PluginPackage): Map<string, string> | undefined;\n}\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext): Promise<void>;\n\n}\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getPlugins(): PluginDeployerEntry[];\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployerStartContext {\n    readonly userEntries: string[]\n    readonly systemEntries: string[]\n}\n\nexport const PluginDeployer = Symbol('PluginDeployer');\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\nexport const PluginDeployerParticipant = Symbol('PluginDeployerParticipant');\n/**\n * A participant can hook into the plugin deployer lifecycle.\n */\nexport interface PluginDeployerParticipant {\n    onWillStart?(context: PluginDeployerStartContext): Promise<void>;\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\n/**\n * Whether a plugin installed by a user or system.\n */\nexport enum PluginType {\n    System,\n    User\n};\n\nexport interface UnresolvedPluginEntry {\n    id: string;\n    type?: PluginType;\n}\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem.\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n\n    type: PluginType\n    /**\n     * A fs path to a directory where a plugin is located.\n     * Depending on a plugin format it can be different from `path`.\n     * Use `path` if you want to resolve something within a plugin, like `README.md` file.\n     * Use `rootPath` if you want to manipulate the entire plugin location, like delete or move it.\n     */\n    rootPath: string\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: PluginEntryPoint;\n    packageUri: string;\n    /**\n     * @deprecated since 1.1.0 - because it lead to problems with getting a relative path\n     * needed by Icon Themes to correctly load Fonts, use packageUri instead.\n     */\n    packagePath: string;\n    iconUrl?: string;\n    readmeUrl?: string;\n    licenseUrl?: string;\n}\n\nexport interface PluginEntryPoint {\n    frontend?: string;\n    backend?: string;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    activationEvents?: string[];\n    configuration?: PreferenceSchema[];\n    configurationDefaults?: PreferenceSchemaProperties;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    customEditors?: CustomEditor[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    viewsWelcome?: ViewWelcome[];\n    commands?: PluginCommand[];\n    menus?: { [location: string]: Menu[] };\n    submenus?: Submenu[];\n    keybindings?: Keybinding[];\n    debuggers?: DebuggerContribution[];\n    snippets?: SnippetContribution[];\n    themes?: ThemeContribution[];\n    iconThemes?: IconThemeContribution[];\n    colors?: ColorDefinition[];\n    taskDefinitions?: TaskDefinition[];\n    problemMatchers?: ProblemMatcherContribution[];\n    problemPatterns?: ProblemPatternContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n    localizations?: Localization[];\n}\n\nexport interface Localization {\n    languageId: string;\n    languageName?: string;\n    localizedLanguageName?: string;\n    translations: Translation[];\n    minimalTranslations?: { [key: string]: string };\n}\n\nexport interface Translation {\n    id: string;\n    path: string;\n    version: string;\n    contents: { [scope: string]: { [key: string]: string } }\n}\n\nexport interface SnippetContribution {\n    uri: string\n    source: string\n    language?: string\n}\n\nexport type UiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface ThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface IconThemeContribution {\n    id: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    grammarLocation?: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface DebuggerContribution extends PlatformSpecificAdapterContribution {\n    type: string,\n    label?: string,\n    languages?: string[],\n    enableBreakpointsFor?: {\n        languageIds: string[]\n    },\n    configurationAttributes?: IJSONSchema[],\n    configurationSnippets?: IJSONSchemaSnippet[],\n    variables?: ScopeMap,\n    adapterExecutableCommand?: string\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\n/**\n * Custom Editors contribution\n */\nexport interface CustomEditor {\n    viewType: string;\n    displayName: string;\n    selector: CustomEditorSelector[];\n    priority: CustomEditorPriority;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    iconUrl: string;\n    themeIcon?: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n    when?: string;\n}\n\n/**\n * View Welcome contribution\n */\nexport interface ViewWelcome {\n    view: string;\n    content: string;\n    when?: string;\n    order: number;\n}\n\nexport interface PluginCommand {\n    command: string;\n    title: string;\n    originalTitle?: string;\n    category?: string;\n    iconUrl?: IconUrl;\n    themeIcon?: string;\n    enablement?: string;\n}\n\nexport type IconUrl = string | { light: string; dark: string; };\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command?: string;\n    submenu?: string\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface Submenu {\n    id: string;\n    label: string;\n}\n\n/**\n * Keybinding contribution\n */\nexport interface Keybinding {\n    keybinding?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(pluginHost: string, message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n\n    onDidDeploy(): void;\n}\n\nexport interface PluginDependencies {\n    metadata: PluginMetadata\n    mapping?: Map<string, string>\n}\n\nexport const PluginDeployerHandler = Symbol('PluginDeployerHandler');\nexport interface PluginDeployerHandler {\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<void>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<void>;\n\n    getDeployedPlugin(pluginId: string): DeployedPlugin | undefined;\n    undeployPlugin(pluginId: string): Promise<boolean>;\n\n    getPluginDependencies(pluginToBeInstalled: PluginDeployerEntry): Promise<PluginDependencies | undefined>;\n}\n\nexport interface GetDeployedPluginsParams {\n    pluginIds: string[]\n}\n\nexport interface DeployedPlugin {\n    /**\n     * defaults to system\n     */\n    type?: PluginType;\n    metadata: PluginMetadata;\n    contributes?: PluginContribution;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n\n    getDeployedPluginIds(): Promise<string[]>;\n\n    getDeployedPlugins(params: GetDeployedPluginsParams): Promise<DeployedPlugin[]>;\n\n    getExtPluginAPI(): Promise<ExtPluginApi[]>;\n\n    onMessage(targetHost: string, message: string): Promise<void>;\n\n}\n\nexport const PLUGIN_HOST_BACKEND = 'main';\n\nexport interface WorkspaceStorageKind {\n    workspace?: string | undefined;\n    roots: string[];\n}\nexport type GlobalStorageKind = undefined;\nexport type PluginStorageKind = GlobalStorageKind | WorkspaceStorageKind;\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin.\n     *\n     * @param type whether a plugin is installed by a system or a user, defaults to a user\n     */\n    deploy(pluginEntry: string, type?: PluginType): Promise<void>;\n\n    undeploy(pluginId: string): Promise<void>;\n\n    setStorageValue(key: string, value: KeysToAnyValues, kind: PluginStorageKind): Promise<boolean>;\n    getStorageValue(key: string, kind: PluginStorageKind): Promise<KeysToAnyValues>;\n    getAllStorageValues(kind: PluginStorageKind): Promise<KeysToKeysToAnyValue>;\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    acceptMessage(pluginHostId: string, jsonMessage: string): boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(pluginHostId: string, jsonMessage: string): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n    clientClosed(): void;\n\n    /**\n     * Provides additional deployed plugins.\n     */\n    getExtraDeployedPlugins(): Promise<DeployedPlugin[]>;\n\n    /**\n     * Provides additional plugin ids.\n     */\n    getExtraDeployedPluginIds(): Promise<string[]>;\n\n}\n\nexport const PluginHostEnvironmentVariable = Symbol('PluginHostEnvironmentVariable');\nexport interface PluginHostEnvironmentVariable {\n    process(env: NodeJS.ProcessEnv): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { URI as VSCodeURI } from '@theia/core/shared/vscode-uri';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { Range, Position } from '../plugin/types-impl';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nexport interface MessageConnection {\n    send(msg: string): void;\n    onMessage: Event<string>;\n}\n\nexport const RPCProtocol = Symbol('RPCProtocol');\nexport interface RPCProtocol extends Disposable {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = (id as any).toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport interface ConnectionClosedError extends Error {\n    code: 'RPC_PROTOCOL_CLOSED'\n}\nexport namespace ConnectionClosedError {\n    const code: ConnectionClosedError['code'] = 'RPC_PROTOCOL_CLOSED';\n    export function create(message: string = 'connection is closed'): ConnectionClosedError {\n        return Object.assign(new Error(message), { code });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(error: any): error is ConnectionClosedError {\n        return !!error && typeof error === 'object' && 'code' in error && error['code'] === code;\n    }\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private readonly locals = new Map<string, any>();\n    private readonly proxies = new Map<string, any>();\n    private lastMessageId = 0;\n    private readonly cancellationTokenSources = new Map<string, CancellationTokenSource>();\n    private readonly pendingRPCReplies = new Map<string, Deferred<any>>();\n    private readonly multiplexer: RPCMultiplexer;\n\n    private replacer: (key: string | undefined, value: any) => any;\n    private reviver: (key: string | undefined, value: any) => any;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as no disposed */ })\n    );\n\n    constructor(connection: MessageConnection, transformations?: {\n        replacer?: (key: string | undefined, value: any) => any,\n        reviver?: (key: string | undefined, value: any) =>  any\n    }) {\n        this.toDispose.push(\n            this.multiplexer = new RPCMultiplexer(connection)\n        );\n        this.multiplexer.onMessage(msg => this.receiveOneMessage(msg));\n        this.toDispose.push(Disposable.create(() => {\n            this.proxies.clear();\n            for (const reply of this.pendingRPCReplies.values()) {\n                reply.reject(ConnectionClosedError.create());\n            }\n            this.pendingRPCReplies.clear();\n        }));\n\n        this.reviver = transformations?.reviver || ObjectsTransferrer.reviver;\n        this.replacer = transformations?.replacer || ObjectsTransferrer.replacer;\n    }\n\n    private get isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        let proxy = this.proxies.get(proxyId.id);\n        if (!proxy) {\n            proxy = this.createProxy(proxyId.id);\n            this.proxies.set(proxyId.id, proxy);\n        }\n        return proxy;\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        this.locals.set(identifier.id, instance);\n        if (Disposable.is(instance)) {\n            this.toDispose.push(instance);\n        }\n        this.toDispose.push(Disposable.create(() => this.locals.delete(identifier.id)));\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(ConnectionClosedError.create());\n        }\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n        if (cancellationToken && cancellationToken.isCancellationRequested) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        if (cancellationToken) {\n            args.push('add.cancellation.token');\n            cancellationToken.onCancellationRequested(() =>\n                this.multiplexer.send(this.cancel(callId))\n            );\n        }\n\n        this.pendingRPCReplies.set(callId, result);\n        this.multiplexer.send(this.request(callId, proxyId, methodName, args));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n        try {\n            const msg = <RPCMessage>JSON.parse(rawmsg, this.reviver);\n\n            switch (msg.type) {\n                case MessageType.Request:\n                    this.receiveRequest(msg);\n                    break;\n                case MessageType.Reply:\n                    this.receiveReply(msg);\n                    break;\n                case MessageType.ReplyErr:\n                    this.receiveReplyErr(msg);\n                    break;\n                case MessageType.Cancel:\n                    this.receiveCancel(msg);\n                    break;\n            }\n        } catch (e) {\n            // exception does not show problematic content: log it!\n            console.log('failed to parse message: ' + rawmsg);\n            throw e;\n        }\n\n    }\n\n    private receiveCancel(msg: CancelMessage): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(msg.id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n        // convert `null` to `undefined`, since we don't use `null` in internal plugin APIs\n        const args = msg.args.map(arg => arg === null ? undefined : arg); // eslint-disable-line no-null/no-null\n\n        const addToken = args.length && args[args.length - 1] === 'add.cancellation.token' ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(callId, tokenSource);\n            args.push(tokenSource.token);\n        }\n        const invocation = this.invokeHandler(proxyId, msg.method, args);\n\n        invocation.then(result => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyOK(callId, result));\n        }, error => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyErr(callId, error));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        const actor = this.locals.get(proxyId);\n        if (!actor) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n\n    private cancel(req: string): string {\n        return `{\"type\":${MessageType.Cancel},\"id\":\"${req}\"}`;\n    }\n\n    private request(req: string, rpcId: string, method: string, args: any[]): string {\n        return `{\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args, this.replacer)}}`;\n    }\n\n    private replyOK(req: string, res: any): string {\n        if (typeof res === 'undefined') {\n            return `{\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${safeStringify(res, this.replacer)}}`;\n    }\n\n    private replyErr(req: string, err: any): string {\n        err = typeof err === 'string' ? new Error(err) : err;\n        if (err instanceof Error) {\n            return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${safeStringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer implements Disposable, MessageConnection {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    private readonly messageEmitter = new Emitter<string>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(connection: MessageConnection) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.toDispose.push(Disposable.create(() => this.messagesToSend = []));\n        this.toDispose.push(this.connection.onMessage((msg: string) => {\n            const messages = JSON.parse(msg);\n            for (const message of messages) {\n                this.messageEmitter.fire(message);\n            }\n        }));\n        this.toDispose.push(this.messageEmitter);\n\n        this.messagesToSend = [];\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get onMessage(): Event<string> {\n        return this.messageEmitter.event;\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(JSON.stringify(tmp));\n    }\n\n    public send(msg: string): void {\n        if (this.toDispose.disposed) {\n            throw ConnectionClosedError.create();\n        }\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\n/**\n * These functions are responsible for correct transferring objects via rpc channel.\n *\n * To reach that some specific kind of objects is converted to json in some custom way\n * and then, after receiving, revived to objects again,\n * so there is feeling that object was transferred via rpc channel.\n *\n * To distinguish between regular and altered objects, field $type is added to altered ones.\n * Also value of that field specifies kind of the object.\n */\nexport namespace ObjectsTransferrer {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function replacer(key: string | undefined, value: any): any {\n        if (value instanceof URI) {\n            return {\n                $type: SerializedObjectType.THEIA_URI,\n                data: value.toString()\n            } as SerializedObject;\n        } else if (value instanceof Range) {\n            const range = value as Range;\n            const serializedValue = {\n                start: {\n                    line: range.start.line,\n                    character: range.start.character\n                },\n                end: {\n                    line: range.end.line,\n                    character: range.end.character\n                }\n            };\n            return {\n                $type: SerializedObjectType.THEIA_RANGE,\n                data: JSON.stringify(serializedValue)\n            } as SerializedObject;\n        } else if (value && value['$mid'] === 1) {\n            // Given value is VSCode URI\n            // We cannot use instanceof here because VSCode URI has toJSON method which is invoked before this replacer.\n            const uri = VSCodeURI.revive(value);\n            return {\n                $type: SerializedObjectType.VSCODE_URI,\n                data: uri.toString()\n            } as SerializedObject;\n        } else if (value instanceof BinaryBuffer) {\n            const bytes = [...value.buffer.values()];\n            return {\n                $type: SerializedObjectType.TEXT_BUFFER,\n                data: JSON.stringify({ bytes })\n            };\n        }\n\n        return value;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function reviver(key: string | undefined, value: any): any {\n        if (isSerializedObject(value)) {\n            switch (value.$type) {\n                case SerializedObjectType.THEIA_URI:\n                    return new URI(value.data);\n                case SerializedObjectType.VSCODE_URI:\n                    return VSCodeURI.parse(value.data);\n                case SerializedObjectType.THEIA_RANGE:\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const obj: any = JSON.parse(value.data);\n                    const start = new Position(obj.start.line, obj.start.character);\n                    const end = new Position(obj.end.line, obj.end.character);\n                    return new Range(start, end);\n                case SerializedObjectType.TEXT_BUFFER:\n                    const data: { bytes: number[] } = JSON.parse(value.data);\n                    return BinaryBuffer.wrap(Uint8Array.from(data.bytes));\n            }\n        }\n\n        return value;\n    }\n\n}\n\ninterface SerializedObject {\n    $type: SerializedObjectType;\n    data: string;\n}\n\nenum SerializedObjectType {\n    THEIA_URI,\n    VSCODE_URI,\n    THEIA_RANGE,\n    TEXT_BUFFER\n}\n\nfunction isSerializedObject(obj: any): obj is SerializedObject {\n    return obj && obj.$type !== undefined && obj.data !== undefined;\n}\n\nexport const enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3,\n    Cancel = 4,\n    Terminate = 5,\n    Terminated = 6\n}\n\nclass CancelMessage {\n    type: MessageType.Cancel;\n    id: string;\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n\ninterface JSONStringifyReplacer {\n    (key: string, value: any): any;\n}\n\nfunction safeStringify(obj: any, replacer?: JSONStringifyReplacer): string {\n    try {\n        return JSON.stringify(obj, replacer);\n    } catch (err) {\n        console.error('error stringifying response: ', err);\n        return 'null';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/shared/semanticTokensDto.ts\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian(): boolean {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\n\nexport interface IFullSemanticTokensDto {\n    id: number;\n    type: 'full';\n    data: Uint32Array;\n}\n\nexport interface IDeltaSemanticTokensDto {\n    id: number;\n    type: 'delta';\n    deltas: { start: number; deleteCount: number; data?: Uint32Array; }[];\n}\n\nexport type ISemanticTokensDto = IFullSemanticTokensDto | IDeltaSemanticTokensDto;\n\nconst enum EncodedSemanticTokensType {\n    Full = 1,\n    Delta = 2\n}\n\nfunction reverseEndianness(arr: Uint8Array): void {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\n\nfunction toLittleEndianBuffer(arr: Uint32Array): BinaryBuffer {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return BinaryBuffer.wrap(uint8Arr);\n}\n\nfunction fromLittleEndianBuffer(buff: BinaryBuffer): Uint32Array {\n    const uint8Arr = buff.buffer;\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    if (uint8Arr.byteOffset % 4 === 0) {\n        return new Uint32Array(uint8Arr.buffer, uint8Arr.byteOffset, uint8Arr.length / 4);\n    } else {\n        // unaligned memory access doesn't work on all platforms\n        const data = new Uint8Array(uint8Arr.byteLength);\n        data.set(uint8Arr);\n        return new Uint32Array(data.buffer, data.byteOffset, data.length / 4);\n    }\n}\n\nexport function encodeSemanticTokensDto(semanticTokens: ISemanticTokensDto): BinaryBuffer {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = EncodedSemanticTokensType.Full;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset); offset += semanticTokens.data.length;\n    } else {\n        dest[offset++] = EncodedSemanticTokensType.Delta;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset); offset += delta.data.length;\n            } else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\n\nfunction encodeSemanticTokensDtoSize(semanticTokens: ISemanticTokensDto): number {\n    let result = 0;\n    result += (\n        + 1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (\n            + 1 // data length\n            + semanticTokens.data.length\n        );\n    } else {\n        result += (\n            + 1 // delta count\n        );\n        result += (\n            + 1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n\nexport function decodeSemanticTokensDto(_buff: BinaryBuffer): ISemanticTokensDto {\n    const src = fromLittleEndianBuffer(_buff);\n    let offset = 0;\n    const id = src[offset++];\n    const type: EncodedSemanticTokensType = src[offset++];\n    if (type === EncodedSemanticTokensType.Full) {\n        const length = src[offset++];\n        const data = src.subarray(offset, offset + length); offset += length;\n        return {\n            id: id,\n            type: 'full',\n            data: data\n        };\n    }\n    const deltaCount = src[offset++];\n    const deltas: { start: number; deleteCount: number; data?: Uint32Array; }[] = [];\n    for (let i = 0; i < deltaCount; i++) {\n        const start = src[offset++];\n        const deleteCount = src[offset++];\n        const length = src[offset++];\n        let data: Uint32Array | undefined;\n        if (length > 0) {\n            data = src.subarray(offset, offset + length); offset += length;\n        }\n        deltas[i] = { start, deleteCount, data };\n    }\n    return {\n        id: id,\n        type: 'delta',\n        deltas: deltas\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null // eslint-disable-line @typescript-eslint/no-explicit-any\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    // @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null; // eslint-disable-line no-null/no-null\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/uint.ts\n\nexport const enum Constants {\n    /**\n     * Max unsigned integer that fits on 8 bits.\n     */\n    MAX_UINT_8 = 255, // 2^8 - 1\n}\n\nexport function toUint8(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_8) {\n        return Constants.MAX_UINT_8;\n    }\n    return v | 0;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\n// some well known URI schemas\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/network.ts#L9-L79\n// TODO move to network.ts file\nexport namespace Schemes {\n\n    /**\n     * A schema that is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const inMemory = 'inmemory';\n\n    /**\n     * A schema that is used for setting files\n     */\n    export const vscode = 'vscode';\n\n    /**\n     * A schema that is used for internal private files\n     */\n    export const internal = 'private';\n\n    /**\n     * A walk-through document.\n     */\n    export const walkThrough = 'walkThrough';\n\n    /**\n     * An embedded code snippet.\n     */\n    export const walkThroughSnippet = 'walkThroughSnippet';\n\n    export const http = 'http';\n\n    export const https = 'https';\n\n    export const file = 'file';\n\n    export const mailto = 'mailto';\n\n    export const untitled = 'untitled';\n\n    export const data = 'data';\n\n    export const command = 'command';\n\n    export const vscodeRemote = 'vscode-remote';\n\n    export const vscodeRemoteResource = 'vscode-remote-resource';\n\n    export const userData = 'vscode-userdata';\n\n    export const vscodeCustomEditor = 'vscode-custom-editor';\n\n    export const vscodeSettings = 'vscode-settings';\n\n    export const webviewPanel = 'webview-panel';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return {\n        scheme: uri.scheme,\n        authority: uri.authority,\n        path: uri.path.toString(),\n        query: uri.query,\n        fragment: uri.fragment\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// eslint-disable-next-line @theia/runtime-import-check\nimport { DebugExtImpl } from '../../../plugin/node/debug/debug';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport function createDebugExtStub(rpc: RPCProtocol): DebugExtImpl {\n    return new Proxy(new DebugExtImpl(rpc), {\n        apply: function (target, that, args): void {\n            console.error('Debug API works only in plugin container');\n        }\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { PluginModel, PluginPackage } from '../../../common/plugin-protocol';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport URI from '@theia/core/lib/common/uri';\n\nconst NLS_REGEX = /^%([\\w\\d.-]+)%$/i;\n\nfunction getUri(pluginModel: PluginModel, relativePath: string): URI {\n    const ownURI = new Endpoint().getRestUrl();\n    return ownURI.parent.resolve(PluginPackage.toPluginUrl(pluginModel, relativePath));\n}\n\nfunction readPluginFile(pluginModel: PluginModel, relativePath: string): Promise<string> {\n    return readContents(getUri(pluginModel, relativePath).toString());\n}\n\nfunction readContents(uri: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n\n        request.onreadystatechange = function (): void {\n            if (this.readyState === XMLHttpRequest.DONE) {\n                if (this.status === 200) {\n                    resolve(this.response);\n                } else if (this.status === 404) {\n                    reject('NotFound');\n                } else {\n                    reject(new Error('Could not fetch plugin resource'));\n                }\n            }\n        };\n\n        request.open('GET', uri, true);\n        request.send();\n    });\n}\n\nasync function readPluginJson(pluginModel: PluginModel, relativePath: string): Promise<any> {\n    const content = await readPluginFile(pluginModel, relativePath);\n    return JSON.parse(content);\n}\n\nexport async function loadManifest(pluginModel: PluginModel): Promise<any> {\n    const [manifest, translations] = await Promise.all([\n        readPluginJson(pluginModel, 'package.json'),\n        loadTranslations(pluginModel)\n    ]);\n    // translate vscode builtins, as they are published with a prefix.\n    const built_prefix = '@theia/vscode-builtin-';\n    if (manifest && manifest.name && manifest.name.startsWith(built_prefix)) {\n        manifest.name = manifest.name.substr(built_prefix.length);\n    }\n    return manifest && translations && Object.keys(translations).length ?\n        localize(manifest, translations) :\n        manifest;\n}\n\nasync function loadTranslations(pluginModel: PluginModel): Promise<any> {\n    try {\n        return await readPluginJson(pluginModel, 'package.nls.json');\n    } catch (e) {\n        if (e !== 'NotFound') {\n            throw e;\n        }\n        return {};\n    }\n}\n\nfunction localize(value: any, translations: {\n    [key: string]: string\n}): any {\n    if (typeof value === 'string') {\n        const match = NLS_REGEX.exec(value);\n        return match && translations[match[1]] || value;\n    }\n    if (Array.isArray(value)) {\n        const result = [];\n        for (const item of value) {\n            result.push(localize(item, translations));\n        }\n        return result;\n    }\n    if (value === null) {\n        return value;\n    }\n    if (typeof value === 'object') {\n        const result: { [key: string]: any } = {};\n        // eslint-disable-next-line guard-for-in\n        for (const propertyName in value) {\n            result[propertyName] = localize(value[propertyName], translations);\n        }\n        return result;\n    }\n    return value;\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/**\n * Worker specific implementation not returning any FileSystem details\n * Extending the common class\n */\nexport class WorkerEnvExtImpl extends EnvExtImpl {\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n    }\n\n    /**\n     * Throw error for app-root as there is no filesystem in worker context\n     */\n    get appRoot(): string {\n        throw new Error('There is no app root in worker context');\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocolImpl } from '../../../common/rpc-protocol';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { MAIN_RPC_CONTEXT, Plugin, emptyPlugin, TerminalServiceExt } from '../../../common/plugin-api-rpc';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { getPluginId, PluginMetadata } from '../../../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\nimport { ExtPluginApi } from '../../../common/plugin-ext-api-contribution';\nimport { createDebugExtStub } from './debug-stub';\nimport { EditorsAndDocumentsExtImpl } from '../../../plugin/editors-and-documents';\nimport { WorkspaceExtImpl } from '../../../plugin/workspace';\nimport { MessageRegistryExt } from '../../../plugin/message-registry';\nimport { WorkerEnvExtImpl } from './worker-env-ext';\nimport { ClipboardExt } from '../../../plugin/clipboard-ext';\nimport { KeyValueStorageProxy } from '../../../plugin/plugin-storage';\nimport { WebviewsExtImpl } from '../../../plugin/webviews';\nimport { loadManifest } from './plugin-manifest-loader';\nimport { TerminalServiceExtImpl } from '../../../plugin/terminal-ext';\nimport { reviver } from '../../../plugin/types-impl';\nimport { SecretsExtImpl } from '../../../plugin/secrets-ext';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst emitter = new Emitter<string>();\nconst rpc = new RPCProtocolImpl({\n    onMessage: emitter.event,\n    send: (m: string) => {\n        ctx.postMessage(m);\n    },\n},\n{\n    reviver: reviver\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\naddEventListener('message', (message: any) => {\n    emitter.fire(message.data);\n});\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    ctx.importScripts('/context/' + contextPath);\n}\nconst envExt = new WorkerEnvExtImpl(rpc);\nconst storageProxy = new KeyValueStorageProxy(rpc);\nconst editorsAndDocuments = new EditorsAndDocumentsExtImpl(rpc);\nconst messageRegistryExt = new MessageRegistryExt(rpc);\nconst workspaceExt = new WorkspaceExtImpl(rpc, editorsAndDocuments, messageRegistryExt);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc, workspaceExt);\nconst debugExt = createDebugExtStub(rpc);\nconst clipboardExt = new ClipboardExt(rpc);\nconst webviewExt = new WebviewsExtImpl(rpc, workspaceExt);\nconst secretsExt = new SecretsExtImpl(rpc);\nconst terminalService: TerminalServiceExt = new TerminalServiceExtImpl(rpc);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any {\n        if (plugin.pluginPath) {\n            if (isElectron()) {\n                ctx.importScripts(plugin.pluginPath);\n            } else {\n                ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n            }\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    async init(rawPluginData: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        // Process the plugins concurrently, making sure to keep the order.\n        const plugins = await Promise.all<{\n            /** Where to push the plugin: `result` or `foreign` */\n            target: Plugin[],\n            plugin: Plugin\n        }>(rawPluginData.map(async plg => {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const rawModel = await loadManifest(pluginModel);\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: pluginModel.packagePath,\n                    pluginUri: pluginModel.packageUri,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    rawModel\n                };\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n                return { target: result, plugin };\n            } else {\n                return {\n                    target: foreign,\n                    plugin: {\n                        pluginPath: pluginModel.entryPoint.backend,\n                        pluginFolder: pluginModel.packagePath,\n                        pluginUri: pluginModel.packageUri,\n                        model: pluginModel,\n                        lifecycle: pluginLifecycle,\n                        get rawModel(): never {\n                            throw new Error('not supported');\n                        }\n                    }\n                };\n            }\n        }));\n        // Collect the ordered plugins and insert them in the target array:\n        for (const { target, plugin } of plugins) {\n            target.push(plugin);\n        }\n        return [result, foreign];\n    },\n    initExtApi(extApi: ExtPluginApi[]): void {\n        for (const api of extApi) {\n            try {\n                if (api.frontendExtApi) {\n                    ctx.importScripts(api.frontendExtApi.initPath);\n                    ctx[api.frontendExtApi.initVariable][api.frontendExtApi.initFunction](rpc, pluginsModulesNames);\n                }\n\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}, envExt, terminalService, storageProxy, secretsExt, preferenceRegistryExt, webviewExt, rpc);\n\nconst apiFactory = createAPIFactory(\n    rpc,\n    pluginManager,\n    envExt,\n    debugExt,\n    preferenceRegistryExt,\n    editorsAndDocuments,\n    workspaceExt,\n    messageRegistryExt,\n    clipboardExt,\n    webviewExt\n);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocuments);\nrpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\nrpc.set(MAIN_RPC_CONTEXT.STORAGE_EXT, storageProxy);\nrpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n\nfunction isElectron(): boolean {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.47.3/src/vs/workbench/api/common/extHostAuthentication.ts\n\nimport { Disposable } from './types-impl';\nimport {\n    AuthenticationExt,\n    AuthenticationMain, Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { AuthenticationSession, AuthenticationSessionsChangeEvent } from '../common/plugin-api-rpc-model';\n\nexport class AuthenticationExtImpl implements AuthenticationExt {\n    private proxy: AuthenticationMain;\n    private authenticationProviders: Map<string, theia.AuthenticationProvider> = new Map<string, theia.AuthenticationProvider>();\n\n    private _providerIds: string[] = [];\n\n    private _providers: theia.AuthenticationProviderInformation[] = [];\n\n    private onDidChangeAuthenticationProvidersEmitter = new Emitter<theia.AuthenticationProvidersChangeEvent>();\n    readonly onDidChangeAuthenticationProviders: Event<theia.AuthenticationProvidersChangeEvent> = this.onDidChangeAuthenticationProvidersEmitter.event;\n\n    private onDidChangeSessionsEmitter = new Emitter<theia.AuthenticationSessionsChangeEvent>();\n    readonly onDidChangeSessions: Event<theia.AuthenticationSessionsChangeEvent> = this.onDidChangeSessionsEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.AUTHENTICATION_MAIN);\n    }\n\n    getProviderIds(): Promise<ReadonlyArray<string>> {\n        return this.proxy.$getProviderIds();\n    }\n\n    get providerIds(): string[] {\n        return this._providerIds;\n    }\n\n    get providers(): ReadonlyArray<theia.AuthenticationProviderInformation> {\n        return Object.freeze(this._providers.slice());\n    }\n\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: string[],\n                     options: theia.AuthenticationGetSessionOptions & { createIfNone: true }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: string[],\n                     options: theia.AuthenticationGetSessionOptions = {}): Promise<theia.AuthenticationSession | undefined> {\n        const extensionName = requestingExtension.model.displayName || requestingExtension.model.name;\n        const extensionId = requestingExtension.model.id.toLowerCase();\n\n        return this.proxy.$getSession(providerId, scopes, extensionId, extensionName, options);\n    }\n\n    async logout(providerId: string, sessionId: string): Promise<void> {\n        return this.proxy.$logout(providerId, sessionId);\n    }\n\n    registerAuthenticationProvider(provider: theia.AuthenticationProvider): theia.Disposable {\n        if (this.authenticationProviders.get(provider.id)) {\n            throw new Error(`An authentication provider with id '${provider.id}' is already registered.`);\n        }\n\n        this.authenticationProviders.set(provider.id, provider);\n        if (this._providerIds.indexOf(provider.id) === -1) {\n            this._providerIds.push(provider.id);\n        }\n\n        if (!this._providers.find(p => p.id === provider.id)) {\n            this._providers.push({\n                id: provider.id,\n                label: provider.label\n            });\n        }\n\n        const listener = provider.onDidChangeSessions(e => {\n            this.proxy.$updateSessions(provider.id, e);\n        });\n\n        this.proxy.$registerAuthenticationProvider(provider.id, provider.label, provider.supportsMultipleAccounts);\n\n        return new Disposable(() => {\n            listener.dispose();\n            this.authenticationProviders.delete(provider.id);\n            const index = this._providerIds.findIndex(id => id === provider.id);\n            if (index > -1) {\n                this._providerIds.splice(index);\n            }\n\n            const i = this._providers.findIndex(p => p.id === provider.id);\n            if (i > -1) {\n                this._providers.splice(i);\n            }\n\n            this.proxy.$unregisterAuthenticationProvider(provider.id);\n        });\n    }\n\n    $login(providerId: string, scopes: string[]): Promise<AuthenticationSession> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.login(scopes));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    $logout(providerId: string, sessionId: string): Promise<void> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.logout(sessionId));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $getSessions(providerId: string): Promise<ReadonlyArray<AuthenticationSession>> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            const sessions = await authProvider.getSessions();\n\n            /* Wrap the session object received from the plugin to prevent serialization mismatches\n            e.g. if the plugin object is constructed with the help of getters they won't be serialized:\n            class SessionImpl implements AuthenticationSession {\n                private _id;\n                get id() {\n                    return _id;\n                }\n            ...\n            } will translate to JSON as { _id: '<sessionid>' } not { id: '<sessionid>' } */\n            return sessions.map(session => ({\n                id: session.id,\n                accessToken: session.accessToken,\n                account: { id: session.account.id, label: session.account.label },\n                scopes: session.scopes\n            }));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    $onDidChangeAuthenticationSessions(id: string, label: string, event: AuthenticationSessionsChangeEvent): Promise<void> {\n        this.onDidChangeSessionsEmitter.fire({ provider: { id, label }, ...event });\n        return Promise.resolve();\n    }\n\n   async $onDidChangeAuthenticationProviders(added: theia.AuthenticationProviderInformation[], removed: theia.AuthenticationProviderInformation[]): Promise<void> {\n        added.forEach(id => {\n            if (this._providers.indexOf(id) === -1) {\n                this._providers.push(id);\n            }\n        });\n\n        removed.forEach(p => {\n            const index = this._providers.findIndex(provider => provider.id === p.id);\n            if (index > -1) {\n                this._providers.splice(index);\n            }\n        });\n\n        this.onDidChangeAuthenticationProvidersEmitter.fire({ added, removed });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from './known-commands';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined, mappedResult: KnownCommands.ConversionFunction) => {\n                const mr: KnownCommands.ConversionFunction = mappedResult;\n                return this.proxy.$executeCommand(mappedId, ...mappedArgs || []).then((result: any) => {\n                    if (!result) {\n                        return undefined;\n                    }\n                    if (!mr) {\n                        return result;\n                    }\n                    return mr(result);\n                });\n            }\n            );\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`No handler exists for command '${id}'`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return KnownCommands.map(external.command, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n        ({\n            id: mappedId,\n            title: external.title || ' ',\n            tooltip: external.tooltip,\n            arguments: mappedArgs\n        }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject(`command ${args[0]} not found`);\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CommandRegistryImpl } from './command-registry';\nimport { UriComponents } from '../common/uri-components';\nimport { CommentThreadCollapsibleState, URI } from './types-impl';\nimport {\n    Range,\n    Comment,\n    CommentThreadCollapsibleState as CommentThreadCollapsibleStateModel,\n    CommentOptions\n} from '../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from './documents';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { fromMarkdown, fromRange, toRange } from './type-converters';\nimport {\n    CommentsCommandArg, CommentsContextCommandArg, CommentsEditCommandArg,\n    CommentsExt,\n    CommentsMain,\n    CommentThreadChanges,\n    Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/api/common/extHostComments.ts\n\ntype ProviderHandle = number;\n\nexport class CommentsExtImpl implements CommentsExt {\n    private handle = 0;\n    private readonly proxy: CommentsMain;\n    private readonly commentControllers: Map<ProviderHandle, CommentController> = new Map<ProviderHandle, CommentController>();\n    private readonly commentControllersByExtension: Map<string, CommentController[]> = new Map<string, CommentController[]>();\n\n    constructor(readonly rpc: RPCProtocol, readonly commands: CommandRegistryImpl, readonly _documents: DocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.COMMENTS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (CommentsCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    return {\n                        thread: commentThread,\n                        text: arg.text\n                    };\n                } else if (CommentsContextCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    return comment;\n                } else if (CommentsEditCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    comment.body = arg.text;\n                    return comment;\n                }\n\n                return arg;\n            }\n        });\n    }\n\n    createCommentController(plugin: InternalPlugin, id: string, label: string): theia.CommentController {\n        const handle = this.handle++;\n        const commentController = new CommentController(plugin.model.id, this.proxy, handle, id, label);\n        this.commentControllers.set(commentController.handle, commentController);\n\n        const commentControllers = this.commentControllersByExtension.get(plugin.model.id.toLowerCase()) || [];\n        commentControllers.push(commentController);\n        this.commentControllersByExtension.set(plugin.model.id.toLowerCase(), commentControllers);\n\n        return commentController;\n    }\n\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$createCommentThreadTemplate(uriComponents, range);\n    }\n\n    async $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$updateCommentThreadTemplate(threadHandle, range);\n    }\n\n    async $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (commentController) {\n            commentController.$deleteCommentThread(commentThreadHandle);\n        }\n    }\n\n    async $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: theia.CancellationToken): Promise<Range[] | undefined> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController || !commentController.commentingRangeProvider) {\n            return Promise.resolve(undefined);\n        }\n\n        const documentData = this._documents.getDocumentData(URI.revive(uriComponents));\n        if (documentData) {\n            const ranges: theia.Range[] | undefined = await commentController.commentingRangeProvider!.provideCommentingRanges(documentData.document, token);\n            if (ranges) {\n                return ranges.map(x => fromRange(x));\n            }\n        }\n    }\n}\n\ntype CommentThreadModification = Partial<{\n    range: theia.Range,\n    label: string | undefined,\n    contextValue: string | undefined,\n    comments: theia.Comment[],\n    collapsibleState: theia.CommentThreadCollapsibleState\n}>;\n\nexport class ExtHostCommentThread implements theia.CommentThread, theia.Disposable {\n    private static _handlePool: number = 0;\n    readonly handle = ExtHostCommentThread._handlePool++;\n    public commentHandle: number = 0;\n\n    private modifications: CommentThreadModification = Object.create(null);\n\n    set threadId(id: string) {\n        this._id = id;\n    }\n\n    get threadId(): string {\n        return this._id!;\n    }\n\n    get id(): string {\n        return this._id!;\n    }\n\n    get resource(): theia.Uri {\n        return this._uri;\n    }\n\n    get uri(): theia.Uri {\n        return this._uri;\n    }\n\n    private readonly _onDidUpdateCommentThread = new Emitter<void>();\n    readonly onDidUpdateCommentThread = this._onDidUpdateCommentThread.event;\n\n    set range(range: theia.Range) {\n        if (!range.isEqual(this._range)) {\n            this._range = range;\n            this.modifications.range = range;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    get range(): theia.Range {\n        return this._range;\n    }\n\n    private _label: string | undefined;\n\n    get label(): string | undefined {\n        return this._label;\n    }\n\n    set label(label: string | undefined) {\n        this._label = label;\n        this.modifications.label = label;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _contextValue: string | undefined;\n\n    get contextValue(): string | undefined {\n        return this._contextValue;\n    }\n\n    set contextValue(context: string | undefined) {\n        this._contextValue = context;\n        this.modifications.contextValue = context;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    get comments(): theia.Comment[] {\n        return this._comments;\n    }\n\n    set comments(newComments: theia.Comment[]) {\n        this._comments = newComments;\n        this.modifications.comments = newComments;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private collapseState?: theia.CommentThreadCollapsibleState;\n\n    get collapsibleState(): theia.CommentThreadCollapsibleState {\n        return this.collapseState!;\n    }\n\n    set collapsibleState(newState: theia.CommentThreadCollapsibleState) {\n        this.collapseState = newState;\n        this.modifications.collapsibleState = newState;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private localDisposables: Disposable[];\n\n    private _isDisposed: boolean;\n\n    public get isDisposed(): boolean {\n        return this._isDisposed;\n    }\n\n    private commentsMap: Map<theia.Comment, number> = new Map<theia.Comment, number>();\n\n    private acceptInputDisposables = new DisposableCollection();\n\n    constructor(\n        private proxy: CommentsMain,\n        private commentController: CommentController,\n        private _id: string | undefined,\n        private _uri: theia.Uri,\n        private _range: theia.Range,\n        private _comments: theia.Comment[],\n        extensionId: string\n    ) {\n        if (this._id === undefined) {\n            this._id = `${commentController.id}.${this.handle}`;\n        }\n\n        this.proxy.$createCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id,\n            this._uri,\n            fromRange(this._range),\n            extensionId\n        );\n\n        this.localDisposables = [];\n        this._isDisposed = false;\n\n        this.localDisposables.push(this.onDidUpdateCommentThread(() => {\n            this.eventuallyUpdateCommentThread();\n        }));\n\n        // set up comments after ctor to batch update events.\n        this.comments = _comments;\n    }\n\n    eventuallyUpdateCommentThread(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        const modified = (value: keyof CommentThreadModification): boolean =>\n            Object.prototype.hasOwnProperty.call(this.modifications, value);\n\n        const formattedModifications: CommentThreadChanges = {};\n        if (modified('range')) {\n            formattedModifications.range = fromRange(this._range);\n        }\n        if (modified('label')) {\n            formattedModifications.label = this.label;\n        }\n        if (modified('contextValue')) {\n            formattedModifications.contextValue = this.contextValue;\n        }\n        if (modified('comments')) {\n            formattedModifications.comments =\n                this._comments.map(cmt => convertToModeComment(this, this.commentController, cmt, this.commentsMap));\n        }\n        if (modified('collapsibleState')) {\n            formattedModifications.collapseState = convertToCollapsibleState(this.collapseState);\n        }\n        this.modifications = {};\n\n        this.proxy.$updateCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id!,\n            this._uri,\n            formattedModifications\n        );\n    }\n\n    getCommentByUniqueId(uniqueId: number): theia.Comment | undefined {\n        for (const key of this.commentsMap) {\n            const comment = key[0];\n            const id = key[1];\n            if (uniqueId === id) {\n                return comment;\n            }\n        }\n\n        return;\n    }\n\n    dispose(): void {\n        this._isDisposed = true;\n        this.acceptInputDisposables.dispose();\n        this.localDisposables.forEach(disposable => disposable.dispose());\n        this.proxy.$deleteCommentThread(\n            this.commentController.handle,\n            this.handle\n        );\n    }\n}\n\nclass CommentController implements theia.CommentController {\n\n    constructor(\n        private extension: string,\n        private proxy: CommentsMain,\n        private _handle: number,\n        private _id: string,\n        private _label: string\n    ) {\n        this.proxy.$registerCommentController(this.handle, _id, _label);\n    }\n\n    private readonly threads: Map<number, ExtHostCommentThread> = new Map<number, ExtHostCommentThread>();\n    readonly commentingRangeProvider?: theia.CommentingRangeProvider;\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get handle(): number {\n        return this._handle;\n    }\n\n    private _options: CommentOptions | undefined;\n\n    get options(): CommentOptions | undefined {\n        return this._options;\n    }\n\n    set options(options: CommentOptions | undefined) {\n        this._options = options;\n\n        this.proxy.$updateCommentControllerFeatures(this.handle, { options: this._options });\n    }\n\n    createCommentThread(resource: theia.Uri, range: theia.Range, comments: theia.Comment[]): theia.CommentThread;\n    createCommentThread(arg0: theia.Uri | string, arg1: theia.Uri | theia.Range, arg2: theia.Range | theia.Comment[], arg3?: theia.Comment[]): theia.CommentThread {\n        if (typeof arg0 === 'string') {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, arg0, arg1 as theia.Uri, arg2 as theia.Range, arg3 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        } else {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, arg0 as theia.Uri, arg1 as theia.Range, arg2 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        }\n    }\n\n    $createCommentThreadTemplate(uriComponents: UriComponents, range: Range): ExtHostCommentThread {\n        const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, URI.revive(uriComponents), toRange(range), [], this.extension);\n        commentThread.collapsibleState = CommentThreadCollapsibleStateModel.Expanded;\n        this.threads.set(commentThread.handle, commentThread);\n        return commentThread;\n    }\n\n    $updateCommentThreadTemplate(threadHandle: number, range: Range): void {\n        const thread = this.threads.get(threadHandle);\n        if (thread) {\n            thread.range = toRange(range);\n        }\n    }\n\n    $deleteCommentThread(threadHandle: number): void {\n        const thread = this.threads.get(threadHandle);\n\n        if (thread) {\n            thread.dispose();\n        }\n\n        this.threads.delete(threadHandle);\n    }\n\n    getCommentThread(handle: number): ExtHostCommentThread | undefined {\n        return this.threads.get(handle);\n    }\n\n    dispose(): void {\n        this.threads.forEach(value => {\n            value.dispose();\n        });\n\n        this.proxy.$unregisterCommentController(this.handle);\n    }\n}\n\nfunction convertToModeComment(thread: ExtHostCommentThread, commentController: CommentController, theiaComment: theia.Comment, commentsMap: Map<theia.Comment, number>): Comment {\n    let commentUniqueId = commentsMap.get(theiaComment)!;\n    if (!commentUniqueId) {\n        commentUniqueId = ++thread.commentHandle;\n        commentsMap.set(theiaComment, commentUniqueId);\n    }\n\n    const iconPath = theiaComment.author && theiaComment.author.iconPath ? theiaComment.author.iconPath.toString() : undefined;\n\n    return {\n        mode: theiaComment.mode,\n        contextValue: theiaComment.contextValue,\n        uniqueIdInThread: commentUniqueId,\n        body: fromMarkdown(theiaComment.body),\n        userName: theiaComment.author.name,\n        userIconPath: iconPath,\n        label: theiaComment.label,\n    };\n}\n\nfunction convertToCollapsibleState(kind: theia.CommentThreadCollapsibleState | undefined): CommentThreadCollapsibleStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadCollapsibleState.Expanded:\n                return CommentThreadCollapsibleStateModel.Expanded;\n            case CommentThreadCollapsibleState.Collapsed:\n                return CommentThreadCollapsibleStateModel.Collapsed;\n        }\n    }\n    return CommentThreadCollapsibleStateModel.Collapsed;\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/extHostCustomEditors.ts\n\nimport { CustomEditorsExt, CustomEditorsMain, Plugin, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { DocumentsExtImpl } from './documents';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { WorkspaceExtImpl } from './workspace';\nimport { WidgetOpenerOptions } from '@theia/core/lib/browser';\n\nexport class CustomEditorsExtImpl implements CustomEditorsExt {\n    private readonly proxy: CustomEditorsMain;\n    private readonly editorProviders = new EditorProviderStore();\n    private readonly documents = new CustomDocumentStore();\n\n    constructor(rpc: RPCProtocol,\n        private readonly documentExt: DocumentsExtImpl,\n        private readonly webviewExt: WebviewsExtImpl,\n        private readonly workspace: WorkspaceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CUSTOM_EDITORS_MAIN);\n    }\n\n    registerCustomEditorProvider(\n        viewType: string,\n        provider: theia.CustomReadonlyEditorProvider | theia.CustomTextEditorProvider,\n        options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean },\n        plugin: Plugin\n    ): theia.Disposable {\n        const disposables = new DisposableCollection();\n        if ('resolveCustomTextEditor' in provider) {\n            disposables.push(this.editorProviders.addTextProvider(viewType, plugin, provider));\n            this.proxy.$registerTextEditorProvider(viewType, options.webviewOptions || {}, {\n                supportsMove: !!provider.moveCustomTextEditor,\n            });\n        } else {\n            disposables.push(this.editorProviders.addCustomProvider(viewType, plugin, provider));\n\n            if (this.supportEditing(provider)) {\n                disposables.push(provider.onDidChangeCustomDocument(e => {\n                    const entry = this.getCustomDocumentEntry(viewType, e.document.uri);\n                    if (isEditEvent(e)) {\n                        const editId = entry.addEdit(e);\n                        this.proxy.$onDidEdit(e.document.uri, viewType, editId, e.label);\n                    } else {\n                        this.proxy.$onContentChange(e.document.uri, viewType);\n                    }\n                }));\n            }\n\n            this.proxy.$registerCustomEditorProvider(viewType, options.webviewOptions || {}, !!options.supportsMultipleEditorsPerDocument);\n        }\n\n        return Disposable.from(\n            disposables,\n            Disposable.create(() => {\n                this.proxy.$unregisterEditorProvider(viewType);\n            })\n        );\n    }\n\n    async $createCustomDocument(resource: UriComponents, viewType: string, backupId: string | undefined, cancellation: CancellationToken): Promise<{\n        editable: boolean;\n    }> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provide type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const document = await entry.provider.openCustomDocument(revivedResource, { backupId }, cancellation);\n        this.documents.add(viewType, document);\n\n        return { editable: this.supportEditing(entry.provider) };\n    }\n\n    async $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provider type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n        this.documents.delete(viewType, document);\n        document.dispose();\n    }\n\n    async $resolveWebviewEditor(\n        resource: UriComponents,\n        handler: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: WidgetOpenerOptions | undefined,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n        const panel = this.webviewExt.createWebviewPanel(viewType, title, {}, options, entry.plugin, handler);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, entry.plugin);\n        await this.proxy.$createCustomEditorPanel(handler, title, widgetOpenerOptions, webviewOptions);\n\n        const revivedResource = URI.revive(resource);\n\n        switch (entry.type) {\n            case CustomEditorType.Custom: {\n                const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n                return entry.provider.resolveCustomEditor(document, panel, cancellation);\n            }\n            case CustomEditorType.Text: {\n                const document = this.documentExt.getDocument(revivedResource);\n                return entry.provider.resolveCustomTextEditor(document, panel, cancellation);\n            }\n            default: {\n                throw new Error('Unknown webview provider type');\n            }\n        }\n    }\n\n    getCustomDocumentEntry(viewType: string, resource: UriComponents): CustomDocumentStoreEntry {\n        const entry = this.documents.get(viewType, URI.revive(resource));\n        if (!entry) {\n            throw new Error('No custom document found');\n        }\n        return entry;\n    }\n\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void {\n        const document = this.getCustomDocumentEntry(viewType, resourceComponents);\n        document.disposeEdits(editIds);\n    }\n\n    async $onMoveCustomEditor(handle: string, newResourceComponents: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (!(entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor) {\n            throw new Error(`Provider does not implement move '${viewType}'`);\n        }\n\n        const webview = this.webviewExt.getWebviewPanel(handle);\n        if (!webview) {\n            throw new Error('No webview found');\n        }\n\n        const resource = URI.revive(newResourceComponents);\n        const document = this.documentExt.getDocument(resource);\n        const cancellationSource = new CancellationTokenSource();\n        await (entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor!(document, webview, cancellationSource.token);\n    }\n\n    async $undo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.undo(editId, isDirty);\n    }\n\n    async $redo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.redo(editId, isDirty);\n    }\n\n    async $revert(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.revertCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSave(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.saveCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSaveAs(resourceComponents: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        return provider.saveCustomDocumentAs(entry.document, URI.revive(targetResource), cancellation);\n    }\n\n    private getCustomEditorProvider(viewType: string): theia.CustomEditorProvider {\n        const entry = this.editorProviders.get(viewType);\n        const provider = entry?.provider;\n        if (!provider || !this.supportEditing(provider)) {\n            throw new Error('Custom document is not editable');\n        }\n        return provider;\n    }\n\n    private supportEditing(\n        provider: theia.CustomTextEditorProvider | theia.CustomEditorProvider | theia.CustomReadonlyEditorProvider\n    ): provider is theia.CustomEditorProvider {\n        return !!(provider as theia.CustomEditorProvider).onDidChangeCustomDocument;\n    }\n}\n\nfunction isEditEvent(e: theia.CustomDocumentContentChangeEvent | theia.CustomDocumentEditEvent): e is theia.CustomDocumentEditEvent {\n    return typeof (e as theia.CustomDocumentEditEvent).undo === 'function'\n        && typeof (e as theia.CustomDocumentEditEvent).redo === 'function';\n}\n\nclass CustomDocumentStoreEntry {\n    constructor(\n        readonly document: theia.CustomDocument,\n    ) { }\n\n    private readonly edits = new Cache<theia.CustomDocumentEditEvent>('custom documents');\n\n    addEdit(item: theia.CustomDocumentEditEvent): number {\n        return this.edits.add([item]);\n    }\n\n    async undo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).undo();\n    }\n\n    async redo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).redo();\n    }\n\n    disposeEdits(editIds: number[]): void {\n        for (const id of editIds) {\n            this.edits.delete(id);\n        }\n    }\n\n    private getEdit(editId: number): theia.CustomDocumentEditEvent {\n        const edit = this.edits.get(editId, 0);\n        if (!edit) {\n            throw new Error('No edit found');\n        }\n        return edit;\n    }\n}\n\nconst enum CustomEditorType {\n    Text,\n    Custom\n}\n\ntype ProviderEntry = {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Text;\n    readonly provider: theia.CustomTextEditorProvider;\n} | {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Custom;\n    readonly provider: theia.CustomReadonlyEditorProvider;\n};\n\nclass EditorProviderStore {\n    private readonly providers = new Map<string, ProviderEntry>();\n\n    addTextProvider(viewType: string, plugin: Plugin, provider: theia.CustomTextEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Text, viewType, plugin, provider);\n    }\n\n    addCustomProvider(viewType: string, plugin: Plugin, provider: theia.CustomReadonlyEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Custom, viewType, plugin, provider);\n    }\n\n    get(viewType: string): ProviderEntry | undefined {\n        return this.providers.get(viewType);\n    }\n\n    private add(type: CustomEditorType, viewType: string,\n        plugin: Plugin, provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider): theia.Disposable {\n        if (this.providers.has(viewType)) {\n            throw new Error(`Provider for viewType:${viewType} already registered`);\n        }\n        this.providers.set(viewType, { type, plugin: plugin, provider } as ProviderEntry);\n        return new Disposable(() => this.providers.delete(viewType));\n    }\n}\n\nclass CustomDocumentStore {\n    private readonly documents = new Map<string, CustomDocumentStoreEntry>();\n\n    get(viewType: string, resource: theia.Uri): CustomDocumentStoreEntry | undefined {\n        return this.documents.get(this.key(viewType, resource));\n    }\n\n    add(viewType: string, document: theia.CustomDocument): CustomDocumentStoreEntry {\n        const key = this.key(viewType, document.uri);\n        if (this.documents.has(key)) {\n            throw new Error(`Document already exists for viewType:${viewType} resource:${document.uri}`);\n        }\n        const entry = new CustomDocumentStoreEntry(document);\n        this.documents.set(key, entry);\n        return entry;\n    }\n\n    delete(viewType: string, document: theia.CustomDocument): void {\n        const key = this.key(viewType, document.uri);\n        this.documents.delete(key);\n    }\n\n    private key(viewType: string, resource: theia.Uri): string {\n        return `${viewType}@@@${resource}`;\n    }\n}\n\n// copied from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/cache.ts\nclass Cache<T> {\n    private static readonly enableDebugLogging = false;\n    private readonly _data = new Map<number, readonly T[]>();\n    private _idPool = 1;\n\n    constructor(\n        private readonly id: string\n    ) { }\n\n    add(item: readonly T[]): number {\n        const id = this._idPool++;\n        this._data.set(id, item);\n        this.logDebugInfo();\n        return id;\n    }\n\n    get(pid: number, id: number): T | undefined {\n        return this._data.has(pid) ? this._data.get(pid)![id] : undefined;\n    }\n\n    delete(id: number): void {\n        this._data.delete(id);\n        this.logDebugInfo();\n    }\n\n    private logDebugInfo(): void {\n        if (!Cache.enableDebugLogging) {\n            return;\n        }\n        console.log(`${this.id} cache size — ${this._data.size}`);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationReply,\n    DecorationRequest,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT, PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, FileDecoration, URI } from './types-impl';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { dirname } from 'path';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostDecorations.ts#L39-L38\n\ninterface ProviderData {\n    provider: theia.FileDecorationProvider;\n    pluginInfo: PluginInfo;\n}\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    private static handle = 0;\n    private static maxEventSize = 250;\n\n    private readonly providersMap: Map<number, ProviderData>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = DecorationsExtImpl.handle++;\n        this.providersMap.set(handle, { provider, pluginInfo });\n        this.proxy.$registerDecorationProvider(handle);\n\n        const listener = provider.onDidChangeFileDecorations && provider.onDidChangeFileDecorations(e => {\n            if (!e) {\n                this.proxy.$onDidChange(handle, null);\n                return;\n            }\n            const array = Array.isArray(e) ? e : [e];\n            if (array.length <= DecorationsExtImpl.maxEventSize) {\n                this.proxy.$onDidChange(handle, array);\n                return;\n            }\n\n            // too many resources per event. pick one resource per folder, starting\n            // with parent folders\n            const mapped = array.map(uri => ({ uri, rank: (uri.path.match(/\\//g) || []).length }));\n            const groups = groupBy(mapped, (a, b) => a.rank - b.rank);\n            const picked: URI[] = [];\n            outer: for (const uris of groups) {\n                let lastDirname: string | undefined;\n                for (const obj of uris) {\n                    const myDirname = dirname(obj.uri.path);\n                    if (lastDirname !== myDirname) {\n                        lastDirname = myDirname;\n                        if (picked.push(obj.uri) >= DecorationsExtImpl.maxEventSize) {\n                            break outer;\n                        }\n                    }\n                }\n            }\n            this.proxy.$onDidChange(handle, picked);\n        });\n\n        return new Disposable(() => {\n            listener?.dispose();\n            this.proxy.$unregisterDecorationProvider(handle);\n            this.providersMap.delete(handle);\n        });\n\n        function groupBy<T>(data: ReadonlyArray<T>, compareFn: (a: T, b: T) => number): T[][] {\n            const result: T[][] = [];\n            let currentGroup: T[] | undefined = undefined;\n            for (const element of data.slice(0).sort(compareFn)) {\n                if (!currentGroup || compareFn(currentGroup[0], element) !== 0) {\n                    currentGroup = [element];\n                    result.push(currentGroup);\n                } else {\n                    currentGroup.push(element);\n                }\n            }\n            return result;\n        }\n    }\n\n    async $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply> {\n        if (!this.providersMap.has(handle)) {\n            // might have been unregistered in the meantime\n            return Object.create(null);\n        }\n\n        const result: DecorationReply = Object.create(null);\n        const { provider, pluginInfo } = this.providersMap.get(handle)!;\n\n        await Promise.all(requests.map(async request => {\n            try {\n                const { uri, id } = request;\n                const data = await Promise.resolve(provider.provideFileDecoration(URI.revive(uri), token));\n                if (!data) {\n                    return;\n                }\n                try {\n                    FileDecoration.validate(data);\n                    result[id] = <DecorationData>[data.propagate, data.tooltip, data.badge, data.color];\n                } catch (e) {\n                    console.warn(`INVALID decoration from extension '${pluginInfo.name}': ${e}`);\n                }\n            } catch (err) {\n                console.error(err);\n            }\n        }));\n\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            title: options.title,\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: options.canSelectFiles ? options.canSelectFiles : true,\n            canSelectFolders: options.canSelectFolders ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = URI.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<URI | undefined> {\n        const optionsMain = {\n            title: options.title,\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(URI.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => URI.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport { EndOfLine, Position, Range, URI } from './types-impl';\nimport { ok } from '../common/assert';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { TextEdit, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n        document: theia.TextDocument,\n        reason: theia.TextDocumentSaveReason,\n        fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n        accept: (operation: SingleEditOperation) => void\n    }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: []\n        });\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        data.onEvents(e);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: e.changes.map(change =>\n                ({\n                    range: Converter.toRange(change.range),\n                    rangeOffset: change.rangeOffset,\n                    rangeLength: change.rangeLength,\n                    text: change.text\n                }))\n        });\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    public getDocument(resource: theia.Uri): theia.TextDocument {\n        const data = this.getDocumentData(resource);\n        if (!data?.document) {\n            throw new Error(`Unable to retrieve document from URI '${resource}'`);\n        }\n        return data.document;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line + 1,\n                    startColumn: start.character + 1,\n                    endLineNumber: end.line + 1,\n                    endColumn: end.character + 1\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport { URI } from './types-impl';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | null = null;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditor.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        // TODO investigate how to get rid of it to align with VS Code extension host code\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be triggered with undefined before next editor, if any, become active.\n            this.activeEditorId = null;\n            this._onDidChangeActiveTextEditor.fire(undefined);\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' does not exist`);\n            this.activeEditorId = delta.newActiveEditor;\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        // now that the internal state is complete, fire events\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if (delta.removedEditors || delta.addedEditors) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this._onDidChangeActiveTextEditor.fire(this.activeEditor());\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private applicationName: string;\n    private defaultShell: string;\n    private ui: theia.UIKind;\n    private envMachineId: string;\n    private envSessionId: string;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setApplicationName(applicationName: string): void {\n        this.applicationName = applicationName;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    setUIKind(uiKind: theia.UIKind): void {\n        this.ui = uiKind;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return this.applicationName;\n    }\n\n    abstract get appRoot(): string;\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n    get uiKind(): theia.UIKind {\n        return this.ui;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystemEventService.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/tslint/config */\n\nimport { Emitter, WaitUntilEvent, AsyncEmitter } from '@theia/core/lib/common/event';\nimport { IRelativePattern, parse } from '@theia/callhierarchy/lib/common/glob';\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { Disposable, URI, WorkspaceEdit } from './types-impl';\nimport { EditorsAndDocumentsExtImpl as ExtHostDocumentsAndEditors } from './editors-and-documents';\nimport type * as vscode from '@theia/plugin';\nimport * as typeConverter from './type-converters';\nimport { FileOperation } from '@theia/filesystem/lib/common/files';\nimport { flatten } from '../common/arrays';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    Plugin, TextEditorsMain as MainThreadTextEditorsShape, PLUGIN_RPC_CONTEXT, FileSystemEvents, ExtHostFileSystemEventServiceShape,\n    WorkspaceFileEditDto, WorkspaceTextEditDto\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\ntype Event<T> = vscode.Event<T>;\ntype IExtensionDescription = Plugin;\ntype IWaitUntil = WaitUntilEvent;\n\nclass FileSystemWatcher implements vscode.FileSystemWatcher {\n\n    private readonly _onDidCreate = new Emitter<vscode.Uri>();\n    private readonly _onDidChange = new Emitter<vscode.Uri>();\n    private readonly _onDidDelete = new Emitter<vscode.Uri>();\n    private _disposable: Disposable;\n    private _config: number;\n\n    get ignoreCreateEvents(): boolean {\n        return Boolean(this._config & 0b001);\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return Boolean(this._config & 0b010);\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return Boolean(this._config & 0b100);\n    }\n\n    constructor(dispatcher: Event<FileSystemEvents>, globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean) {\n\n        this._config = 0;\n        if (ignoreCreateEvents) {\n            this._config += 0b001;\n        }\n        if (ignoreChangeEvents) {\n            this._config += 0b010;\n        }\n        if (ignoreDeleteEvents) {\n            this._config += 0b100;\n        }\n\n        const parsedPattern = parse(globPattern);\n\n        const subscription = dispatcher(events => {\n            if (!ignoreCreateEvents) {\n                for (const created of events.created) {\n                    const uri = URI.revive(created);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidCreate.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreChangeEvents) {\n                for (const changed of events.changed) {\n                    const uri = URI.revive(changed);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidChange.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreDeleteEvents) {\n                for (const deleted of events.deleted) {\n                    const uri = URI.revive(deleted);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidDelete.fire(uri);\n                    }\n                }\n            }\n        });\n\n        this._disposable = Disposable.from(this._onDidCreate, this._onDidChange, this._onDidDelete, subscription);\n    }\n\n    dispose() {\n        this._disposable.dispose();\n    }\n\n    get onDidCreate(): Event<vscode.Uri> {\n        return this._onDidCreate.event;\n    }\n\n    get onDidChange(): Event<vscode.Uri> {\n        return this._onDidChange.event;\n    }\n\n    get onDidDelete(): Event<vscode.Uri> {\n        return this._onDidDelete.event;\n    }\n}\n\ninterface IExtensionListener<E> {\n    extension: IExtensionDescription;\n    (e: E): any;\n}\n\nexport class ExtHostFileSystemEventService implements ExtHostFileSystemEventServiceShape {\n\n    private readonly _onFileSystemEvent = new Emitter<FileSystemEvents>();\n\n    private readonly _onDidRenameFile = new Emitter<vscode.FileRenameEvent>();\n    private readonly _onDidCreateFile = new Emitter<vscode.FileCreateEvent>();\n    private readonly _onDidDeleteFile = new Emitter<vscode.FileDeleteEvent>();\n    private readonly _onWillRenameFile = new AsyncEmitter<vscode.FileWillRenameEvent>();\n    private readonly _onWillCreateFile = new AsyncEmitter<vscode.FileWillCreateEvent>();\n    private readonly _onWillDeleteFile = new AsyncEmitter<vscode.FileWillDeleteEvent>();\n\n    readonly onDidRenameFile: Event<vscode.FileRenameEvent> = this._onDidRenameFile.event;\n    readonly onDidCreateFile: Event<vscode.FileCreateEvent> = this._onDidCreateFile.event;\n    readonly onDidDeleteFile: Event<vscode.FileDeleteEvent> = this._onDidDeleteFile.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly _extHostDocumentsAndEditors: ExtHostDocumentsAndEditors,\n        private readonly _mainThreadTextEditors: MainThreadTextEditorsShape = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN)\n    ) {\n        //\n    }\n\n    // --- file events\n\n    createFileSystemWatcher(globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): vscode.FileSystemWatcher {\n        return new FileSystemWatcher(this._onFileSystemEvent.event, globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $onFileEvent(events: FileSystemEvents) {\n        this._onFileSystemEvent.fire(events);\n    }\n\n    // --- file operations\n\n    $onDidRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined): void {\n        switch (operation) {\n            case FileOperation.MOVE:\n                this._onDidRenameFile.fire(Object.freeze({ files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }));\n                break;\n            case FileOperation.DELETE:\n                this._onDidDeleteFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            case FileOperation.CREATE:\n                this._onDidCreateFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    getOnWillRenameFileEvent(extension: IExtensionDescription): Event<vscode.FileWillRenameEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillRenameFile);\n    }\n\n    getOnWillCreateFileEvent(extension: IExtensionDescription): Event<vscode.FileWillCreateEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillCreateFile);\n    }\n\n    getOnWillDeleteFileEvent(extension: IExtensionDescription): Event<vscode.FileWillDeleteEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillDeleteFile);\n    }\n\n    private _createWillExecuteEvent<E extends IWaitUntil>(extension: IExtensionDescription, emitter: AsyncEmitter<E>): Event<E> {\n        return (listener, thisArg, disposables) => {\n            const wrappedListener: IExtensionListener<E> = function wrapped(e: E) { listener.call(thisArg, e); };\n            wrappedListener.extension = extension;\n            return emitter.event(wrappedListener, undefined, disposables);\n        };\n    }\n\n    async $onWillRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any> {\n        switch (operation) {\n            case FileOperation.MOVE:\n                await this._fireWillEvent(this._onWillRenameFile, { files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }, timeout, token);\n                break;\n            case FileOperation.DELETE:\n                await this._fireWillEvent(this._onWillDeleteFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            case FileOperation.CREATE:\n                await this._fireWillEvent(this._onWillCreateFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    private async _fireWillEvent<E extends IWaitUntil>(emitter: AsyncEmitter<E>, data: Omit<E, 'waitUntil'>, timeout: number, token: CancellationToken): Promise<any> {\n\n        const edits: WorkspaceEdit[] = [];\n        await emitter.fire(data, token, async (thenable, listener) => {\n            // ignore all results except for WorkspaceEdits. Those are stored in an array.\n            const now = Date.now();\n            const result = await Promise.resolve(thenable);\n            if (result instanceof WorkspaceEdit) {\n                edits.push(result);\n            }\n\n            if (Date.now() - now > timeout) {\n                console.warn('SLOW file-participant', (<IExtensionListener<E>>listener).extension?.model.id);\n            }\n        });\n\n        if (token.isCancellationRequested) {\n            return;\n        }\n\n        if (edits.length > 0) {\n            // flatten all WorkspaceEdits collected via waitUntil-call\n            // and apply them in one go.\n            const allEdits = new Array<Array<WorkspaceFileEditDto | WorkspaceTextEditDto>>();\n            for (const edit of edits) {\n                const { edits } = typeConverter.fromWorkspaceEdit(edit, this._extHostDocumentsAndEditors);\n                allEdits.push(edits);\n            }\n            return this._mainThreadTextEditors.$tryApplyWorkspaceEdit({ edits: flatten(allEdits) });\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystem.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/quotes */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { FileChangeType, FileSystemError, URI } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain, IFileChangeDto } from '../common/plugin-api-rpc';\nimport * as vscode from '@theia/plugin';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport * as typeConverter from './type-converters';\nimport { LanguagesExtImpl } from './languages';\nimport { Schemes as Schemas } from '../common/uri-components';\nimport { State, StateMachine, LinkComputer, Edge } from '../common/link-computer';\nimport { commonPrefixLength } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\ntype IDisposable = vscode.Disposable;\n\nclass FsLinkProvider {\n\n    private _schemes: string[] = [];\n    private _stateMachine?: StateMachine;\n\n    add(scheme: string): void {\n        this._stateMachine = undefined;\n        this._schemes.push(scheme);\n    }\n\n    delete(scheme: string): void {\n        const idx = this._schemes.indexOf(scheme);\n        if (idx >= 0) {\n            this._schemes.splice(idx, 1);\n            this._stateMachine = undefined;\n        }\n    }\n\n    private _initStateMachine(): void {\n        if (!this._stateMachine) {\n\n            // sort and compute common prefix with previous scheme\n            // then build state transitions based on the data\n            const schemes = this._schemes.sort();\n            const edges: Edge[] = [];\n            let prevScheme: string | undefined;\n            let prevState: State;\n            let lastState = State.LastKnownState;\n            let nextState = State.LastKnownState;\n            for (const scheme of schemes) {\n\n                // skip the common prefix of the prev scheme\n                // and continue with its last state\n                let pos = !prevScheme ? 0 : commonPrefixLength(prevScheme, scheme);\n                if (pos === 0) {\n                    prevState = State.Start;\n                } else {\n                    prevState = nextState;\n                }\n\n                for (; pos < scheme.length; pos++) {\n                    // keep creating new (next) states until the\n                    // end (and the BeforeColon-state) is reached\n                    if (pos + 1 === scheme.length) {\n                        // Save the last state here, because we need to continue for the next scheme\n                        lastState = nextState;\n                        nextState = State.BeforeColon;\n                    } else {\n                        nextState += 1;\n                    }\n                    edges.push([prevState, scheme.toUpperCase().charCodeAt(pos), nextState]);\n                    edges.push([prevState, scheme.toLowerCase().charCodeAt(pos), nextState]);\n                    prevState = nextState;\n                }\n\n                prevScheme = scheme;\n                // Restore the last state\n                nextState = lastState;\n            }\n\n            // all link must match this pattern `<scheme>:/<more>`\n            edges.push([State.BeforeColon, CharCode.Colon, State.AfterColon]);\n            edges.push([State.AfterColon, CharCode.Slash, State.End]);\n\n            this._stateMachine = new StateMachine(edges);\n        }\n    }\n\n    provideDocumentLinks(document: vscode.TextDocument): vscode.ProviderResult<vscode.DocumentLink[]> {\n        this._initStateMachine();\n\n        const result: vscode.DocumentLink[] = [];\n        const links = LinkComputer.computeLinks({\n            getLineContent(lineNumber: number): string {\n                return document.lineAt(lineNumber - 1).text;\n            },\n            getLineCount(): number {\n                return document.lineCount;\n            }\n        }, this._stateMachine);\n\n        for (const link of links) {\n            const docLink = typeConverter.DocumentLink.to(link);\n            if (docLink.target) {\n                result.push(docLink);\n            }\n        }\n        return result;\n    }\n}\n\nclass ConsumerFileSystem implements vscode.FileSystem {\n\n    constructor(private _proxy: FileSystemMain) { }\n\n    stat(uri: vscode.Uri): Promise<vscode.FileStat> {\n        return this._proxy.$stat(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readDirectory(uri: vscode.Uri): Promise<[string, vscode.FileType][]> {\n        return this._proxy.$readdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    createDirectory(uri: vscode.Uri): Promise<void> {\n        return this._proxy.$mkdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    async readFile(uri: vscode.Uri): Promise<Uint8Array> {\n        return this._proxy.$readFile(uri).then(buff => buff.buffer).catch(ConsumerFileSystem._handleError);\n    }\n    writeFile(uri: vscode.Uri, content: Uint8Array): Promise<void> {\n        return this._proxy.$writeFile(uri, BinaryBuffer.wrap(content)).catch(ConsumerFileSystem._handleError);\n    }\n    delete(uri: vscode.Uri, options?: { recursive?: boolean; useTrash?: boolean; }): Promise<void> {\n        return this._proxy.$delete(uri, { ...{ recursive: false, useTrash: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    rename(oldUri: vscode.Uri, newUri: vscode.Uri, options?: { overwrite?: boolean; }): Promise<void> {\n        return this._proxy.$rename(oldUri, newUri, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    copy(source: vscode.Uri, destination: vscode.Uri, options?: { overwrite?: boolean }): Promise<void> {\n        return this._proxy.$copy(source, destination, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    private static _handleError(err: any): never {\n        // generic error\n        if (!(err instanceof Error)) {\n            throw new FileSystemError(String(err));\n        }\n\n        // no provider (unknown scheme) error\n        if (err.name === 'ENOPRO') {\n            throw FileSystemError.Unavailable(err.message);\n        }\n\n        // file system error\n        switch (err.name) {\n            case files.FileSystemProviderErrorCode.FileExists: throw FileSystemError.FileExists(err.message);\n            case files.FileSystemProviderErrorCode.FileNotFound: throw FileSystemError.FileNotFound(err.message);\n            case files.FileSystemProviderErrorCode.FileNotADirectory: throw FileSystemError.FileNotADirectory(err.message);\n            case files.FileSystemProviderErrorCode.FileIsADirectory: throw FileSystemError.FileIsADirectory(err.message);\n            case files.FileSystemProviderErrorCode.NoPermissions: throw FileSystemError.NoPermissions(err.message);\n            case files.FileSystemProviderErrorCode.Unavailable: throw FileSystemError.Unavailable(err.message);\n\n            default: throw new FileSystemError(err.message, err.name as files.FileSystemProviderErrorCode);\n        }\n    }\n}\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly _proxy: FileSystemMain;\n    private readonly _linkProvider = new FsLinkProvider();\n    private readonly _fsProvider = new Map<number, vscode.FileSystemProvider>();\n    private readonly _usedSchemes = new Set<string>();\n    private readonly _watches = new Map<number, IDisposable>();\n\n    private _linkProviderRegistration?: IDisposable;\n    private _handlePool: number = 0;\n\n    readonly fileSystem: vscode.FileSystem;\n\n    constructor(rpc: RPCProtocol, private _extHostLanguageFeatures: LanguagesExtImpl) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.fileSystem = new ConsumerFileSystem(this._proxy);\n\n        // register used schemes\n        Object.keys(Schemas).forEach(scheme => this._usedSchemes.add(scheme));\n    }\n\n    dispose(): void {\n        if (this._linkProviderRegistration) {\n            this._linkProviderRegistration.dispose();\n        }\n    }\n\n    private _registerLinkProviderIfNotYetRegistered(): void {\n        if (!this._linkProviderRegistration) {\n            this._linkProviderRegistration = this._extHostLanguageFeatures.registerDocumentLinkProvider('*', this._linkProvider, {\n                id: 'theia.fs-ext-impl',\n                name: 'fs-ext-impl'\n            });\n        }\n    }\n\n    registerFileSystemProvider(scheme: string, provider: vscode.FileSystemProvider, options: { isCaseSensitive?: boolean, isReadonly?: boolean } = {}) {\n\n        if (this._usedSchemes.has(scheme)) {\n            throw new Error(`a provider for the scheme '${scheme}' is already registered`);\n        }\n\n        //\n        this._registerLinkProviderIfNotYetRegistered();\n\n        const handle = this._handlePool++;\n        this._linkProvider.add(scheme);\n        this._usedSchemes.add(scheme);\n        this._fsProvider.set(handle, provider);\n\n        let capabilities = files.FileSystemProviderCapabilities.FileReadWrite;\n        if (options.isCaseSensitive) {\n            capabilities += files.FileSystemProviderCapabilities.PathCaseSensitive;\n        }\n        if (options.isReadonly) {\n            capabilities += files.FileSystemProviderCapabilities.Readonly;\n        }\n        if (typeof provider.copy === 'function') {\n            capabilities += files.FileSystemProviderCapabilities.FileFolderCopy;\n        }\n        if (typeof provider.open === 'function' && typeof provider.close === 'function'\n            && typeof provider.read === 'function' && typeof provider.write === 'function'\n        ) {\n            capabilities += files.FileSystemProviderCapabilities.FileOpenReadWriteClose;\n        }\n\n        this._proxy.$registerFileSystemProvider(handle, scheme, capabilities);\n\n        const subscription = provider.onDidChangeFile(event => {\n            const mapped: IFileChangeDto[] = [];\n            for (const e of event) {\n                const { uri: resource, type } = e;\n                if (resource.scheme !== scheme) {\n                    // dropping events for wrong scheme\n                    continue;\n                }\n                let newType: files.FileChangeType | undefined;\n                switch (type) {\n                    case FileChangeType.Changed:\n                        newType = files.FileChangeType.UPDATED;\n                        break;\n                    case FileChangeType.Created:\n                        newType = files.FileChangeType.ADDED;\n                        break;\n                    case FileChangeType.Deleted:\n                        newType = files.FileChangeType.DELETED;\n                        break;\n                    default:\n                        throw new Error('Unknown FileChangeType');\n                }\n                mapped.push({ resource, type: newType });\n            }\n            this._proxy.$onFileSystemChange(handle, mapped);\n        });\n\n        return {\n            dispose: () => {\n                subscription.dispose();\n                this._linkProvider.delete(scheme);\n                this._usedSchemes.delete(scheme);\n                this._fsProvider.delete(handle);\n                this._proxy.$unregisterProvider(handle);\n            }\n        };\n    }\n\n    private static _asIStat(stat: vscode.FileStat): files.Stat {\n        const { type, ctime, mtime, size } = stat;\n        return { type, ctime, mtime, size };\n    }\n\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat> {\n        return Promise.resolve(this._getFsProvider(handle).stat(URI.revive(resource))).then(FileSystemExtImpl._asIStat);\n    }\n\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]> {\n        return Promise.resolve(this._getFsProvider(handle).readDirectory(URI.revive(resource)));\n    }\n\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer> {\n        return Promise.resolve(this._getFsProvider(handle).readFile(URI.revive(resource))).then(data => BinaryBuffer.wrap(data));\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).writeFile(URI.revive(resource), content.buffer, opts));\n    }\n\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).delete(URI.revive(resource), opts));\n    }\n\n    $rename(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).rename(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $copy(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.copy) {\n            throw new Error('FileSystemProvider does not implement \"copy\"');\n        }\n        return Promise.resolve(provider.copy(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $mkdir(handle: number, resource: UriComponents): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).createDirectory(URI.revive(resource)));\n    }\n\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void {\n        const subscription = this._getFsProvider(handle).watch(URI.revive(resource), opts);\n        this._watches.set(session, subscription);\n    }\n\n    $unwatch(_handle: number, session: number): void {\n        const subscription = this._watches.get(session);\n        if (subscription) {\n            subscription.dispose();\n            this._watches.delete(session);\n        }\n    }\n\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.open) {\n            throw new Error('FileSystemProvider does not implement \"open\"');\n        }\n        return Promise.resolve(provider.open(URI.revive(resource), opts));\n    }\n\n    $close(handle: number, fd: number): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.close) {\n            throw new Error('FileSystemProvider does not implement \"close\"');\n        }\n        return Promise.resolve(provider.close(fd));\n    }\n\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.read) {\n            throw new Error('FileSystemProvider does not implement \"read\"');\n        }\n        const data = BinaryBuffer.alloc(length);\n        return Promise.resolve(provider.read(fd, pos, data.buffer, 0, length)).then(read => {\n            return data.slice(0, read); // don't send zeros\n        });\n    }\n\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.write) {\n            throw new Error('FileSystemProvider does not implement \"write\"');\n        }\n        return Promise.resolve(provider.write(fd, pos, data.buffer, 0, data.byteLength));\n    }\n\n    private _getFsProvider(handle: number): vscode.FileSystemProvider {\n        const provider = this._fsProvider.get(handle);\n        if (!provider) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = `no provider`;\n            throw err;\n        }\n        return provider;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range as R, Position as P, Location as L } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport { cloneAndChange } from '../common/objects';\nimport { Position, Range, Location, CallHierarchyItem, URI, TextDocumentShowOptions } from './types-impl';\nimport {\n    fromPosition, fromRange, fromLocation,\n    isModelLocation, toLocation,\n    isModelCallHierarchyItem, fromCallHierarchyItem, toCallHierarchyItem,\n    isModelCallHierarchyIncomingCall, toCallHierarchyIncomingCall,\n    isModelCallHierarchyOutgoingCall, toCallHierarchyOutgoingCall, fromTextDocumentShowOptions\n} from './type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined, ((results: any[] | undefined) => any[] | undefined)?] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL)),\n        createConversionFunction()];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_VSCODE_TO_MONACO = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => vscodeToMonacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUndo'] = ['cursorUndo', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfold'] = ['editor.unfold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.fold'] = ['editor.fold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAll'] = ['editor.foldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllRight'] = ['deleteAllRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.rename'] = ['editor.action.rename', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelSelection'] = ['cancelSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottom'] = ['cursorBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDown'] = ['cursorDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEnd'] = ['cursorEnd', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHome'] = ['cursorHome', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeft'] = ['cursorLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDown'] = ['cursorPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUp'] = ['cursorPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRight'] = ['cursorRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTop'] = ['cursorTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUp'] = ['cursorUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteLeft'] = ['deleteLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteRight'] = ['deleteRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['expandLineSelection'] = ['expandLineSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['outdent'] = ['outdent', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineDown'] = ['scrollLineDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineUp'] = ['scrollLineUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageDown'] = ['scrollPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageUp'] = ['scrollPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['tab'] = ['tab', CONVERT_VSCODE_TO_MONACO];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordRight'] = ['deleteWordRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', CONVERT_VSCODE_TO_MONACO];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeFindWidget'] = ['closeFindWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveSnippet'] = ['leaveSnippet', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeParameterHints'] = ['closeParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', CONVERT_VSCODE_TO_MONACO];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showNext'] = ['history.showNext', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showPrevious'] = ['history.showPrevious', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReference'] = ['goToNextReference', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_MONACO_TO_VSCODE = (args: any | undefined) => {\n        if (!args) {\n            return args;\n        }\n        if (!Array.isArray(args)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return monacoToVscodeArgsConverter(args);\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const argsArray: any[] = args;\n        const argStack: ConversionFunction[] = [];\n        argsArray.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => monacoToVscodeArgsConverter(arg));\n        });\n        if (argsArray) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return createConversionFunction(...argStack)(argsArray);\n        }\n    };\n\n    // vscode-'executeXXX'-like commands\n    mappings['vscode.executeReferenceProvider'] = ['vscode.executeReferenceProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeImplementationProvider'] = ['vscode.executeImplementationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDefinitionProvider'] = ['vscode.executeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDeclarationProvider'] = ['vscode.executeDeclarationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeTypeDefinitionProvider'] = ['vscode.executeTypeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeHoverProvider'] = ['vscode.executeHoverProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDocumentHighlights'] = ['vscode.executeDocumentHighlights', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatDocumentProvider'] = ['vscode.executeFormatDocumentProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatRangeProvider'] = ['vscode.executeFormatRangeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatOnTypeProvider'] = ['vscode.executeFormatOnTypeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareCallHierarchy'] = ['vscode.prepareCallHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideIncomingCalls'] = ['vscode.provideIncomingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideOutgoingCalls'] = ['vscode.provideOutgoingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.open'] = ['vscode.open', CONVERT_VSCODE_TO_MONACO];\n    mappings['vscode.diff'] = ['vscode.diff', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined, mappedResult: ConversionFunction | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args), mappings[id][2] ? (result => mappings[id][2]!(result)) : undefined);\n        } else {\n            return toDo(id, args, undefined);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export type ConversionFunction = ((parameter: any) => any) | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function vscodeToMonacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (CallHierarchyItem.isCallHierarchyItem(value)) {\n                return fromCallHierarchyItem(value);\n            }\n            if (TextDocumentShowOptions.isTextDocumentShowOptions(value)) {\n                return fromTextDocumentShowOptions(value);\n            }\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function monacoToVscodeArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (isModelCallHierarchyItem(value)) {\n                return toCallHierarchyItem(value);\n            }\n            if (isModelCallHierarchyIncomingCall(value)) {\n                return toCallHierarchyIncomingCall(value);\n            }\n            if (isModelCallHierarchyOutgoingCall(value)) {\n                return toCallHierarchyOutgoingCall(value);\n            }\n            if (isModelLocation(value)) {\n                return toLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n\n        });\n    }\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ResourceLabelFormatter } from '@theia/plugin';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LabelServiceExt, LabelServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class LabelServiceExtImpl implements LabelServiceExt {\n    private handle: number = 0;\n    private proxy: LabelServiceMain;\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LABEL_SERVICE_MAIN);\n    }\n\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): Disposable {\n        const handle = this.handle++;\n        this.proxy.$registerResourceLabelFormatter(handle, formatter);\n        return Disposable.create(() => {\n            this.proxy.$unregisterResourceLabelFormatter(handle);\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedOnEnterRule,\n    SerializedIndentationRule,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n    SelectionRange,\n    CallHierarchyDefinition,\n    CallHierarchyReference,\n    ChainedCacheId\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { SelectionRangeProviderAdapter } from './languages/selection-range';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\nimport { CallHierarchyAdapter } from './languages/call-hierarchy';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { DocumentSemanticTokensAdapter, DocumentRangeSemanticTokensAdapter } from './languages/semantic-highlighting';\nimport { isReadonlyArray } from '../common/arrays';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    SelectionRangeProviderAdapter |\n    ColorProviderAdapter |\n    RenameAdapter |\n    CallHierarchyAdapter |\n    DocumentRangeSemanticTokensAdapter |\n    DocumentSemanticTokensAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private readonly diagnostics: Diagnostics;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>, fallbackValue: R): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!adapter) {\n            return fallbackValue;\n        }\n        if (adapter instanceof ctor) {\n            return callback(adapter);\n        }\n        throw new Error('no adapter found');\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (isReadonlyArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern\n            };\n        }\n\n        return undefined;\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(chainedId, token), undefined);\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id), undefined);\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context), undefined);\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id), undefined);\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), undefined);\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token), undefined);\n    }\n    // ### Hover Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined);\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token), []);\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation | undefined> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined);\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined);\n    }\n    // ### Document Formatting Edit end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined);\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined);\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined);\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token), undefined);\n    }\n\n    registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $releaseDocumentLinks(handle: number, ids: number[]): void {\n        this.withAdapter(handle, LinkProviderAdapter, async adapter => adapter.releaseDocumentLinks(ids), undefined);\n    }\n\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value!) : undefined\n        );\n        return this.createDisposable(callId);\n    }\n\n    $provideCodeActions(handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token), undefined);\n    }\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined);\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token), undefined);\n    }\n\n    $releaseCodeLenses(handle: number, ids: number[]): void {\n        this.withAdapter(handle, CodeLensAdapter, async adapter => adapter.releaseCodeLenses(ids), undefined);\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined);\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined);\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), []);\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), []);\n    }\n    // ### Color Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token), undefined);\n    }\n    // ### Folding Range Provider end\n\n    registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SelectionRangeProviderAdapter(provider, this.documents));\n        this.proxy.$registerSelectionRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: theia.CancellationToken): Promise<SelectionRange[][]> {\n        return this.withAdapter(handle, SelectionRangeProviderAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), []);\n    }\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined);\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined);\n    }\n    // ### Rename Provider end\n\n    // ### Call Hierarchy Provider begin\n    registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CallHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerCallHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideRootDefinition(\n        handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<CallHierarchyDefinition | CallHierarchyDefinition[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideRootDefinition(URI.revive(resource), location, token), undefined);\n    }\n\n    $provideCallers(handle: number, definition: CallHierarchyDefinition, token: theia.CancellationToken): Promise<CallHierarchyReference[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallers(definition, token), undefined);\n    }\n\n    $provideCallees(handle: number, definition: CallHierarchyDefinition, token: theia.CancellationToken): Promise<CallHierarchyReference[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallees(definition, token), undefined);\n    }\n    // ### Call Hierarchy Provider end\n\n    // #region semantic coloring\n\n    registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this.nextCallId() : undefined);\n\n        const handle = this.addNewAdapter(new DocumentSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend, eventHandle);\n        let result = this.createDisposable(handle);\n\n        if (eventHandle) {\n            // eslint-disable-next-line no-unsanitized/method\n            const subscription = provider.onDidChangeSemanticTokens!(_ => this.proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null);\n    }\n\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n        this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined);\n    }\n\n    registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider,\n        legend: theia.SemanticTokensLegend, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = this.addNewAdapter(new DocumentRangeSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentRangeSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend);\n        return this.createDisposable(handle);\n    }\n\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null);\n    }\n\n    // #endregion\n}\n\nfunction serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n    ({\n        action: r.action,\n        beforeText: serializeRegExp(r.beforeText),\n        afterText: serializeRegExp(r.afterText)\n    } as SerializedOnEnterRule));\n}\n\nfunction serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nfunction serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as types from '../types-impl';\n\nexport class CallHierarchyAdapter {\n\n    constructor(\n        private readonly provider: theia.CallHierarchyProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideRootDefinition(\n        resource: URI, position: rpc.Position, token: theia.CancellationToken\n    ): Promise<model.CallHierarchyDefinition | model.CallHierarchyDefinition[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const definition = await this.provider.prepareCallHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n\n        return Array.isArray(definition) ? definition.map(item => this.fromCallHierarchyItem(item)) : this.fromCallHierarchyItem(definition);\n    }\n\n    async provideCallers(definition: model.CallHierarchyDefinition, token: theia.CancellationToken): Promise<model.CallHierarchyReference[] | undefined> {\n        const callers = await this.provider.provideCallHierarchyIncomingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callers) {\n            return undefined;\n        }\n\n        return callers.map(item => this.fromCallHierarchyIncomingCall(item));\n    }\n\n    async provideCallees(definition: model.CallHierarchyDefinition, token: theia.CancellationToken): Promise<model.CallHierarchyReference[] | undefined> {\n        const callees = await this.provider.provideCallHierarchyOutgoingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callees) {\n            return undefined;\n        }\n\n        return callees.map(item => this.fromCallHierarchyOutgoingCall(item));\n    }\n\n    private fromCallHierarchyItem(item: theia.CallHierarchyItem): model.CallHierarchyDefinition {\n        return {\n            uri: item.uri,\n            range: this.fromRange(item.range),\n            selectionRange: this.fromRange(item.selectionRange),\n            name: item.name,\n            kind: item.kind,\n            tags: item.tags,\n            data: item.data,\n        };\n    }\n\n    private fromRange(range: theia.Range): model.Range {\n        return {\n            startLineNumber: range.start.line + 1,\n            startColumn: range.start.character + 1,\n            endLineNumber: range.end.line + 1,\n            endColumn: range.end.character + 1,\n        };\n    }\n\n    private toRange(range: model.Range): types.Range {\n        return new types.Range(\n            range.startLineNumber - 1,\n            range.startColumn - 1,\n            range.endLineNumber - 1,\n            range.endColumn - 1,\n        );\n    }\n\n    private toCallHierarchyItem(definition: model.CallHierarchyDefinition): theia.CallHierarchyItem {\n        const item = new types.CallHierarchyItem(\n            Converter.SymbolKind.toSymbolKind(definition.kind),\n            definition.name,\n            definition.detail ? definition.detail : '',\n            URI.revive(definition.uri),\n            this.toRange(definition.range),\n            this.toRange(definition.selectionRange),\n        );\n        item.tags = definition.tags;\n        item.data = definition.data;\n        return item;\n    }\n\n    private fromCallHierarchyIncomingCall(caller: theia.CallHierarchyIncomingCall): model.CallHierarchyReference {\n        return {\n            callerDefinition: this.fromCallHierarchyItem(caller.from),\n            references: caller.fromRanges.map(l => this.fromRange(l))\n        };\n    }\n\n    protected fromCallHierarchyOutgoingCall(caller: theia.CallHierarchyOutgoingCall): model.CallHierarchyReference {\n        return {\n            callerDefinition: this.fromCallHierarchyItem(caller.to),\n            references: caller.fromRanges.map(this.fromRange.bind(this)),\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Selection } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        // TODO cache toDispose and dispose it\n        const toDispose = new DisposableCollection();\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value\n                });\n            }\n        }\n\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static _isCommand(smth: any): smth is theia.Command {\n        return typeof (<theia.Command>smth).command === 'string';\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static _isSelection(obj: any): obj is Selection {\n        return (\n            obj\n            && (typeof obj.selectionStartLineNumber === 'number')\n            && (typeof obj.selectionStartColumn === 'number')\n            && (typeof obj.positionLineNumber === 'number')\n            && (typeof obj.positionColumn === 'number')\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { CompletionItemTag, CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule, ChainedCacheId } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n\n        // The default insert/replace ranges. It's important to compute them\n        // before asynchronously asking the provider for its results. See\n        // https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n        const replacing = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n        const inserting = replacing.with({ end: pos });\n\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n                defaultRange: {\n                    insert: Converter.fromRange(inserting),\n                    replace: Converter.fromRange(replacing)\n                }\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], i, id, inserting, replacing);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    async resolveCompletionItem(chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        const [parentId, id] = chainedId;\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(parentId)?.[id];\n        if (!item) {\n            return undefined;\n        }\n        const resolvedItem = await this.delegate.resolveCompletionItem(item, token);\n        if (!resolvedItem) {\n            return undefined;\n        }\n        return this.convertCompletionItem(resolvedItem, id, parentId);\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, id: number, parentId: number,\n        defaultInserting?: theia.Range, defaultReplacing?: theia.Range): CompletionDto | undefined {\n        if (typeof item.label !== 'string' || item.label.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        let insertText = item.label;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        let range: Completion['range'] | undefined;\n        const itemRange = item.textEdit?.range || item.range;\n        if (Range.isRange(itemRange)) {\n            range = Converter.fromRange(itemRange);\n        } else if (itemRange && (!defaultInserting?.isEqual(itemRange.inserting) || !defaultReplacing?.isEqual(itemRange.replacing))) {\n            range = {\n                insert: Converter.fromRange(itemRange.inserting),\n                replace: Converter.fromRange(itemRange.replacing)\n            };\n        }\n\n        const tags = (!!item.tags?.length || item.deprecated === true)\n            ? [CompletionItemTag.Deprecated]\n            : undefined;\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation: item.documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range,\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters,\n            tags\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, Location, LocationLink } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic collection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnosticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnosticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private isDocumentHighlightArray(array: any): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n\n    releaseCodeLenses(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.DocumentLink.from(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.DocumentLink.from(value);\n            }\n            return undefined;\n        });\n    }\n\n    releaseDocumentLinks(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, infos: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        infos = infos.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (const info of infos) {\n            const element = <DocumentSymbol>{\n                name: info.name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info.kind),\n                containerName: info.containerName,\n                range: Converter.fromRange(info.location.range),\n                selectionRange: Converter.fromRange(info.location.range),\n                children: [],\n                tags: info.tags && info.tags.length > 0 ? info.tags.map(Converter.fromSymbolTag) : [],\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { Position, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/standalone/0.19.x/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1107-L1151\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport * as types from '../types-impl';\n\nexport class SelectionRangeProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.SelectionRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideSelectionRanges(resource: URI, position: monaco.IPosition[], token: theia.CancellationToken): Promise<model.SelectionRange[][]> {\n        const documentData = this.documents.getDocumentData(resource);\n\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const positions = position.map(pos => Converter.toPosition(pos));\n\n        return Promise.resolve(this.provider.provideSelectionRanges(document, positions, token)).then(allProviderRanges => {\n            if (!Array.isArray(allProviderRanges) || allProviderRanges.length === 0) {\n                return [];\n            }\n\n            if (allProviderRanges.length !== positions.length) {\n                return [];\n            }\n\n            const allResults: model.SelectionRange[][] = [];\n            for (let i = 0; i < positions.length; i++) {\n                const oneResult: model.SelectionRange[] = [];\n                allResults.push(oneResult);\n\n                let last: types.Position | theia.Range = positions[i];\n                let selectionRange = allProviderRanges[i];\n\n                while (true) {\n                    if (!selectionRange.range.contains(last)) {\n                        return Promise.reject(new Error('INVALID selection range, must contain the previous range'));\n                    }\n                    oneResult.push(Converter.fromSelectionRange(selectionRange));\n                    if (!selectionRange.parent) {\n                        break;\n                    }\n                    last = selectionRange.range;\n                    selectionRange = selectionRange.parent;\n                }\n            }\n            return allResults;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L692-L869\n\n/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { SemanticTokens, SemanticTokensEdit, SemanticTokensEdits } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport { toRange } from '../type-converters';\nimport { encodeSemanticTokensDto } from '../../common/semantic-tokens-dto';\nimport { Range } from '../../common/plugin-api-rpc-model';\n\nclass SemanticTokensPreviousResult {\n    constructor(\n        public readonly resultId: string | undefined,\n        public readonly tokens?: Uint32Array,\n    ) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[]; };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[]; };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[]; };\n\ntype ProvidedSemanticTokens = theia.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = theia.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nexport class DocumentSemanticTokensAdapter {\n\n    private readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n    private _nextResultId = 1;\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentSemanticTokensProvider,\n    ) {\n        this._previousResults = new Map<number, SemanticTokensPreviousResult>();\n    }\n\n    async provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n        let value: ProvidedSemanticTokens | ProvidedSemanticTokensEdits | null | undefined;\n        if (previousResult && typeof previousResult.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function') {\n            value = await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token);\n        } else {\n            value = await this._provider.provideDocumentSemanticTokens(doc, token);\n        }\n        if (previousResult) {\n            this._previousResults.delete(previousResultId);\n        }\n        if (!value) {\n            return null;\n        }\n        value = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n        return this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n    }\n\n    async releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n        this._previousResults.delete(semanticColoringResultId);\n    }\n\n    private static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n                return v;\n            }\n            return new SemanticTokens(new Uint32Array(v.data), v.resultId);\n        } else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n                return v;\n            }\n            return new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ?\n                new Uint32Array(edit.data) : edit.data)), v.resultId);\n        }\n        return v;\n    }\n\n    private static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n        return v && !!((v as ProvidedSemanticTokens).data);\n    }\n\n    private static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is theia.SemanticTokens {\n        return (v.data instanceof Uint32Array);\n    }\n\n    private static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n        return v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n    }\n\n    private static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is theia.SemanticTokensEdits {\n        for (const edit of v.edits) {\n            if (!(edit.data instanceof Uint32Array)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: theia.SemanticTokens | theia.SemanticTokensEdits):\n        theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n            return newResult;\n        }\n        if (!previousResult || !previousResult.tokens) {\n            return newResult;\n        }\n        const oldData = previousResult.tokens;\n        const oldLength = oldData.length;\n        const newData = newResult.data;\n        const newLength = newData.length;\n\n        let commonPrefixLength = 0;\n        const maxCommonPrefixLength = Math.min(oldLength, newLength);\n        while (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n            commonPrefixLength++;\n        }\n\n        if (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n            // complete overlap!\n            return new SemanticTokensEdits([], newResult.resultId);\n        }\n\n        let commonSuffixLength = 0;\n        const maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n        while (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n            commonSuffixLength++;\n        }\n\n        return new SemanticTokensEdits([{\n            start: commonPrefixLength,\n            deleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n            data: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n        }], newResult.resultId);\n    }\n\n    private _send(value: theia.SemanticTokens | theia.SemanticTokensEdits, original: theia.SemanticTokens | theia.SemanticTokensEdits): BinaryBuffer | null {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n            const myId = this._nextResultId++;\n            this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'full',\n                data: value.data\n            });\n        }\n\n        if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n            const myId = this._nextResultId++;\n            if (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n                // store the original\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n            } else {\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n            }\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'delta',\n                deltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n            });\n        }\n\n        return null;\n    }\n}\n\nexport class DocumentRangeSemanticTokensAdapter {\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentRangeSemanticTokensProvider,\n    ) {\n    }\n\n    async provideDocumentRangeSemanticTokens(resource: URI, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const value = await this._provider.provideDocumentRangeSemanticTokens(doc, toRange(range), token);\n        if (!value) {\n            return null;\n        }\n        return this._send(value);\n    }\n\n    private _send(value: theia.SemanticTokens): BinaryBuffer | null {\n        return encodeSemanticTokensDto({\n            id: 0,\n            type: 'full',\n            data: value.data\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isLocationArray(array: any): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isDefinitionLinkArray(array: any): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MarkdownString as IMarkdownString } from '../common/plugin-api-rpc-model';\n\nexport class MarkdownString {\n\n    value: string;\n    isTrusted?: boolean;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(value: string): MarkdownString {\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownString {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(code: string, language: string = ''): MarkdownString {\n        this.value += '\\n```';\n        this.value += language;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isMarkdownString(thing: any): thing is IMarkdownString {\n    if (thing instanceof MarkdownString) {\n        return true;\n    } else if (thing && typeof thing === 'object') {\n        return typeof (<MarkdownString>thing).value === 'string'\n            && (typeof (<MarkdownString>thing).isTrusted === 'boolean' || (<MarkdownString>thing).isTrusted === undefined);\n    }\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: MessageItem[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push({ title: item });\n            } else {\n                actions.push({ title: item.title, isCloseAffordance: item.isCloseAffordance });\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                    if ('detail' in optionsOrFirstItem) {\n                        options.detail = optionsOrFirstItem.detail;\n                    }\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Breakpoint } from '../../../common/plugin-api-rpc-model';\nimport { DebugConfigurationProviderTriggerKind, DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../../common/plugin-protocol';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { CommandRegistryImpl } from '../../command-registry';\nimport { ConnectionImpl } from '../../../common/connection';\nimport {\n    Disposable, Breakpoint as BreakpointExt, SourceBreakpoint, FunctionBreakpoint, Location, Range,\n    DebugAdapterServer, DebugAdapterExecutable, DebugAdapterNamedPipeServer, DebugAdapterInlineImplementation\n} from '../../types-impl';\nimport { resolveDebugAdapterExecutable } from './plugin-debug-adapter-executable-resolver';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { connectInlineDebugAdapter, connectPipeDebugAdapter, connectSocketDebugAdapter, startDebugAdapter } from './plugin-debug-adapter-starter';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\nimport { DebugAdapter } from '@theia/debug/lib/node/debug-model';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n// TODO: rename file to `debug-ext.ts`\n\n/**\n * It is supposed to work at node only.\n */\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n\n    // providers by type (initial)\n    private configurationProviders = new Map<string, Set<theia.DebugConfigurationProvider>>();\n    // providers by type (dynamic)\n    private dynamicConfigurationProviders = new Map<string, Set<theia.DebugConfigurationProvider>>();\n\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n\n    private connectionExt: ConnectionImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n\n    private readonly _breakpoints = new Map<string, theia.Breakpoint>();\n\n    get breakpoints(): theia.Breakpoint[] {\n        return [...this._breakpoints.values()];\n    }\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        const added: theia.Breakpoint[] = [];\n        for (const b of breakpoints) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.set(b.id, b);\n            added.push(b);\n        }\n        if (added.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added, removed: [], changed: [] });\n            this.proxy.$addBreakpoints(added);\n        }\n    }\n\n    removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        const removed: theia.Breakpoint[] = [];\n        const removedIds: string[] = [];\n        for (const b of breakpoints) {\n            if (!this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.delete(b.id);\n            removed.push(b);\n            removedIds.push(b.id);\n        }\n        if (removed.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added: [], removed, changed: [] });\n            this.proxy.$removeBreakpoints(removedIds);\n        }\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration, options);\n    }\n\n    stopDebugging(session?: theia.DebugSession): PromiseLike<void> {\n        return this.proxy.$stopDebugging(session?.id);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider, trigger: theia.DebugConfigurationProviderTriggerKind): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}, trigger: ${trigger}`);\n        const providersByTriggerKind = trigger === DebugConfigurationProviderTriggerKind.Initial ? this.configurationProviders : this.dynamicConfigurationProviders;\n        let providers = providersByTriggerKind.get(debugType);\n        if (!providers) {\n            providersByTriggerKind.set(debugType, providers = new Set());\n        }\n        providers.add(provider);\n\n        return Disposable.create(() => {\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            const providers = providersByTriggerKind.get(debugType);\n            if (providers) {\n                providers.delete(provider);\n                if (providers.size === 0) {\n                    providersByTriggerKind.delete(debugType);\n                }\n            }\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): Promise<void> {\n        const a: theia.Breakpoint[] = [];\n        const r: theia.Breakpoint[] = [];\n        const c: theia.Breakpoint[] = [];\n        for (const b of added) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            const bExt = this.toBreakpointExt(b);\n            if (bExt) {\n                this._breakpoints.set(bExt.id, bExt);\n                a.push(bExt);\n            }\n        }\n        for (const id of removed) {\n            const bExt = this._breakpoints.get(id);\n            if (bExt) {\n                this._breakpoints.delete(id);\n                r.push(bExt);\n            }\n        }\n        for (const b of changed) {\n            const bExt = this._breakpoints.get(b.id);\n            if (bExt) {\n                const { functionName, location, enabled, condition, hitCondition, logMessage } = b;\n                if (bExt instanceof FunctionBreakpoint && functionName) {\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, functionName });\n                } else if (bExt instanceof SourceBreakpoint && location) {\n                    const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, location: new Location(URI.revive(location.uri), range) });\n                }\n                c.push(bExt);\n            }\n        }\n        this.onDidChangeBreakpointsEmitter.fire({ added: a, removed: r, changed: c });\n    }\n\n    protected toBreakpointExt({ functionName, location, enabled, condition, hitCondition, logMessage }: Breakpoint): BreakpointExt | undefined {\n        if (location) {\n            const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n            return new SourceBreakpoint(new Location(URI.revive(location.uri), range), enabled, condition, hitCondition, logMessage);\n        }\n        if (functionName) {\n            return new FunctionBreakpoint(functionName!, enabled, condition, hitCondition, logMessage);\n        }\n        return undefined;\n    }\n\n    async $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            configuration: debugConfiguration,\n            customRequest: async (command: string, args?: any) => {\n                const response = await this.proxy.$customRequest(sessionId, command, args);\n                if (response && response.success) {\n                    return response.body;\n                }\n                return Promise.reject(new Error(response.message ?? 'custom request failed'));\n            }\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createDebugAdapter(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(connection);\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    async $provideDebugConfigurations(debugType: string, workspaceFolderUri: string | undefined, dynamic: boolean = false): Promise<theia.DebugConfiguration[]> {\n        let result: theia.DebugConfiguration[] = [];\n\n        const providers = dynamic ? this.dynamicConfigurationProviders.get(debugType) : this.configurationProviders.get(debugType);\n        if (providers) {\n            for (const provider of providers) {\n                if (provider.provideDebugConfigurations) {\n                    result = result.concat(await provider.provideDebugConfigurations(this.toWorkspaceFolder(workspaceFolderUri)) || []);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    async $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolderUri: string | undefined): Promise<theia.DebugConfiguration | undefined> {\n        let current = debugConfiguration;\n\n        for (const providers of [\n            this.configurationProviders.get(debugConfiguration.type),\n            this.dynamicConfigurationProviders.get(debugConfiguration.type),\n            this.configurationProviders.get('*')\n        ]) {\n            if (providers) {\n                for (const provider of providers) {\n                    if (provider.resolveDebugConfiguration) {\n                        try {\n                            const next = await provider.resolveDebugConfiguration(this.toWorkspaceFolder(workspaceFolderUri), current);\n                            if (next) {\n                                current = next;\n                            } else {\n                                return current;\n                            }\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                }\n            }\n        }\n\n        return current;\n    }\n\n    async $resolveDebugConfigurationWithSubstitutedVariables(debugConfiguration: theia.DebugConfiguration, workspaceFolderUri: string | undefined):\n        Promise<theia.DebugConfiguration | undefined> {\n        let current = debugConfiguration;\n\n        for (const providers of [\n            this.configurationProviders.get(debugConfiguration.type),\n            this.dynamicConfigurationProviders.get(debugConfiguration.type),\n            this.configurationProviders.get('*')\n        ]) {\n            if (providers) {\n                for (const provider of providers) {\n                    if (provider.resolveDebugConfigurationWithSubstitutedVariables) {\n                        try {\n                            const next = await provider.resolveDebugConfigurationWithSubstitutedVariables(this.toWorkspaceFolder(workspaceFolderUri), current);\n                            if (next) {\n                                current = next;\n                            } else {\n                                return current;\n                            }\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                }\n            }\n        }\n\n        return current;\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createDebugAdapter(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<DebugAdapter> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterServer.is(descriptor)) {\n                    return connectSocketDebugAdapter(descriptor);\n                } else if (DebugAdapterExecutable.is(descriptor)) {\n                    return startDebugAdapter(descriptor);\n                } else if (DebugAdapterNamedPipeServer.is(descriptor)) {\n                    return connectPipeDebugAdapter(descriptor);\n                } else if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return connectSocketDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return startDebugAdapter(executable);\n        }\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\n\n/**\n * Resolves [DebugAdapterExecutable](#DebugAdapterExecutable) based on contribution.\n */\nexport async function resolveDebugAdapterExecutable(\n    pluginPath: string, debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n    const info = toPlatformInfo(debuggerContribution);\n    let program = (info && info.program || debuggerContribution.program);\n    if (!program) {\n        return undefined;\n    }\n    program = path.join(pluginPath, program);\n    const programArgs = info && info.args || debuggerContribution.args || [];\n    let runtime = info && info.runtime || debuggerContribution.runtime;\n    if (runtime && runtime.indexOf('./') === 0) {\n        runtime = path.join(pluginPath, runtime);\n    }\n    const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n    const command = runtime ? runtime : program;\n    const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n    return {\n        command,\n        args\n    };\n}\n\nfunction toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n    if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n        return executable.winx86 || executable.win || executable.windows;\n    }\n    if (isWindows) {\n        return executable.win || executable.windows;\n    }\n    if (isOSX) {\n        return executable.osx;\n    }\n    return executable.linux;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/node/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/node/debug-model';\nimport { Channel } from '@theia/debug/lib/common/debug-service';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl {\n    readonly type: string;\n    readonly name: string;\n    readonly configuration: theia.DebugConfiguration;\n\n    constructor(\n        readonly debugAdapter: DebugAdapter,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, debugAdapter);\n\n        this.type = theiaSession.type;\n        this.name = theiaSession.name;\n        this.configuration = theiaSession.configuration;\n    }\n\n    async start(channel: Channel): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(JSON.parse(message));\n            }\n        }\n    }\n\n    protected write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(JSON.parse(message));\n        }\n        super.write(message);\n    }\n\n    protected onDebugAdapterExit(): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(undefined, undefined);\n        }\n        super.onDebugAdapterExit();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as net from 'net';\nimport { ChildProcess, spawn, fork, ForkOptions } from 'child_process';\nimport { DebugAdapter } from '@theia/debug/lib/node/debug-model';\nimport { DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer } from '../../types-impl';\nimport { InlineDebugAdapter } from '@theia/debug/lib/node/inline-debug-adapter';\nimport { ProcessDebugAdapter, SocketDebugAdapter } from '@theia/debug/lib/node/stream-debug-adapter';\nconst isElectron = require('is-electron');\n\n/**\n * Starts debug adapter process.\n */\nexport function startDebugAdapter(executable: DebugAdapterExecutable): DebugAdapter {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n    if (executable.options) {\n        options.cwd = executable.options.cwd;\n\n        // The additional environment of the executed program or shell. If omitted\n        // the parent process' environment is used. If provided it is merged with\n        // the parent process' environment.\n        options.env = Object.assign({}, process.env);\n        Object.assign(options.env, executable.options.env);\n    }\n\n    let childProcess: ChildProcess;\n    const { command, args } = executable;\n    if (command === 'node') {\n        if (Array.isArray(args) && args.length > 0) {\n            const forkOptions: ForkOptions = {\n                env: options.env,\n                // When running in Electron, fork will automatically add ELECTRON_RUN_AS_NODE=1 to the env,\n                // but this will cause issues when debugging Electron apps, so we'll remove it.\n                execArgv: isElectron()\n                    ? ['-e', 'delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])']\n                    : [],\n                silent: true\n            };\n            if (options.cwd) {\n                forkOptions.cwd = options.cwd;\n            }\n            options.stdio.push('ipc');\n            forkOptions.stdio = options.stdio;\n            childProcess = fork(args[0], args.slice(1), forkOptions);\n        } else {\n            throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n        }\n    } else {\n        childProcess = spawn(command, args, options);\n    }\n\n    return new ProcessDebugAdapter(childProcess);\n}\n\n/**\n * Connects to a remote debug server.\n */\nexport function connectSocketDebugAdapter(server: DebugAdapterServer): SocketDebugAdapter {\n    const socket = net.createConnection(server.port, server.host);\n    return new SocketDebugAdapter(socket);\n}\n\nexport function connectPipeDebugAdapter(adapter: DebugAdapterNamedPipeServer): SocketDebugAdapter {\n    const socket = net.createConnection(adapter.path);\n    return new SocketDebugAdapter(socket);\n}\n\nexport function connectInlineDebugAdapter(adapter: DebugAdapterInlineImplementation): InlineDebugAdapter {\n    return new InlineDebugAdapter(adapter.implementation);\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const id = new Deferred<string>();\n        const tokenSource = new CancellationTokenSource();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item)}, tokenSource.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    protected mapLocation(location: ProgressLocation | { viewId: string }): string | undefined {\n        if (typeof location === 'object') {\n            return location.viewId;\n        }\n\n        switch (location) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryMain, PluginInfo, OutputChannelRegistryExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        } else {\n            return new OutputChannelImpl(name, this.proxy, pluginInfo);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, private proxy: OutputChannelRegistryMain, private readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocus: boolean | undefined): void {\n        this.validate();\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    private validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nconst separator = '/';\n\nexport function normalize(path: string): string {\n    if (!path || path.length === 0) {\n        return '.';\n    }\n\n    const isAbsolute = path.charCodeAt(0) === 47;\n    const trailingSlash = path.charCodeAt(path.length - 1) === 47;\n\n    const parts = path.split(separator);\n\n    const result: string[] = [];\n\n    for (let i = 0; i < parts.length; i++) {\n        const p = parts[i];\n        if (p === '') {\n            continue;\n        }\n\n        if (p === '..') {\n            result.pop();\n            continue;\n        }\n\n        result.push(p);\n    }\n\n    if (result.length === 0) {\n        return '.';\n    }\n\n    path = result.join(separator);\n    if (isAbsolute) {\n        path = '/' + path;\n    }\n\n    if (trailingSlash) {\n        path += '/';\n    }\n\n    return path;\n}\n\nexport function join(...paths: string[]): string {\n    if (paths.length === 0) {\n        return '.';\n    }\n\n    const path = paths.join(separator);\n    return normalize(path);\n}\n","/********************************************************************************\n * Copyright (C) 2018-2022 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* tslint:disable:typedef */\n\nimport type * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationError, CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType,\n    DebugConfigurationProviderTriggerKind,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DebugConsoleMode,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    CompletionItemTag,\n    Location,\n    LogLevel,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    CodeActionTriggerKind,\n    TextDocumentSaveReason,\n    CodeAction,\n    TreeItem,\n    TreeItemCollapsibleState,\n    DocumentSymbol,\n    SymbolTag,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    CustomExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    Task2,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    DebugAdapterNamedPipeServer,\n    DebugAdapterInlineImplementation,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    SelectionRange,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    UIKind,\n    FileSystemError,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    CommentMode,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    TimelineItem,\n    EnvironmentVariableMutatorType,\n    SemanticTokensLegend,\n    SemanticTokensBuilder,\n    SemanticTokens,\n    SemanticTokensEdits,\n    SemanticTokensEdit,\n    ColorThemeKind,\n    SourceControlInputBoxValidationType,\n    URI,\n    FileDecoration,\n    ExtensionMode\n} from './types-impl';\nimport { AuthenticationExtImpl } from './authentication-ext';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo, fromGlobPattern } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { score } from '@theia/callhierarchy/lib/common/language-selector';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { ConnectionImpl } from '../common/connection';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './node/debug/debug';\nimport { FileSystemExtImpl } from './file-system-ext-impl';\nimport { QuickPick, QuickPickItem, ResourceLabelFormatter, LineChange } from '@theia/plugin';\nimport { ScmExtImpl } from './scm';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\nimport { ExtHostFileSystemEventService } from './file-system-event-service-ext-impl';\nimport { LabelServiceExtImpl } from '../plugin/label-service';\nimport { TimelineExtImpl } from './timeline';\nimport { ThemingExtImpl } from './theming';\nimport { CommentsExtImpl } from './comments';\nimport { CustomEditorsExtImpl } from './custom-editors';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl\n): PluginAPIFactory {\n\n    const authenticationExt = rpc.set(MAIN_RPC_CONTEXT.AUTHENTICATION_EXT, new AuthenticationExtImpl(rpc));\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc, terminalExt));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionImpl(rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN)));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc, languagesExt));\n    const extHostFileSystemEvent = rpc.set(MAIN_RPC_CONTEXT.ExtHostFileSystemEventService, new ExtHostFileSystemEventService(rpc, editorsAndDocumentsExt));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    const labelServiceExt = rpc.set(MAIN_RPC_CONTEXT.LABEL_SERVICE_EXT, new LabelServiceExtImpl(rpc));\n    const timelineExt = rpc.set(MAIN_RPC_CONTEXT.TIMELINE_EXT, new TimelineExtImpl(rpc, commandRegistry));\n    const themingExt = rpc.set(MAIN_RPC_CONTEXT.THEMING_EXT, new ThemingExtImpl(rpc));\n    const commentsExt = rpc.set(MAIN_RPC_CONTEXT.COMMENTS_EXT, new CommentsExtImpl(rpc, commandRegistry, documents));\n    const customEditorExt = rpc.set(MAIN_RPC_CONTEXT.CUSTOM_EDITORS_EXT, new CustomEditorsExtImpl(rpc, documents, webviewExt, workspaceExt));\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const authentication: typeof theia.authentication = {\n            registerAuthenticationProvider(provider: theia.AuthenticationProvider): theia.Disposable {\n                return authenticationExt.registerAuthenticationProvider(provider);\n            },\n            get onDidChangeAuthenticationProviders(): theia.Event<theia.AuthenticationProvidersChangeEvent> {\n                return authenticationExt.onDidChangeAuthenticationProviders;\n            },\n            getProviderIds(): Thenable<ReadonlyArray<string>> {\n                return authenticationExt.getProviderIds();\n            },\n            get providerIds(): string[] {\n                return authenticationExt.providerIds;\n            },\n            get providers(): ReadonlyArray<theia.AuthenticationProviderInformation> {\n                return authenticationExt.providers;\n            },\n            getSession(providerId: string, scopes: string[], options: theia.AuthenticationGetSessionOptions) {\n                return authenticationExt.getSession(plugin, providerId, scopes, options as any);\n            },\n            logout(providerId: string, sessionId: string): Thenable<void> {\n                return authenticationExt.logout(providerId, sessionId);\n            },\n            get onDidChangeSessions(): theia.Event<theia.AuthenticationSessionsChangeEvent> {\n                return authenticationExt.onDidChangeSessions;\n            }\n        };\n        const commands: typeof theia.commands = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerCommand(command: theia.CommandDescription | string, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                // use of the ID when registering commands\n                if (typeof command === 'string') {\n                    const rawCommands = plugin.rawModel.contributes && plugin.rawModel.contributes.commands;\n                    const contributedCommands = rawCommands ? Array.isArray(rawCommands) ? rawCommands : [rawCommands] : undefined;\n                    if (handler && contributedCommands && contributedCommands.some(item => item.command === command)) {\n                        return commandRegistry.registerHandler(command, handler, thisArg);\n                    }\n                    return commandRegistry.registerCommand({ id: command }, handler, thisArg);\n                }\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand({ id: command }, (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                });\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | URI,\n                columnOrOptions?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: URI = documentArg instanceof URI ? documentArg : documentArg.uri;\n                if (typeof columnOrOptions === 'number') {\n                    documentOptions = {\n                        viewColumn: columnOrOptions\n                    };\n                } else if (columnOrOptions && (columnOrOptions.preserveFocus || columnOrOptions.preview || columnOrOptions.selection || columnOrOptions.viewColumn)) {\n                    documentOptions = {\n                        ...columnOrOptions\n                    };\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            showQuickPick(items: any, options: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                return quickOpenExt.showQuickPick(items, options, token);\n            },\n            createQuickPick<T extends QuickPickItem>(): QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<URI | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                return quickOpenExt.showInput(options, token);\n            },\n            createStatusBarItem(alignment?: theia.StatusBarAlignment, priority?: number): theia.StatusBarItem {\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority);\n            },\n            createOutputChannel(name: string): theia.OutputChannel {\n                return outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin));\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            registerCustomEditorProvider(viewType: string,\n                provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider,\n                options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean } = {}): theia.Disposable {\n                return customEditorExt.registerCustomEditorProvider(viewType, provider, options, plugin);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | theia.PseudoTerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: { treeDataProvider: theia.TreeDataProvider<T> }): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerFileDecorationProvider(provider: theia.FileDecorationProvider): theia.Disposable {\n                return decorationsExt.registerFileDecorationProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            },\n            registerTerminalLinkProvider(provider: theia.TerminalLinkProvider): void {\n                /* NOOP. To be implemented at later stage */\n            },\n            get activeColorTheme(): theia.ColorTheme {\n                return themingExt.activeColorTheme;\n            },\n            onDidChangeActiveColorTheme(listener, thisArg?, disposables?) {\n                return themingExt.onDidChangeActiveColorTheme(listener, thisArg, disposables);\n            }\n        };\n\n        const workspace: typeof theia.workspace = {\n\n            get fs(): theia.FileSystem {\n                return fileSystemExt.fileSystem;\n            },\n\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get workspaceFile(): URI | undefined {\n                return workspaceExt.workspaceFile;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidCreateFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidCreateFile(listener, thisArg, disposables),\n            onDidDeleteFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidDeleteFile(listener, thisArg, disposables),\n            onDidRenameFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidRenameFile(listener, thisArg, disposables),\n            onWillCreateFiles: (listener: (e: theia.FileWillCreateEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillCreateFileEvent(plugin)(listener, thisArg, disposables),\n            onWillDeleteFiles: (listener: (e: theia.FileWillDeleteEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillDeleteFileEvent(plugin)(listener, thisArg, disposables),\n            onWillRenameFiles: (listener: (e: theia.FileWillRenameEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillRenameFileEvent(plugin)(listener, thisArg, disposables),\n            getConfiguration(section?, resource?): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: URI;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = URI.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof URI) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            createFileSystemWatcher: (pattern, ignoreCreate, ignoreChange, ignoreDelete): theia.FileSystemWatcher =>\n                extHostFileSystemEvent.createFileSystemWatcher(fromGlobPattern(pattern), ignoreCreate, ignoreChange, ignoreDelete),\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<URI[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n                callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n                return workspaceExt.findTextInFiles(query, optionsOrCallback, callbackOrToken, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            registerResourceLabelFormatter(formatter: ResourceLabelFormatter): theia.Disposable {\n                return labelServiceExt.$registerResourceLabelFormatter(formatter);\n            },\n            registerTimelineProvider(scheme: string | string[], provider: theia.TimelineProvider): theia.Disposable {\n                return timelineExt.registerTimelineProvider(plugin, scheme, provider);\n            }\n        };\n\n        const onDidChangeLogLevel = new Emitter<theia.LogLevel>();\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get language(): string { return envExt.language; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            get uiKind(): theia.UIKind { return envExt.uiKind; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            },\n            get logLevel(): theia.LogLevel { return LogLevel.Info; },\n            get onDidChangeLogLevel(): theia.Event<theia.LogLevel> { return onDidChangeLogLevel.event; }\n        });\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri.scheme, document.uri.path, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: URI) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerDocumentLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider): theia.Disposable {\n                return languagesExt.registerSelectionRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentRangeSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n                return languagesExt.registerCallHierarchyProvider(selector, provider);\n            }\n        };\n\n        const plugins: typeof theia.plugins = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(\n                debugType: string,\n                provider: theia.DebugConfigurationProvider,\n                triggerKind?: theia.DebugConfigurationProviderTriggerKind\n            ): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider, triggerKind || DebugConfigurationProviderTriggerKind.Initial);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(\n                folder: theia.WorkspaceFolder | undefined,\n                nameOrConfiguration: string | theia.DebugConfiguration,\n                parentSessionOrOptions?: theia.DebugSession | theia.DebugSessionOptions\n            ): Thenable<boolean> {\n                if (!parentSessionOrOptions || (typeof parentSessionOrOptions === 'object' && 'configuration' in parentSessionOrOptions)) {\n                    return debugExt.startDebugging(folder, nameOrConfiguration, { parentSession: parentSessionOrOptions });\n                }\n                return debugExt.startDebugging(folder, nameOrConfiguration, parentSessionOrOptions || {});\n            },\n            stopDebugging(session?: theia.DebugSession): Thenable<void> {\n                return debugExt.stopDebugging(session);\n            },\n            addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: URI): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comments: typeof theia.comments = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return commentsExt.createCommentController(plugin, id, label);\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            authentication,\n            commands,\n            comments,\n            window,\n            workspace,\n            env,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: URI,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DebugConsoleMode,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            Location,\n            LogLevel,\n            DiagnosticTag,\n            CompletionItemTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            CodeActionTriggerKind,\n            TextDocumentSaveReason,\n            CodeAction,\n            TreeItem,\n            TreeItem2: TreeItem,\n            TreeItemCollapsibleState,\n            SymbolKind,\n            SymbolTag,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            CustomExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            Task2,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            DebugAdapterNamedPipeServer,\n            DebugAdapterInlineImplementation,\n            DebugConfigurationProviderTriggerKind,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            SelectionRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            UIKind,\n            FileSystemError,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode,\n            CallHierarchyItem,\n            CallHierarchyIncomingCall,\n            CallHierarchyOutgoingCall,\n            TimelineItem,\n            EnvironmentVariableMutatorType,\n            SemanticTokensLegend,\n            SemanticTokensBuilder,\n            SemanticTokens,\n            SemanticTokensEdits,\n            SemanticTokensEdit,\n            ColorThemeKind,\n            SourceControlInputBoxValidationType,\n            FileDecoration,\n            CancellationError,\n            ExtensionMode\n        };\n    };\n}\n\nexport enum ExtensionKind {\n    UI = 1,\n    Workspace = 2\n}\n\n/**\n * Represents a Theia plugin as well as a VSCode extension.\n */\nexport interface ExtensionPlugin<T> extends theia.Plugin<T> {\n    /**\n     * The uri of the directory containing the extension. Same as {@linkcode theia.Plugin.pluginUri}.\n     */\n    readonly extensionUri: theia.Uri;\n\n    /**\n     * The absolute file path of the directory containing this extension.\n     * Same as {@linkcode theia.Plugin.pluginPath}.\n     */\n    readonly extensionPath: string;\n\n    /**\n     * The extension kind describes if an extension runs where the UI runs\n     * or if an extension runs where the remote extension host runs. The extension kind\n     * is defined in the `package.json`-file of extensions. When no remote extension host exists,\n     * the value is {@linkcode ExtensionKind.UI}.\n     */\n    extensionKind: ExtensionKind;\n}\n\nexport class Plugin<T> implements theia.Plugin<T> {\n    id: string;\n    pluginPath: string;\n    pluginUri: theia.Uri;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n\n    constructor(protected readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.pluginUri = URI.parse(plugin.pluginUri);\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n    }\n\n    get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n\nexport class PluginExt<T> extends Plugin<T> implements ExtensionPlugin<T> {\n    extensionPath: string;\n    extensionUri: theia.Uri;\n    extensionKind: ExtensionKind;\n\n    constructor(protected readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        super(pluginManager, plugin);\n\n        this.extensionPath = this.pluginPath;\n        this.extensionUri = this.pluginUri;\n        this.extensionKind = ExtensionKind.UI; // stub as a local extension (not running on a remote workspace)\n    }\n\n    get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport { URI } from './types-impl';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | URI | {\n    light: string | URI,\n    dark: string | URI\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | URI, plugin: Plugin): string {\n        arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    NotificationMain,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams,\n    TerminalServiceExt\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata, PluginJsonValidationContribution } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { join } from './path';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy, GlobalState } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { WebviewsExtImpl } from './webviews';\nimport { URI as Uri } from './types-impl';\nimport { SecretsExtImpl, SecretStorageExt } from '../plugin/secrets-ext';\nimport { PluginExt } from './plugin-context';\n\nexport interface PluginHost {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void | Promise<void>;\n}\n\ninterface StopOptions {\n    /**\n     * if terminating then stopping will ignore all errors,\n     * since the main side is already gone and any requests are likely to fail\n     * or hang\n     */\n    terminating: boolean\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug',\n        'onDebugInitialConfigurations',\n        'onDebugResolve',\n        'onDebugAdapterProtocolTracker',\n        'onDebugDynamicConfigurations',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onWebviewPanel',\n        'onFileSystem',\n        'onCustomEditor',\n        'onStartupFinished'\n    ]);\n\n    private configStorage: ConfigStorage | undefined;\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    private notificationMain: NotificationMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected jsonValidation: PluginJsonValidationContribution[] = [];\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly terminalService: TerminalServiceExt,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly secrets: SecretsExtImpl,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n        this.notificationMain = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            return this.stopAll();\n        }\n        this.registry.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        return this.stopPlugin(pluginId, plugin);\n    }\n\n    async terminate(): Promise<void> {\n        return this.stopAll({ terminating: true });\n    }\n\n    protected async stopAll(options: StopOptions = { terminating: false }): Promise<void> {\n        const promises = [];\n        for (const [id, plugin] of this.activatedPlugins) {\n            promises.push(this.stopPlugin(id, plugin, options));\n        }\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginContextsMap.clear();\n        await Promise.all(promises);\n    }\n\n    protected async stopPlugin(id: string, plugin: ActivatedPlugin, options: StopOptions = { terminating: false }): Promise<void> {\n        let result;\n        if (plugin.stopFn) {\n            try {\n                result = plugin.stopFn();\n            } catch (e) {\n                if (!options.terminating) {\n                    console.error(`[${id}]: failed to stop:`, e);\n                }\n            }\n        }\n\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            for (const subscription of pluginContext.subscriptions) {\n                try {\n                    subscription.dispose();\n                } catch (e) {\n                    if (!options.terminating) {\n                        console.error(`[${id}]: failed to dispose subscription:`, e);\n                    }\n                }\n            }\n        }\n\n        try {\n            await result;\n        } catch (e) {\n            if (!options.terminating) {\n                console.error(`[${id}]: failed to stop:`, e);\n            }\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n        this.envExt.setUIKind(params.env.uiKind);\n        this.envExt.setApplicationName(params.env.appName);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n        this.jsonValidation = params.jsonValidation;\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        this.configStorage = params.configStorage;\n\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin);\n        }\n\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin): void {\n        if (plugin.model.id === 'vscode.json-language-features' && this.jsonValidation.length) {\n            // VS Code contribute all built-in validations via vscode.json-language-features\n            // we enrich them with Theia validations registered on the startup\n            // dynamic validations can be provided only via VS Code extensions\n            // content is fetched by the extension later via vscode.workspace.openTextDocument\n            const contributes = plugin.rawModel.contributes = (plugin.rawModel.contributes || {});\n            contributes.jsonValidation = (contributes.jsonValidation || []).concat(this.jsonValidation);\n        }\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = () => this.$activatePlugin(plugin.model.id);\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n            }\n            for (let activationEvent of plugin.rawModel.activationEvents) {\n                if (activationEvent === 'onUri') {\n                    activationEvent = `onUri:theia://${plugin.model.id}`;\n                }\n                this.setActivation(activationEvent, activation);\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                const progressId = await this.notificationMain.$startProgress({\n                    title: `Activating ${plugin.model.displayName || plugin.model.name}`,\n                    location: 'window'\n                });\n                try {\n                    if (plugin.rawModel.extensionDependencies) {\n                        for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                            const dependency = this.registry.get(dependencyId.toLowerCase());\n                            if (dependency) {\n                                const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                                if (!loadedSuccessfully) {\n                                    throw new Error(`Dependent extension '${dependency.model.displayName || dependency.model.id}' failed to activate.`);\n                                }\n                            } else {\n                                throw new Error(`Dependent extension '${dependencyId}' is not installed.`);\n                            }\n                        }\n                    }\n\n                    let pluginMain = this.host.loadPlugin(plugin);\n                    // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                    pluginMain = pluginMain || {};\n                    await this.startPlugin(plugin, configStorage, pluginMain);\n                    return true;\n                } catch (err) {\n                    const message = `Activating extension '${plugin.model.displayName || plugin.model.name}' failed:`;\n                    this.messageRegistryProxy.$showMessage(MainMessageType.Error, message + ' ' + err.message, {}, []);\n                    console.error(message, err);\n                    return false;\n                } finally {\n                    this.notificationMain.$stopProgress(progressId);\n                }\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        if (this.configStorage) {\n            this.configStorage.hostStoragePath = path;\n        }\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        if (activationEvent.endsWith(':*')) {\n            const baseEvent = activationEvent.substring(0, activationEvent.length - 2);\n            await this.activateByBaseEvent(baseEvent);\n        } else {\n            await this.activateBySingleEvent(activationEvent);\n        }\n    }\n\n    protected async activateByBaseEvent(baseEvent: string): Promise<void> {\n        await Promise.all(Array.from(this.activations.keys(), activation => {\n            if (activation.startsWith(baseEvent)) {\n                return this.activateBySingleEvent(activation);\n            }\n        }));\n    }\n\n    protected async activateBySingleEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        const pendingActivations = [];\n        while (activations.length) {\n            pendingActivations.push(activations.pop()!());\n        }\n        await Promise.all(pendingActivations);\n    }\n\n    async $activatePlugin(id: string): Promise<void> {\n        const plugin = this.registry.get(id);\n        if (plugin && this.configStorage) {\n            await this.loadPlugin(plugin, this.configStorage);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<void> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = configStorage.hostStoragePath ? join(configStorage.hostStoragePath, plugin.model.id) : undefined;\n        const secrets = new SecretStorageExt(plugin, this.secrets);\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath, plugin.model.id);\n        const pluginContext: theia.PluginContext = {\n            extensionPath: plugin.pluginFolder,\n            extensionUri: Uri.file(plugin.pluginFolder),\n            globalState: new GlobalState(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            storageUri: storagePath ? Uri.file(storagePath) : undefined,\n            secrets,\n            globalStoragePath: globalStoragePath,\n            globalStorageUri: Uri.file(globalStoragePath),\n            environmentVariableCollection: this.terminalService.getEnvironmentVariableCollection(plugin.model.id),\n            extensionMode: 1, // @todo: implement proper `extensionMode`.\n            extension: new PluginExt(this, plugin),\n            logUri: Uri.file(logPath)\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        return this.$activatePlugin(pluginId);\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { PLUGIN_RPC_CONTEXT, StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    update(key: string, value: any): Promise<void> {\n        if (value === undefined) {\n            delete this.cache[key];\n        } else {\n            this.cache[key] = value;\n        }\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\nexport class GlobalState extends Memento {\n\n    /** @todo: API is not yet implemented. */\n    setKeysForSync(keys: readonly string[]): void { }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain,\n    PreferenceData,\n    PreferenceChangeExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { Configuration, ConfigurationModel } from './preferences/configuration';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nconst injectionRe = /\\b__proto__\\b|\\bconstructor\\.prototype\\b/;\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2,\n    WorkspaceFolder = 3\n}\n\nenum PreferenceScope {\n    Default,\n    User,\n    Workspace,\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this._preferences = this.parse(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.init(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData));\n    }\n\n    getConfiguration(section?: string, resource?: theia.Uri | null, extensionId?: string): theia.WorkspaceConfiguration {\n        resource = resource === null ? undefined : resource;\n        const preferences = this.toReadonlyValue(section\n            ? lookUp(this._preferences.getValue(undefined, this.workspace, resource), section)\n            : this._preferences.getValue(undefined, this.workspace, resource));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, arg?: ConfigurationTarget | boolean): PromiseLike<void> => {\n                key = section ? `${section}.${key}` : key;\n                const resourceStr: string | undefined = resource ? resource.toString() : undefined;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(arg, key, value, resourceStr);\n                } else {\n                    return this.proxy.$removeConfigurationOption(arg, key, resourceStr);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                key = section ? `${section}.${key}` : key;\n                resource = resource === null ? undefined : resource;\n                const result = cloneDeep(this._preferences.inspect<T>(key, this.workspace, resource));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                if (typeof result.default !== 'undefined') {\n                    configInspect.defaultValue = result.default;\n                }\n                if (typeof result.user !== 'undefined') {\n                    configInspect.globalValue = result.user;\n                }\n                if (typeof result.workspace !== 'undefined') {\n                    configInspect.workspaceValue = result.workspace;\n                }\n                if (typeof result.workspaceFolder !== 'undefined') {\n                    configInspect.workspaceFolderValue = result.workspaceFolder;\n                }\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => readonlyProxy(targ[prop]),\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel(data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel(data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel(data[PreferenceScope.Workspace]);\n        const folderConfigurations = {} as { [resource: string]: ConfigurationModel };\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations[resource] = this.getConfigurationModel(data[PreferenceScope.Folder][resource]);\n        });\n        return new Configuration(defaultConfiguration, userConfiguration, workspaceConfiguration, folderConfigurations);\n    }\n\n    private getConfigurationModel(data: { [key: string]: any }): ConfigurationModel {\n        if (!data) {\n            return new ConfigurationModel();\n        }\n        return new ConfigurationModel(this.parseConfigurationData(data), Object.keys(data));\n    }\n\n    private readonly OVERRIDE_PROPERTY = '\\\\[(.*)\\\\]$';\n    private readonly OVERRIDE_PROPERTY_PATTERN = new RegExp(this.OVERRIDE_PROPERTY);\n\n    private parseConfigurationData(data: { [key: string]: any }): { [key: string]: any } {\n        return Object.keys(data).reduce((result: any, key: string) => {\n            if (injectionRe.test(key)) {\n                return result;\n            }\n            const parts = key.split('.');\n            let branch = result;\n\n            for (let i = 0; i < parts.length; i++) {\n                if (i === parts.length - 1) {\n                    branch[parts[i]] = data[key];\n                    continue;\n                }\n                if (!branch[parts[i]]) {\n                    branch[parts[i]] = Object.create(null);\n                }\n                branch = branch[parts[i]];\n\n                // overridden properties should be transformed into\n                // \"[overridden_identifier]\" : {\n                //              \"property1\" : \"value1\"\n                //              \"property2\" : \"value2\"\n                //  }\n                if (i === 0 && this.OVERRIDE_PROPERTY_PATTERN.test(parts[i])) {\n                    branch[key.substring(parts[0].length + 1)] = data[key];\n                    break;\n                }\n            }\n            return result;\n        }, Object.create(null));\n    }\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, uri?: theia.Uri): boolean => {\n                // TODO respect uri\n                // TODO respect scopes shadowing\n                for (const change of eventData) {\n                    const tree = change.preferenceName\n                        .split('.')\n                        .reverse()\n                        .reduce((prevValue: any, curValue: any) => ({ [curValue]: prevValue }), change.newValue);\n                    return typeof lookUp(tree, section) !== 'undefined';\n                }\n                return false;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { WorkspaceExtImpl } from '../workspace';\nimport { isObject } from '../../common/types';\nimport cloneDeep = require('lodash.clonedeep');\nimport { URI } from '@theia/core/shared/vscode-uri';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport class Configuration {\n\n    private combinedConfig: ConfigurationModel | undefined;\n    private folderCombinedConfigs: { [resource: string]: ConfigurationModel } = {};\n\n    constructor(\n        private defaultConfiguration: ConfigurationModel,\n        private userConfiguration: ConfigurationModel,\n        private workspaceConfiguration: ConfigurationModel = new ConfigurationModel(),\n        private folderConfigurations: { [resource: string]: ConfigurationModel } = {},\n    ) { }\n\n    getValue(section: string | undefined, workspace: WorkspaceExtImpl, resource?: URI): any {\n        return this.getCombinedResourceConfig(workspace, resource).getValue(section);\n    }\n\n    inspect<C>(key: string, workspace: WorkspaceExtImpl, resource?: URI): {\n        default: C,\n        user: C,\n        workspace: C | undefined,\n        workspaceFolder: C | undefined,\n        value: C,\n    } {\n        const combinedConfiguration = this.getCombinedResourceConfig(workspace, resource);\n        const folderConfiguration = this.getFolderResourceConfig(workspace, resource);\n        return {\n            default: this.defaultConfiguration.getValue(key),\n            user: this.userConfiguration.getValue(key),\n            workspace: workspace ? this.workspaceConfiguration.getValue(key) : undefined,\n            workspaceFolder: folderConfiguration ? folderConfiguration.getValue(key) : undefined,\n            value: combinedConfiguration.getValue(key)\n        };\n    }\n\n    private getCombinedResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel {\n        const combinedConfig = this.getCombinedConfig();\n        if (!workspace || !resource) {\n            return combinedConfig;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return combinedConfig;\n        }\n\n        return this.getFolderCombinedConfig(workspaceFolder.uri.toString()) || combinedConfig;\n    }\n\n    private getCombinedConfig(): ConfigurationModel {\n        if (!this.combinedConfig) {\n            this.combinedConfig = this.defaultConfiguration.merge(this.userConfiguration, this.workspaceConfiguration);\n        }\n        return this.combinedConfig;\n    }\n\n    private getFolderCombinedConfig(folder: string): ConfigurationModel | undefined {\n        if (this.folderCombinedConfigs[folder]) {\n            return this.folderCombinedConfigs[folder];\n        }\n\n        const combinedConfig = this.getCombinedConfig();\n        const folderConfig = this.folderConfigurations[folder];\n        if (!folderConfig) {\n            return combinedConfig;\n        }\n\n        const folderCombinedConfig = combinedConfig.merge(folderConfig);\n        this.folderCombinedConfigs[folder] = folderCombinedConfig;\n\n        return folderCombinedConfig;\n    }\n\n    private getFolderResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel | undefined {\n        if (!workspace || !resource) {\n            return;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return;\n        }\n        return this.folderConfigurations[workspaceFolder.uri.toString()];\n    }\n\n}\n\nexport class ConfigurationModel {\n\n    constructor(\n        private contents: any = Object.create(null),\n        private keys: string[] = [],\n    ) { }\n\n    getValue(section?: string): any {\n        if (!section) {\n            return this.contents;\n        }\n\n        const path = section.split('.');\n        let current = this.contents;\n        for (let i = 0; i < path.length; i++) {\n            if (typeof current !== 'object' || current === null) {\n                return undefined;\n            }\n            current = current[path[i]];\n        }\n        return current;\n    }\n\n    merge(...others: ConfigurationModel[]): ConfigurationModel {\n        const contents = cloneDeep(this.contents);\n        const allKeys = [...this.keys];\n\n        for (const other of others) {\n            this.mergeContents(contents, other.contents);\n            this.mergeKeys(allKeys, other.keys);\n        }\n        return new ConfigurationModel(contents, allKeys);\n    }\n\n    private mergeContents(source: any, target: any): void {\n        for (const key of Object.keys(target)) {\n            if (key === '__proto__') {\n                continue;\n            }\n            if (key in source) {\n                if (isObject(source[key]) && isObject(target[key])) {\n                    this.mergeContents(source[key], target[key]);\n                    continue;\n                }\n            }\n            source[key] = cloneDeep(target[key]);\n        }\n    }\n\n    private mergeKeys(source: string[], target: string[]): void {\n        for (const key of target) {\n            if (source.indexOf(key) === -1) {\n                source.push(key);\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, cnt: number): boolean {\n        startIndex = toUint32(startIndex);\n        cnt = toUint32(cnt);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCnt = oldValues.length - startIndex;\n        if (cnt >= maxCnt) {\n            cnt = maxCnt;\n        }\n\n        if (cnt === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - cnt);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n    QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, TransferInputBox, Plugin,\n    Item, TransferQuickInputButton, TransferQuickPickItems, TransferQuickInput\n} from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { QuickPickItem, InputBoxOptions, InputBox, QuickPick, QuickInput } from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { QuickInputButtons, ThemeIcon } from './types-impl';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as path from 'path';\nimport { convertToTransferQuickPickItems } from './type-converters';\nimport { PluginPackage } from '../common/plugin-protocol';\nimport { QuickInputButtonHandle } from '@theia/core/lib/browser';\nimport { MaybePromise } from '@theia/core/lib/common/types';\n\nconst canceledName = 'Canceled';\n/**\n * Checks if the given error is a promise in canceled state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isPromiseCanceledError(error: any): boolean {\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\nexport function getIconUris(iconPath: theia.QuickInputButton['iconPath']): { dark: URI, light: URI } | { id: string } {\n    if (ThemeIcon.is(iconPath)) {\n        return { id: iconPath.id };\n    }\n    const dark = getDarkIconUri(iconPath as URI | { light: URI; dark: URI; });\n    const light = getLightIconUri(iconPath as URI | { light: URI; dark: URI; });\n    // Tolerate strings: https://github.com/microsoft/vscode/issues/110432#issuecomment-726144556\n    return {\n        dark: typeof dark === 'string' ? URI.file(dark) : dark,\n        light: typeof light === 'string' ? URI.file(light) : light\n    };\n}\n\nexport function getLightIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'light' in iconPath ? iconPath.light : iconPath;\n}\n\nexport function getDarkIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'dark' in iconPath ? iconPath.dark : iconPath;\n}\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private onDidSelectItem: undefined | ((handle: number) => void);\n    private validateInputHandler?: (input: string) => MaybePromise<string | null | undefined>;\n    private _sessions = new Map<number, QuickInputExt>(); // Each quickinput will have a number so that we know where to fire events\n    private _instances = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n\n    /* eslint-disable max-len */\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options: theia.QuickPickOptions & { canPickMany: true; }, token?: theia.CancellationToken): Promise<Array<QuickPickItem> | undefined>;\n    showQuickPick(itemsOrItemsPromise: string[] | Promise<string[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<string | undefined>;\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<QuickPickItem | undefined>;\n    showQuickPick(itemsOrItemsPromise: Item[] | Promise<Item[]>, options?: theia.QuickPickOptions, token: theia.CancellationToken = CancellationToken.None): Promise<Item | Item[] | undefined> {\n        this.onDidSelectItem = undefined;\n\n        const itemsPromise = <Promise<Item[]>>Promise.resolve(itemsOrItemsPromise);\n\n        const instance = ++this._instances;\n\n        const widgetPromise = this.proxy.$show(instance, {\n            canPickMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            matchOnDescription: options && options.matchOnDescription,\n            matchOnDetail: options && options.matchOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        }, token);\n\n        const widgetClosedMarker = {};\n        const widgetClosedPromise = widgetPromise.then(() => widgetClosedMarker);\n\n        return Promise.race([widgetClosedPromise, itemsPromise]).then(result => {\n            if (result === widgetClosedMarker) {\n                return undefined;\n            }\n            return itemsPromise.then(async items => {\n                const pickItems: Array<TransferQuickPickItems> = convertToTransferQuickPickItems(items);\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.onDidSelectItem = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(instance, pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        if (options && options.canPickMany) {\n                            return Array.of(items[handle]);\n                        } else {\n                            return items[handle];\n                        }\n\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            });\n        }).then(undefined, err => {\n            if (isPromiseCanceledError(err)) {\n                return undefined;\n            }\n\n            this.proxy.$setError(instance, err);\n\n            return Promise.reject(err);\n        });\n    }\n\n    $onItemSelected(handle: number): void {\n        if (this.onDidSelectItem) {\n            this.onDidSelectItem(handle);\n        }\n    }\n\n    // ---- input\n\n    showInput(options?: InputBoxOptions, token: theia.CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options?.validateInput;\n        if (!options) { options = { placeHolder: '' }; }\n        return this.proxy.$input(options, typeof this.validateInputHandler === 'function', token);\n    }\n\n    async showInputBox(options: TransferInputBox): Promise<string | undefined> {\n        this.validateInputHandler = typeof options.validateInput === 'function' ? options.validateInput : undefined;\n        return this.proxy.$showInputBox(options, typeof this.validateInputHandler === 'function');\n    }\n\n    $validateInput(input: string): Promise<string | null | undefined> | undefined {\n        if (this.validateInputHandler) {\n            return Promise.resolve(this.validateInputHandler(input));\n        }\n        return undefined;\n    }\n\n    // ---- QuickInput\n\n    createQuickPick<T extends QuickPickItem>(plugin: Plugin): QuickPick<T> {\n        const session: any = new QuickPickExt<T>(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    createInputBox(plugin: Plugin): InputBox {\n        const session: any = new InputBoxExt(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    hide(): void {\n        this.proxy.$hide();\n    }\n\n    async $acceptOnDidAccept(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireAccept();\n        }\n    }\n\n    async $acceptDidChangeValue(sessionId: number, changedValue: string): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireChangedValue(changedValue);\n        }\n    }\n\n    async $acceptOnDidHide(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireHide();\n        }\n    }\n\n    async $acceptOnDidTriggerButton(sessionId: number, btn: QuickInputButtonHandle): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            if (btn.index === -1) {\n                session._fireButtonTrigger(QuickInputButtons.Back);\n            } else if (session && (session instanceof InputBoxExt || session instanceof QuickPickExt)) {\n                const btnFromIndex = session.buttons[btn.index];\n                session._fireButtonTrigger(btnFromIndex as theia.QuickInputButton);\n            }\n        }\n    }\n\n    $onDidChangeActive(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeActive(handles);\n        }\n    }\n\n    $onDidChangeSelection(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeSelection(handles);\n        }\n    }\n}\n\nexport class QuickInputExt implements QuickInput {\n\n    private static _nextId = 1;\n    _id = QuickInputExt._nextId++;\n\n    private _busy: boolean;\n    private _enabled: boolean;\n    private _ignoreFocusOut: boolean;\n    private _step: number | undefined;\n    private _title: string | undefined;\n    private _totalSteps: number | undefined;\n    private _value: string;\n    private _placeholder: string | undefined;\n    private _buttons: theia.QuickInputButton[] = [];\n    private _handlesToButtons = new Map<number, theia.QuickInputButton>();\n    protected expectingHide = false;\n    protected visible: boolean;\n    private _disposed = false;\n    protected disposableCollection: DisposableCollection;\n\n    private onDidAcceptEmitter: Emitter<void>;\n    /**\n     * it has to be named `_onDidChangeValueEmitter`, since Gitlens extension relies on it\n     * https://github.com/eamodio/vscode-gitlens/blob/f22a9cd4199ac498c217643282a6a412e1fc01ae/src/commands/gitCommands.ts#L242-L243\n     */\n    private _onDidChangeValueEmitter: Emitter<string>;\n    private onDidHideEmitter: Emitter<void>;\n    private onDidTriggerButtonEmitter: Emitter<theia.QuickInputButton>;\n    private _updateTimeout: any;\n    private _pendingUpdate: TransferQuickInput = { id: this._id };\n\n    constructor(readonly quickOpen: QuickOpenExtImpl, readonly quickOpenMain: QuickOpenMain, readonly plugin: Plugin, private _onDidDispose: () => void) {\n        this.title = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.enabled = true;\n        this.busy = false;\n        this.ignoreFocusOut = false;\n        this.value = '';\n\n        this.visible = false;\n\n        this.disposableCollection = new DisposableCollection();\n        this.disposableCollection.push(this.onDidAcceptEmitter = new Emitter());\n        this.disposableCollection.push(this._onDidChangeValueEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidHideEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidTriggerButtonEmitter = new Emitter());\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.update({ title });\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.update({ step });\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.update({ totalSteps });\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this._enabled = enabled;\n        this.update({ enabled });\n    }\n\n    get busy(): boolean {\n        return this._busy;\n    }\n\n    set busy(busy: boolean) {\n        this._busy = busy;\n        this.update({ busy });\n    }\n\n    get ignoreFocusOut(): boolean {\n        return this._ignoreFocusOut;\n    }\n\n    set ignoreFocusOut(ignoreFocusOut: boolean) {\n        this._ignoreFocusOut = ignoreFocusOut;\n        this.update({ ignoreFocusOut });\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this._value = value;\n        this.update({ value });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    get buttons(): theia.QuickInputButton[] {\n        return this._buttons;\n    }\n\n    set buttons(buttons: theia.QuickInputButton[]) {\n        this._buttons = buttons.slice();\n        this._handlesToButtons.clear();\n        buttons.forEach((button, i) => {\n            const handle = button === QuickInputButtons.Back ? -1 : i;\n            this._handlesToButtons.set(handle, button);\n        });\n        this.update({\n            buttons: buttons.map<TransferQuickInputButton>((button, i) => ({\n                iconPath: getIconUris(button.iconPath),\n                tooltip: button.tooltip,\n                handle: button === QuickInputButtons.Back ? -1 : i,\n            }))\n        });\n    }\n\n    show(): void {\n        this.visible = true;\n        this.expectingHide = true;\n        this.update({ visible: true });\n    }\n\n    dispose(): void {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        this._fireHide();\n        this.disposableCollection.dispose();\n        this._onDidDispose();\n        this.quickOpenMain.$dispose(this._id);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected update(properties: Record<string, any>): void {\n        if (this._disposed) {\n            return;\n        }\n        for (const key of Object.keys(properties)) {\n            const value = properties[key];\n            this._pendingUpdate[key] = value === undefined ? null : value;\n        }\n\n        if ('visible' in this._pendingUpdate) {\n            if (this._updateTimeout) {\n                clearTimeout(this._updateTimeout);\n                this._updateTimeout = undefined;\n            }\n            this.dispatchUpdate();\n        } else if (this.visible && !this._updateTimeout) {\n            // Defer the update so that multiple changes to setters dont cause a redraw each\n            this._updateTimeout = setTimeout(() => {\n                this._updateTimeout = undefined;\n                this.dispatchUpdate();\n            }, 0);\n        }\n    }\n\n    private dispatchUpdate(): void {\n        this.quickOpenMain.$createOrUpdate(this._pendingUpdate);\n        this._pendingUpdate = { id: this._id };\n    }\n\n    hide(): void {\n        this.quickOpenMain.$hide();\n        this.dispose();\n    }\n\n    protected convertURL(iconPath: monaco.Uri | { light: string | monaco.Uri; dark: string | monaco.Uri } | monaco.theme.ThemeIcon):\n        URI | { light: string | URI; dark: string | URI } | ThemeIcon {\n        const toUrl = (arg: string | monaco.Uri) => {\n            arg = arg instanceof monaco.Uri && arg.scheme === 'file' ? arg.fsPath : arg;\n            if (typeof arg !== 'string') {\n                return arg.toString(true);\n            }\n            const { packagePath } = this.plugin.rawModel;\n            const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n            const normalizedPath = path.normalize(absolutePath);\n            const relativePath = path.relative(packagePath, normalizedPath);\n            return PluginPackage.toPluginUrl(this.plugin.rawModel, relativePath);\n        };\n        if (ThemeIcon.is(iconPath)) {\n            return iconPath;\n        } else if (typeof iconPath === 'string' || iconPath instanceof monaco.Uri) {\n            return URI.parse(toUrl(iconPath));\n        } else {\n            const { light, dark } = iconPath as { light: string | monaco.Uri, dark: string | monaco.Uri };\n            return {\n                light: toUrl(light),\n                dark: toUrl(dark)\n            };\n        }\n    }\n\n    _fireAccept(): void {\n        this.onDidAcceptEmitter.fire(undefined);\n    }\n\n    _fireChangedValue(changedValue: string): void {\n        this._onDidChangeValueEmitter.fire(changedValue);\n    }\n\n    _fireHide(): void {\n        if (this.expectingHide) {\n            this.expectingHide = false;\n            this.onDidHideEmitter.fire(undefined);\n        }\n    }\n\n    _fireButtonTrigger(btn: theia.QuickInputButton): void {\n        this.onDidTriggerButtonEmitter.fire(btn);\n    }\n\n    get onDidHide(): Event<void> {\n        return this.onDidHideEmitter.event;\n    }\n\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    get onDidChangeValue(): Event<string> {\n        return this._onDidChangeValueEmitter.event;\n    }\n\n    get onDidTriggerButton(): Event<theia.QuickInputButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n}\n\n/**\n * Base implementation of {@link InputBox} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5109\n */\nexport class InputBoxExt extends QuickInputExt implements InputBox {\n\n    private _password: boolean;\n    private _prompt: string | undefined;\n    private _validationMessage: string | undefined;\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        onDispose: () => void) {\n\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n\n        this.buttons = [];\n        this.password = false;\n        this.value = '';\n    }\n\n    get password(): boolean {\n        return this._password;\n    }\n\n    set password(password: boolean) {\n        this._password = password;\n        this.update({ password });\n    }\n\n    get prompt(): string | undefined {\n        return this._prompt;\n    }\n\n    set prompt(prompt: string | undefined) {\n        this._prompt = prompt;\n        this.update({ prompt });\n    }\n\n    get validationMessage(): string | undefined {\n        return this._validationMessage;\n    }\n\n    set validationMessage(validationMessage: string | undefined) {\n        if (this._validationMessage !== validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update({ validationMessage });\n        }\n    }\n\n    async show(): Promise<void> {\n        super.show();\n\n        const update = (value: string) => {\n            this.value = value;\n            if (this.validationMessage && this.validationMessage.length > 0) {\n                return this.validationMessage;\n            }\n        };\n\n        this.quickOpen.showInputBox({\n            id: this._id,\n            busy: this.busy,\n            buttons: this.buttons,\n            enabled: this.enabled,\n            ignoreFocusOut: this.ignoreFocusOut,\n            password: this.password,\n            placeholder: this.placeholder,\n            prompt: this.prompt,\n            step: this.step,\n            title: this.title,\n            totalSteps: this.totalSteps,\n            validationMessage: this.validationMessage,\n            value: this.value,\n            visible: this.visible,\n            validateInput(value: string): string | undefined {\n                if (value.length > 0) {\n                    return update(value);\n                }\n            }\n        });\n    }\n}\n\n/**\n * Base implementation of {@link QuickPick} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5059\n */\nexport class QuickPickExt<T extends theia.QuickPickItem> extends QuickInputExt implements QuickPick<T> {\n    private _items: T[] = [];\n    private _handlesToItems = new Map<number, T>();\n    private _itemsToHandles = new Map<T, number>();\n    private _canSelectMany = false;\n    private _matchOnDescription = true;\n    private _matchOnDetail = true;\n    private _sortByLabel = true;\n    private _activeItems: T[] = [];\n    private _selectedItems: T[] = [];\n    private readonly _onDidChangeActiveEmitter = new Emitter<T[]>();\n    private readonly _onDidChangeSelectionEmitter = new Emitter<T[]>();\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        onDispose: () => void) {\n\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n        this.buttons = [];\n\n        this.disposableCollection.push(this._onDidChangeActiveEmitter);\n        this.disposableCollection.push(this._onDidChangeSelectionEmitter);\n\n        this.update({ type: 'quickPick' });\n    }\n\n    get items(): T[] {\n        return this._items;\n    }\n\n    set items(items: T[]) {\n        this._items = items.slice();\n        this._handlesToItems.clear();\n        this._itemsToHandles.clear();\n        items.forEach((item, i) => {\n            this._handlesToItems.set(i, item);\n            this._itemsToHandles.set(item, i);\n        });\n        this.update({\n            items: items.map((item, i) => ({\n                type: item.type,\n                label: item.label,\n                description: item.description,\n                handle: i,\n                detail: item.detail,\n                picked: item.picked,\n                alwaysShow: item.alwaysShow\n            }))\n        });\n    }\n\n    get canSelectMany(): boolean {\n        return this._canSelectMany;\n    }\n\n    set canSelectMany(canSelectMany: boolean) {\n        this._canSelectMany = canSelectMany;\n        this.update({ canSelectMany });\n    }\n\n    get matchOnDescription(): boolean {\n        return this._matchOnDescription;\n    }\n\n    set matchOnDescription(matchOnDescription: boolean) {\n        this._matchOnDescription = matchOnDescription;\n        this.update({ matchOnDescription });\n    }\n\n    get matchOnDetail(): boolean {\n        return this._matchOnDetail;\n    }\n\n    set matchOnDetail(matchOnDetail: boolean) {\n        this._matchOnDetail = matchOnDetail;\n        this.update({ matchOnDetail });\n    }\n\n    get sortByLabel(): boolean {\n        return this._sortByLabel;\n    }\n\n    set sortByLabel(sortByLabel: boolean) {\n        this._sortByLabel = sortByLabel;\n        this.update({ sortByLabel });\n    }\n\n    get activeItems(): T[] {\n        return this._activeItems;\n    }\n\n    set activeItems(activeItems: T[]) {\n        this._activeItems = activeItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ activeItems: this._activeItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeActive = this._onDidChangeActiveEmitter.event;\n\n    get selectedItems(): T[] {\n        return this._selectedItems;\n    }\n\n    set selectedItems(selectedItems: T[]) {\n        this._selectedItems = selectedItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ selectedItems: this._selectedItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeSelection = this._onDidChangeSelectionEmitter.event;\n\n    _fireDidChangeActive(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._activeItems = items;\n        this._onDidChangeActiveEmitter.fire(items);\n    }\n\n    _fireDidChangeSelection(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._selectedItems = items;\n        this._onDidChangeSelectionEmitter.fire(items);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019-2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostSCM.ts\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport {\n    Plugin, PLUGIN_RPC_CONTEXT,\n    ScmExt,\n    ScmMain, ScmRawResource, ScmRawResourceGroup,\n    ScmRawResourceSplice, ScmRawResourceSplices,\n    SourceControlGroupFeatures\n} from '../common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from '../plugin/command-registry';\nimport { Splice } from '../common/arrays';\nimport { UriComponents } from '../common/uri-components';\nimport { Command } from '../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\nimport { ScmCommandArg } from '../common/plugin-api-rpc';\nimport { sep } from '@theia/callhierarchy/lib/common/paths';\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction getIconResource(decorations?: theia.SourceControlResourceThemableDecorations): theia.Uri | undefined {\n    if (!decorations) {\n        return undefined;\n    } else if (typeof decorations.iconPath === 'string') {\n        return URI.file(decorations.iconPath);\n    } else {\n        return decorations.iconPath;\n    }\n}\n\nfunction comparePaths(one: string, other: string, caseSensitive = false): number {\n    const oneParts = one.split(sep);\n    const otherParts = other.split(sep);\n\n    const lastOne = oneParts.length - 1;\n    const lastOther = otherParts.length - 1;\n    let endOne: boolean;\n    let endOther: boolean;\n\n    for (let i = 0; ; i++) {\n        endOne = lastOne === i;\n        endOther = lastOther === i;\n\n        if (endOne && endOther) {\n            const onePart = caseSensitive ? oneParts[i].toLocaleLowerCase() : oneParts[i];\n            const otherPart = caseSensitive ? otherParts[i].toLocaleLowerCase() : otherParts[i];\n            return onePart > otherPart ? -1 : 1;\n        } else if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        const result = comparePathComponents(oneParts[i], otherParts[i], caseSensitive);\n\n        if (result !== 0) {\n            return result;\n        }\n    }\n}\n\nfunction comparePathComponents(one: string, other: string, caseSensitive = false): number {\n    if (!caseSensitive) {\n        one = one && one.toLowerCase();\n        other = other && other.toLowerCase();\n    }\n\n    if (one === other) {\n        return 0;\n    }\n\n    return one < other ? -1 : 1;\n}\n\nfunction compareResourceThemableDecorations(a: theia.SourceControlResourceThemableDecorations, b: theia.SourceControlResourceThemableDecorations): number {\n    if (!a.iconPath && !b.iconPath) {\n        return 0;\n    } else if (!a.iconPath) {\n        return -1;\n    } else if (!b.iconPath) {\n        return 1;\n    }\n\n    const aPath = typeof a.iconPath === 'string' ? a.iconPath : a.iconPath.fsPath;\n    const bPath = typeof b.iconPath === 'string' ? b.iconPath : b.iconPath.fsPath;\n    return comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(a: theia.SourceControlResourceDecorations, b: theia.SourceControlResourceDecorations): number {\n    let result = 0;\n\n    if (a.strikeThrough !== b.strikeThrough) {\n        return a.strikeThrough ? 1 : -1;\n    }\n\n    if (a.faded !== b.faded) {\n        return a.faded ? 1 : -1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        return (a.tooltip || '').localeCompare(b.tooltip || '');\n    }\n\n    result = compareResourceThemableDecorations(a, b);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.light && b.light) {\n        result = compareResourceThemableDecorations(a.light, b.light);\n    } else if (a.light) {\n        return 1;\n    } else if (b.light) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.dark && b.dark) {\n        result = compareResourceThemableDecorations(a.dark, b.dark);\n    } else if (a.dark) {\n        return 1;\n    } else if (b.dark) {\n        return -1;\n    }\n\n    return result;\n}\n\nfunction compareCommands(a: theia.Command, b: theia.Command): number {\n    if (a.command !== b.command) {\n        return a.command! < b.command! ? -1 : 1;\n    }\n\n    if (a.title !== b.title) {\n        return a.title! < b.title! ? -1 : 1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        if (a.tooltip !== undefined && b.tooltip !== undefined) {\n            return a.tooltip < b.tooltip ? -1 : 1;\n        } else if (a.tooltip !== undefined) {\n            return 1;\n        } else if (b.tooltip !== undefined) {\n            return -1;\n        }\n    }\n\n    if (a.arguments === b.arguments) {\n        return 0;\n    } else if (!a.arguments) {\n        return -1;\n    } else if (!b.arguments) {\n        return 1;\n    } else if (a.arguments.length !== b.arguments.length) {\n        return a.arguments.length - b.arguments.length;\n    }\n\n    for (let i = 0; i < a.arguments.length; i++) {\n        const aArg = a.arguments[i];\n        const bArg = b.arguments[i];\n\n        if (aArg === bArg) {\n            continue;\n        }\n\n        return aArg < bArg ? -1 : 1;\n    }\n\n    return 0;\n}\n\nfunction compareResourceStates(a: theia.SourceControlResourceState, b: theia.SourceControlResourceState): number {\n    let result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.command && b.command) {\n        result = compareCommands(a.command, b.command);\n    } else if (a.command) {\n        return 1;\n    } else if (b.command) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.decorations && b.decorations) {\n        result = compareResourceStatesDecorations(a.decorations, b.decorations);\n    } else if (a.decorations) {\n        return 1;\n    } else if (b.decorations) {\n        return -1;\n    }\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction compareArgs(a: any[], b: any[]): boolean {\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction commandEquals(a: theia.Command, b: theia.Command): boolean {\n    return a.command === b.command\n        && a.title === b.title\n        && a.tooltip === b.tooltip\n        && (a.arguments && b.arguments ? compareArgs(a.arguments, b.arguments) : a.arguments === b.arguments);\n}\n\nfunction commandListEquals(a: readonly theia.Command[], b: readonly theia.Command[]): boolean {\n    return equals(a, b, commandEquals);\n}\n\nfunction equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n    if (one === other) {\n        return true;\n    }\n\n    if (!one || !other) {\n        return false;\n    }\n\n    if (one.length !== other.length) {\n        return false;\n    }\n\n    for (let i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\ninterface ValidateInput {\n    (value: string, cursorPosition: number): theia.ProviderResult<theia.SourceControlInputBoxValidation | undefined | null>;\n}\n\nexport class ScmInputBoxImpl implements theia.SourceControlInputBox {\n\n    private _value: string = '';\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n        this.updateValue(value);\n    }\n\n    private readonly onDidChangeEmitter = new Emitter<string>();\n\n    get onDidChange(): Event<string> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    private _placeholder: string = '';\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n        this._placeholder = placeholder;\n    }\n\n    private _validateInput: ValidateInput | undefined;\n\n    get validateInput(): ValidateInput | undefined {\n        return this._validateInput;\n    }\n\n    set validateInput(fn: ValidateInput | undefined) {\n        if (fn && typeof fn !== 'function') {\n            throw new Error(`[${this.plugin.model.id}]: Invalid SCM input box validation function`);\n        }\n\n        this._validateInput = fn;\n    }\n\n    constructor(private plugin: Plugin, private proxy: ScmMain, private sourceControlHandle: number) {\n        // noop\n    }\n\n    onInputBoxValueChange(value: string): void {\n        this.updateValue(value);\n    }\n\n    private updateValue(value: string): void {\n        this._value = value;\n        this.onDidChangeEmitter.fire(value);\n    }\n}\n\nclass SsmResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handlePool: number = 0;\n    private resourceHandlePool: number = 0;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n\n    private resourceStatesMap = new Map<ResourceStateHandle, theia.SourceControlResourceState>();\n    private resourceStatesCommandsMap = new Map<ResourceStateHandle, theia.Command>();\n    private resourceStatesDisposablesMap = new Map<ResourceStateHandle, Disposable>();\n\n    private readonly onDidUpdateResourceStatesEmitter = new Emitter<void>();\n    readonly onDidUpdateResourceStates = this.onDidUpdateResourceStatesEmitter.event;\n\n    private _disposed = false;\n    get disposed(): boolean { return this._disposed; }\n    private readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    private handlesSnapshot: number[] = [];\n    private resourceSnapshot: theia.SourceControlResourceState[] = [];\n\n    get id(): string { return this._id; }\n\n    get label(): string { return this._label; }\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    get hideWhenEmpty(): boolean | undefined { return this._hideWhenEmpty; }\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, this.features);\n    }\n\n    get features(): SourceControlGroupFeatures {\n        return {\n            hideWhenEmpty: this.hideWhenEmpty\n        };\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] { return [...this._resourceStates]; }\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = [...resources];\n        this.onDidUpdateResourceStatesEmitter.fire();\n    }\n\n    readonly handle = SsmResourceGroupImpl.handlePool++;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private _id: string,\n        private _label: string,\n    ) { }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    executeResourceCommand(handle: number): Promise<void> {\n        const command = this.resourceStatesCommandsMap.get(handle);\n\n        if (!command) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise(() => this.commands.executeCommand(command.command!, ...(command.arguments || [])));\n    }\n\n    takeResourceStateSnapshot(): ScmRawResourceSplice[] {\n        const snapshot = [...this._resourceStates];\n        const diffs = sortedDiff(this.resourceSnapshot, snapshot, compareResourceStates);\n\n        const splices = diffs.map<Splice<{ rawResource: ScmRawResource, handle: number }>>(diff => {\n            const toInsert = diff.toInsert.map(r => {\n                const handle = this.resourceHandlePool++;\n                this.resourceStatesMap.set(handle, r);\n\n                const sourceUri = r.resourceUri;\n                const iconUri = getIconResource(r.decorations);\n                const lightIconUri = r.decorations && getIconResource(r.decorations.light) || iconUri;\n                const darkIconUri = r.decorations && getIconResource(r.decorations.dark) || iconUri;\n                const icons: UriComponents[] = [];\n                let command: Command | undefined;\n\n                if (r.command) {\n                    if (r.command.command === 'theia.open' || r.command.command === 'theia.diff') {\n                        const disposables = new DisposableCollection();\n                        command = this.commands.converter.toSafeCommand(r.command, disposables);\n                        this.resourceStatesDisposablesMap.set(handle, disposables);\n                    } else {\n                        this.resourceStatesCommandsMap.set(handle, r.command);\n                    }\n                }\n\n                if (lightIconUri) {\n                    icons.push(lightIconUri);\n                }\n\n                if (darkIconUri && (darkIconUri.toString() !== lightIconUri?.toString())) {\n                    icons.push(darkIconUri);\n                }\n\n                const tooltip = (r.decorations && r.decorations.tooltip) || '';\n                const strikeThrough = r.decorations && !!r.decorations.strikeThrough;\n                const faded = r.decorations && !!r.decorations.faded;\n                const contextValue = r.contextValue || '';\n\n                // TODO remove the letter and colorId fields when the FileDecorationProvider is applied, see https://github.com/eclipse-theia/theia/pull/8911\n                const rawResource = {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    handle, sourceUri, letter: (r as any).letter, colorId: (r as any).color.id, icons,\n                    tooltip, strikeThrough, faded, contextValue, command\n                } as ScmRawResource;\n\n                return { rawResource, handle };\n            });\n\n            const { start, deleteCount } = diff;\n            return { start, deleteCount, toInsert };\n        });\n\n        const rawResourceSplices = splices\n            .map(({ start, deleteCount, toInsert }) => ({\n                start: start,\n                deleteCount: deleteCount,\n                rawResources: toInsert.map(i => i.rawResource)\n            } as ScmRawResourceSplice));\n\n        const reverseSplices = splices.reverse();\n\n        for (const { start, deleteCount, toInsert } of reverseSplices) {\n            const handles = toInsert.map(i => i.handle);\n            const handlesToDelete = this.handlesSnapshot.splice(start, deleteCount, ...handles);\n\n            for (const handle of handlesToDelete) {\n                this.resourceStatesMap.delete(handle);\n                this.resourceStatesCommandsMap.delete(handle);\n                this.resourceStatesDisposablesMap.get(handle)?.dispose();\n                this.resourceStatesDisposablesMap.delete(handle);\n            }\n        }\n\n        this.resourceSnapshot = snapshot;\n        return rawResourceSplices;\n    }\n\n    dispose(): void {\n        this._disposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n\n    private static handlePool: number = 0;\n    private groups: Map<GroupHandle, SsmResourceGroupImpl> = new Map<GroupHandle, SsmResourceGroupImpl>();\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    private _inputBox: ScmInputBoxImpl;\n    get inputBox(): ScmInputBoxImpl { return this._inputBox; }\n\n    private _count: number | undefined = undefined;\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count === count) {\n            return;\n        }\n\n        this._count = count;\n        this.proxy.$updateSourceControl(this.handle, { count });\n    }\n\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined = undefined;\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    private _commitTemplate: string | undefined = undefined;\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        if (commitTemplate === this._commitTemplate) {\n            return;\n        }\n\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    private acceptInputDisposables = new DisposableCollection();\n    private _acceptInputCommand: theia.Command | undefined = undefined;\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.acceptInputDisposables = new DisposableCollection();\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        const internal = this.commands.converter.toSafeCommand(acceptInputCommand, this.acceptInputDisposables);\n        this.proxy.$updateSourceControl(this.handle, { acceptInputCommand: internal });\n    }\n\n    private _statusBarDisposables = new DisposableCollection();\n    private _statusBarCommands: theia.Command[] | undefined = undefined;\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        if (this._statusBarCommands && statusBarCommands && commandListEquals(this._statusBarCommands, statusBarCommands)) {\n            return;\n        }\n\n        this._statusBarDisposables = new DisposableCollection();\n\n        this._statusBarCommands = statusBarCommands;\n\n        const internal = (statusBarCommands || []).map(c => this.commands.converter.toSafeCommand(c, this._statusBarDisposables)) as Command[];\n        this.proxy.$updateSourceControl(this.handle, { statusBarCommands: internal });\n    }\n\n    private _selected: boolean = false;\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private handle: number = SourceControlImpl.handlePool++;\n\n    constructor(\n        plugin: Plugin,\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new ScmInputBoxImpl(plugin, this.proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri);\n    }\n\n    private createdResourceGroups = new Map<SsmResourceGroupImpl, Disposable>();\n    private updatedResourceGroups = new Set<SsmResourceGroupImpl>();\n\n    createResourceGroup(id: string, label: string): SsmResourceGroupImpl {\n        const group = new SsmResourceGroupImpl(this.proxy, this.commands, this.handle, id, label);\n        const disposable = group.onDidDispose(() => this.createdResourceGroups.delete(group));\n        this.createdResourceGroups.set(group, disposable);\n        this.eventuallyAddResourceGroups();\n        return group;\n    }\n\n    eventuallyAddResourceGroups(): void {\n        const groups: ScmRawResourceGroup[] = [];\n        const splices: ScmRawResourceSplices[] = [];\n\n        for (const [group, disposable] of this.createdResourceGroups) {\n            disposable.dispose();\n\n            const updateListener = group.onDidUpdateResourceStates(() => {\n                this.updatedResourceGroups.add(group);\n                this.eventuallyUpdateResourceStates();\n            });\n\n            group.onDidDispose(() => {\n                this.updatedResourceGroups.delete(group);\n                updateListener.dispose();\n                this.groups.delete(group.handle);\n                this.proxy.$unregisterGroup(this.handle, group.handle);\n            });\n\n            const { handle, id, label, features } = group;\n            groups.push({ handle, id, label, features });\n\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length > 0) {\n                splices.push({ handle: group.handle, splices: snapshot });\n            }\n\n            this.groups.set(group.handle, group);\n        }\n\n        this.proxy.$registerGroups(this.handle, groups, splices);\n        this.createdResourceGroups.clear();\n    }\n\n    eventuallyUpdateResourceStates(): void {\n        const splices: ScmRawResourceSplices[] = [];\n\n        this.updatedResourceGroups.forEach(group => {\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length === 0) {\n                return;\n            }\n\n            splices.push({ handle: group.handle, splices: snapshot });\n        });\n\n        if (splices.length > 0) {\n            this.proxy.$spliceResourceStates(this.handle, splices);\n        }\n\n        this.updatedResourceGroups.clear();\n    }\n\n    getResourceGroup(handle: GroupHandle): SsmResourceGroupImpl | undefined {\n        return this.groups.get(handle);\n    }\n\n    setSelectionState(selected: boolean): void {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n\n    dispose(): void {\n        this.acceptInputDisposables.dispose();\n        this._statusBarDisposables.dispose();\n\n        this.groups.forEach(group => group.dispose());\n        this.proxy.$unregisterSourceControl(this.handle);\n    }\n}\n\nexport class ScmExtImpl implements ScmExt {\n\n    private static handlePool: number = 0;\n\n    private proxy: ScmMain;\n    private sourceControls: Map<ProviderHandle, SourceControlImpl> = new Map<ProviderHandle, SourceControlImpl>();\n    private sourceControlsByExtension: Map<string, SourceControlImpl[]> = new Map<string, SourceControlImpl[]>();\n\n    private readonly onDidChangeActiveProviderEmitter = new Emitter<theia.SourceControl>();\n    get onDidChangeActiveProvider(): Event<theia.SourceControl> { return this.onDidChangeActiveProviderEmitter.event; }\n\n    private selectedSourceControlHandle: number | undefined;\n\n    constructor(rpc: RPCProtocol, private commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n\n        commands.registerArgumentProcessor({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControls.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(extension: Plugin, id: string, label: string, rootUri: theia.Uri | undefined): theia.SourceControl {\n        const handle = ScmExtImpl.handlePool++;\n        const sourceControl = new SourceControlImpl(extension, this.proxy, this.commands, id, label, rootUri);\n        this.sourceControls.set(handle, sourceControl);\n\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByExtension.set(extension.model.id, sourceControls);\n\n        return sourceControl;\n    }\n\n    getLastInputBox(extension: Plugin): ScmInputBoxImpl | undefined {\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        return sourceControl && sourceControl.inputBox;\n    }\n\n    $provideOriginalResource(sourceControlHandle: number, uriComponents: string, token: theia.CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl || !sourceControl.quickDiffProvider || !sourceControl.quickDiffProvider.provideOriginalResource) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise<UriComponents | undefined>(() => sourceControl.quickDiffProvider!.provideOriginalResource!(URI.file(uriComponents), token))\n            .then<UriComponents | undefined>(r => r || undefined);\n    }\n\n    $onInputBoxValueChange(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        sourceControl.inputBox.onInputBoxValueChange(value);\n        return Promise.resolve(undefined);\n    }\n\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, handle: number): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        const group = sourceControl.getResourceGroup(groupHandle);\n\n        if (!group) {\n            return Promise.resolve(undefined);\n        }\n\n        return group.executeResourceCommand(handle);\n    }\n\n    async $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        if (!sourceControl.inputBox.validateInput) {\n            return Promise.resolve(undefined);\n        }\n\n        const result = await sourceControl.inputBox.validateInput!(value, cursorPosition);\n        if (!result) {\n            return Promise.resolve(undefined);\n        }\n        return [result.message, result.type];\n    }\n\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void> {\n        if (selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(selectedSourceControlHandle)?.setSelectionState(true);\n        }\n\n        if (this.selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(this.selectedSourceControlHandle)?.setSelectionState(false);\n        }\n\n        this.selectedSourceControlHandle = selectedSourceControlHandle;\n        return Promise.resolve(undefined);\n    }\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nfunction sortedDiff(before: ReadonlyArray<theia.SourceControlResourceState>,\n    after: ReadonlyArray<theia.SourceControlResourceState>,\n    compare: (a: theia.SourceControlResourceState,\n        b: theia.SourceControlResourceState) => number): Splice<theia.SourceControlResourceState>[] {\n    const result: MutableSplice<theia.SourceControlResourceState>[] = [];\n\n    function pushSplice(start: number, deleteCount: number, toInsert: theia.SourceControlResourceState[]): void {\n        if (deleteCount === 0 && toInsert.length === 0) {\n            return;\n        }\n\n        const latest = result[result.length - 1];\n\n        if (latest && latest.start + latest.deleteCount === start) {\n            latest.deleteCount += deleteCount;\n            latest.toInsert.push(...toInsert);\n        } else {\n            result.push({ start, deleteCount, toInsert });\n        }\n    }\n\n    let beforeIdx = 0;\n    let afterIdx = 0;\n\n    while (true) {\n        if (beforeIdx === before.length) {\n            pushSplice(beforeIdx, 0, after.slice(afterIdx));\n            break;\n        }\n        if (afterIdx === after.length) {\n            pushSplice(beforeIdx, before.length - beforeIdx, []);\n            break;\n        }\n\n        const beforeElement = before[beforeIdx];\n        const afterElement = after[afterIdx];\n        const n = compare(beforeElement, afterElement);\n        if (n === 0) {\n            // equal\n            beforeIdx += 1;\n            afterIdx += 1;\n        } else if (n < 0) {\n            // beforeElement is smaller -> before element removed\n            pushSplice(beforeIdx, 1, []);\n            beforeIdx += 1;\n        } else if (n > 0) {\n            // beforeElement is greater -> after element added\n            pushSplice(beforeIdx, 0, [afterElement]);\n            afterIdx += 1;\n        }\n    }\n\n    return result;\n}\n\ninterface MutableSplice<T> extends Splice<T> {\n    deleteCount: number;\n}\n","/********************************************************************************\n * Copyright (C) 2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.55.2/src/vs/workbench/api/common/extHostSecrets.ts\n\nimport { Plugin, PLUGIN_RPC_CONTEXT, SecretsExt, SecretsMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class SecretsExtImpl implements SecretsExt {\n    private proxy: SecretsMain;\n    private onDidChangePasswordEmitter = new Emitter<{ extensionId: string, key: string }>();\n    readonly onDidChangePassword = this.onDidChangePasswordEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SECRETS_MAIN);\n    }\n\n    async $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void> {\n        this.onDidChangePasswordEmitter.fire(e);\n    }\n\n    get(extensionId: string, key: string): Promise<string | undefined> {\n        return this.proxy.$getPassword(extensionId, key);\n    }\n\n    store(extensionId: string, key: string, value: string): Promise<void> {\n        return this.proxy.$setPassword(extensionId, key, value);\n    }\n\n    delete(extensionId: string, key: string): Promise<void> {\n        return this.proxy.$deletePassword(extensionId, key);\n    }\n}\n\nexport class SecretStorageExt implements theia.SecretStorage {\n\n    protected readonly id: string;\n    readonly secretState: SecretsExtImpl;\n\n    private onDidChangeEmitter = new Emitter<theia.SecretStorageChangeEvent>();\n    readonly onDidChange: Event<theia.SecretStorageChangeEvent> = this.onDidChangeEmitter.event;\n\n    constructor(pluginDescription: Plugin, secretState: SecretsExtImpl) {\n        this.id = pluginDescription.model.id.toLowerCase();\n        this.secretState = secretState;\n\n        this.secretState.onDidChangePassword(e => {\n            if (e.extensionId === this.id) {\n                this.onDidChangeEmitter.fire({ key: e.key });\n            }\n        });\n    }\n\n    get(key: string): Promise<string | undefined> {\n        return this.secretState.get(this.id, key);\n    }\n\n    store(key: string, value: string): Promise<void> {\n        return this.secretState.store(this.id, key, value);\n    }\n\n    delete(key: string): Promise<void> {\n        return this.secretState.delete(this.id, key);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority);\n    }\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    private readonly id = StatusBarItemImpl.nextId();\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _text: string;\n    private _tooltip: string;\n    private _color: string | ThemeColor;\n    private _command: string | theia.Command;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor {\n        return this._color;\n    }\n\n    public get command(): string | theia.Command {\n        return this._command;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor) {\n        this._color = color;\n        this.update();\n    }\n\n    public set command(command: string | theia.Command) {\n        this._command = command;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            const commandId = typeof this.command === 'object' ? this.command.command : this.command;\n            const args = typeof this.command === 'object' ? this.command.arguments : undefined;\n            // Set to status bar\n            this._proxy.$setMessage(this.id, this.text,\n                this.priority,\n                this.alignment,\n                typeof this.color === 'string' ? this.color : this.color && this.color.id,\n                this.tooltip,\n                commandId,\n                args);\n        }, 0);\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { TaskDto } from '../../common';\n\nexport class TaskProviderAdapter {\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return undefined;\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveTask(task: TaskDto, token: theia.CancellationToken): Promise<TaskDto | undefined> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const item = Converter.toTask(task);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n\n        return Promise.resolve(this.provider.resolveTask(item, token)).then(value => {\n            if (value) {\n                return Converter.fromTask(value);\n            }\n            return undefined;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { CustomExecution, Disposable } from '../types-impl';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { TerminalServiceExtImpl } from '../terminal-ext';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\ntype ExecutionCallback = (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n    protected callbackIdBase: string = UUID.uuid4();\n    protected callbackId: number;\n    protected customExecutionIds: Map<ExecutionCallback, string> = new Map();\n    protected customExecutionFunctions: Map<string, ExecutionCallback> = new Map();\n    protected lastStartedTask: number | undefined;\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    constructor(rpc: RPCProtocol, readonly terminalExt: TerminalServiceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    async $onDidStartTask(execution: TaskExecutionDto, terminalId: number): Promise<void> {\n        const customExecution = this.customExecutionFunctions.get(execution.task.executionId || '');\n        if (customExecution) {\n            const taskDefinition = converter.toTask(execution.task).definition;\n            const pty = await customExecution(taskDefinition);\n            this.terminalExt.attachPtyToTerminal(terminalId, pty);\n            if (pty.onDidClose) {\n                const disposable = pty.onDidClose((e: number | void = undefined) => {\n                    disposable.dispose();\n                    // eslint-disable-next-line no-void\n                    this.proxy.$customExecutionComplete(execution.id, e === void 0 ? undefined : e);\n                });\n            }\n        }\n        this.lastStartedTask = execution.id;\n\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            // If this task is a custom execution, then we need to save it away\n            // in the provided custom execution map that is cleaned up after the\n            // task is executed.\n            if (CustomExecution.is(task.execution!)) {\n                taskDto.executionId = this.addCustomExecution(task.execution!.callback);\n            }\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    $provideTasks(handle: number): Promise<TaskDto[] | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(CancellationToken.None).then(tasks => {\n                if (tasks) {\n                    for (const task of tasks) {\n                        if (task.taskType === 'customExecution') {\n                            task.executionId = this.addCustomExecution(task.callback);\n                            task.callback = undefined;\n                        }\n                    }\n                }\n                return tasks;\n            });\n        } else {\n            return Promise.reject(new Error('No adapter found to provide tasks'));\n        }\n    }\n\n    $resolveTask(handle: number, task: TaskDto, token: theia.CancellationToken): Promise<TaskDto | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token).then(resolvedTask => {\n                if (resolvedTask && resolvedTask.taskType === 'customExecution') {\n                    resolvedTask.executionId = this.addCustomExecution(resolvedTask.callback);\n                    resolvedTask.callback = undefined;\n                }\n                return resolvedTask;\n            });\n        } else {\n            return Promise.reject(new Error('No adapter found to resolve task'));\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    // Initial `this.executions` map with the running tasks from the previous session\n    async $initLoadedTasks(taskExecutions: TaskExecutionDto[]): Promise<void> {\n        taskExecutions.forEach(execution => this.getTaskExecution(execution));\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n\n    private addCustomExecution(callback: ExecutionCallback): string {\n        let id = this.customExecutionIds.get(callback);\n        if (!id) {\n            id = this.nextCallbackId();\n            this.customExecutionIds.set(callback, id);\n            this.customExecutionFunctions.set(id, callback);\n        }\n        return id;\n    }\n\n    private nextCallbackId(): string {\n        return this.callbackIdBase + this.callbackId++;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { Terminal, TerminalOptions, PseudoTerminalOptions } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport * as theia from '@theia/plugin';\nimport { EnvironmentVariableMutatorType } from './types-impl';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n\n    private readonly _terminals = new Map<string, TerminalExtImpl>();\n\n    private readonly _pseudoTerminals = new Map<string, PseudoTerminal>();\n\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidCloseTerminal: theia.Event<Terminal> = this.onDidCloseTerminalEmitter.event;\n\n    private readonly onDidOpenTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidOpenTerminal: theia.Event<Terminal> = this.onDidOpenTerminalEmitter.event;\n\n    private readonly onDidChangeActiveTerminalEmitter = new Emitter<Terminal | undefined>();\n    readonly onDidChangeActiveTerminal: theia.Event<Terminal | undefined> = this.onDidChangeActiveTerminalEmitter.event;\n\n    protected environmentVariableCollections: Map<string, EnvironmentVariableCollection> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    get terminals(): TerminalExtImpl[] {\n        return [...this._terminals.values()];\n    }\n\n    createTerminal(nameOrOptions: TerminalOptions | PseudoTerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): Terminal {\n        let options: TerminalOptions;\n        let pseudoTerminal: theia.Pseudoterminal | undefined = undefined;\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        if (typeof nameOrOptions === 'object') {\n            if ('pty' in nameOrOptions) {\n                pseudoTerminal = nameOrOptions.pty;\n                options = {\n                    name: nameOrOptions.name,\n                };\n                this._pseudoTerminals.set(id, new PseudoTerminal(id, this.proxy, pseudoTerminal));\n            } else {\n                options = nameOrOptions;\n            }\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n        this.proxy.$createTerminal(id, options, !!pseudoTerminal);\n        return this.obtainTerminal(id, options.name || 'Terminal');\n    }\n\n    attachPtyToTerminal(terminalId: number, pty: theia.Pseudoterminal): void {\n        this._pseudoTerminals.set(terminalId.toString(), new PseudoTerminal(terminalId, this.proxy, pty, true));\n    }\n\n    protected obtainTerminal(id: string, name: string): TerminalExtImpl {\n        let terminal = this._terminals.get(id);\n        if (!terminal) {\n            terminal = new TerminalExtImpl(this.proxy);\n            this._terminals.set(id, terminal);\n        }\n        terminal.name = name;\n        return terminal;\n    }\n\n    $terminalOnInput(id: string, data: string): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnInput(data);\n    }\n\n    $terminalSizeChanged(id: string, clos: number, rows: number): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnResize(clos, rows);\n    }\n\n    $terminalCreated(id: string, name: string): void {\n        const terminal = this.obtainTerminal(id, name);\n        terminal.id.resolve(id);\n        this.onDidOpenTerminalEmitter.fire(terminal);\n    }\n\n    $terminalNameChanged(id: string, name: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.name = name;\n        }\n    }\n\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            // resolve for existing clients\n            terminal.deferredProcessId.resolve(processId);\n            // install new if terminal is reconnected\n            terminal.deferredProcessId = new Deferred<number>();\n            terminal.deferredProcessId.resolve(processId);\n        }\n        const pseudoTerminal = this._pseudoTerminals.get(terminalId.toString());\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnOpen(cols, rows);\n        }\n    }\n\n    $terminalClosed(id: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            this.onDidCloseTerminalEmitter.fire(terminal);\n            this._terminals.delete(id);\n        }\n        const pseudoTerminal = this._pseudoTerminals.get(id);\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnClose();\n            this._pseudoTerminals.delete(id);\n        }\n    }\n\n    private activeTerminalId: string | undefined;\n    get activeTerminal(): TerminalExtImpl | undefined {\n        return this.activeTerminalId && this._terminals.get(this.activeTerminalId) || undefined;\n    }\n    $currentTerminalChanged(id: string | undefined): void {\n        this.activeTerminalId = id;\n        this.onDidChangeActiveTerminalEmitter.fire(this.activeTerminal);\n    }\n\n    /*---------------------------------------------------------------------------------------------\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\n     *--------------------------------------------------------------------------------------------*/\n    // some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.0/src/vs/workbench/api/common/extHostTerminalService.ts\n\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection {\n        let collection = this.environmentVariableCollections.get(extensionIdentifier);\n        if (!collection) {\n            collection = new EnvironmentVariableCollection();\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        }\n        return collection;\n    }\n\n    private syncEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        const serialized = [...collection.map.entries()];\n        this.proxy.$setEnvironmentVariableCollection(extensionIdentifier, collection.persistent, serialized.length === 0 ? undefined : serialized);\n    }\n\n    private setEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        this.environmentVariableCollections.set(extensionIdentifier, collection);\n        collection.onDidChangeCollection(() => {\n            // When any collection value changes send this immediately, this is done to ensure\n            // following calls to createTerminal will be created with the new environment. It will\n            // result in more noise by sending multiple updates when called but collections are\n            // expected to be small.\n            this.syncEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void {\n        collections.forEach(entry => {\n            const extensionIdentifier = entry[0];\n            const collection = new EnvironmentVariableCollection(entry[1]);\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n}\n\nexport class EnvironmentVariableCollection implements theia.EnvironmentVariableCollection {\n    readonly map: Map<string, theia.EnvironmentVariableMutator> = new Map();\n    private _persistent: boolean = true;\n\n    public get persistent(): boolean { return this._persistent; }\n    public set persistent(value: boolean) {\n        this._persistent = value;\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    protected readonly onDidChangeCollectionEmitter: Emitter<void> = new Emitter<void>();\n    onDidChangeCollection: Event<void> = this.onDidChangeCollectionEmitter.event;\n\n    constructor(\n        serialized?: SerializableEnvironmentVariableCollection\n    ) {\n        this.map = new Map(serialized);\n    }\n\n    get size(): number {\n        return this.map.size;\n    }\n\n    replace(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Replace });\n    }\n\n    append(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Append });\n    }\n\n    prepend(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Prepend });\n    }\n\n    private _setIfDiffers(variable: string, mutator: theia.EnvironmentVariableMutator): void {\n        const current = this.map.get(variable);\n        if (!current || current.value !== mutator.value || current.type !== mutator.type) {\n            this.map.set(variable, mutator);\n            this.onDidChangeCollectionEmitter.fire();\n        }\n    }\n\n    get(variable: string): theia.EnvironmentVariableMutator | undefined {\n        return this.map.get(variable);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (variable: string, mutator: theia.EnvironmentVariableMutator, collection: theia.EnvironmentVariableCollection) => any, thisArg?: any): void {\n        this.map.forEach((value, key) => callback.call(thisArg, key, value, this));\n    }\n\n    delete(variable: string): void {\n        this.map.delete(variable);\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    clear(): void {\n        this.map.clear();\n        this.onDidChangeCollectionEmitter.fire();\n    }\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    name: string;\n\n    readonly id = new Deferred<string>();\n\n    deferredProcessId = new Deferred<number>();\n    get processId(): Thenable<number> {\n        return this.deferredProcessId.promise;\n    }\n\n    constructor(private readonly proxy: TerminalServiceMain) { }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.id.promise.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.id.promise.then(id => this.proxy.$show(id, preserveFocus));\n    }\n\n    hide(): void {\n        this.id.promise.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.id.promise.then(id => this.proxy.$dispose(id));\n    }\n\n}\n\nexport class PseudoTerminal {\n    constructor(\n        id: string | number,\n        private readonly proxy: TerminalServiceMain,\n        private readonly pseudoTerminal: theia.Pseudoterminal,\n        waitOnExit?: boolean | string\n    ) {\n\n        pseudoTerminal.onDidWrite(data => {\n            if (typeof id === 'string') {\n                this.proxy.$write(id, data);\n            } else {\n                this.proxy.$writeByTerminalId(id, data);\n            }\n        });\n        if (pseudoTerminal.onDidClose) {\n            pseudoTerminal.onDidClose((e: number | void = undefined) => {\n                if (typeof id === 'string') {\n                    this.proxy.$dispose(id);\n                } else {\n                    this.proxy.$disposeByTerminalId(id, waitOnExit);\n                }\n            });\n        }\n        if (pseudoTerminal.onDidOverrideDimensions) {\n            pseudoTerminal.onDidOverrideDimensions(e => {\n                if (e) {\n                    if (typeof id === 'string') {\n                        this.proxy.$resize(id, e.columns, e.rows);\n                    } else {\n                        this.proxy.$resizeByTerminalId(id, e.columns, e.rows);\n                    }\n                }\n            });\n        }\n    }\n\n    emitOnClose(): void {\n        this.pseudoTerminal.close();\n    }\n\n    emitOnInput(data: string): void {\n        if (this.pseudoTerminal.handleInput) {\n            this.pseudoTerminal.handleInput(data);\n        }\n    }\n\n    emitOnOpen(cols: number, rows: number): void {\n        this.pseudoTerminal.open({\n            rows,\n            columns: cols,\n        });\n    }\n\n    emitOnResize(cols: number, rows: number): void {\n        if (this.pseudoTerminal.setDimensions) {\n            this.pseudoTerminal.setDimensions({ columns: cols, rows });\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // eslint-disable-next-line max-len\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // eslint-disable-next-line max-len\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n            ({\n                range: Converter.fromRange(e.range)!,\n                text: e.text,\n                forceMoveMarkers: e.forceMoveMarkers\n            }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ColorTheme, ColorThemeKind } from './types-impl';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ThemingExt } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { ThemeType } from '@theia/core/lib/browser/theming';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/5ddbda0172d80bfbb2529987ba9020848e8771f7/src/vs/workbench/api/common/extHostTheming.ts\n\nexport class ThemingExtImpl implements ThemingExt {\n\n    private actual: ColorTheme;\n    private ondDidChangeActiveColorTheme: Emitter<ColorTheme>;\n\n    constructor(\n        readonly rpc: RPCProtocol\n    ) {\n        this.actual = new ColorTheme(ColorThemeKind.Dark);\n        this.ondDidChangeActiveColorTheme = new Emitter<ColorTheme>();\n    }\n\n    get activeColorTheme(): ColorTheme {\n        return this.actual;\n    }\n\n    $onColorThemeChange(type: ThemeType): void {\n        this.actual = new ColorTheme(this.convertKind(type));\n        this.ondDidChangeActiveColorTheme.fire(this.actual);\n    }\n\n    protected convertKind(type: ThemeType): ColorThemeKind {\n        let kind: ColorThemeKind;\n        switch (type) {\n            case 'light':\n                kind = ColorThemeKind.Light;\n                break;\n            case 'dark':\n                kind = ColorThemeKind.Dark;\n                break;\n            case 'hc':\n                kind = ColorThemeKind.HighContrast;\n                break;\n        }\n        return kind;\n    }\n\n    get onDidChangeActiveColorTheme(): Event<ColorTheme> {\n        return this.ondDidChangeActiveColorTheme.event;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Plugin, PLUGIN_RPC_CONTEXT, TimelineCommandArg, TimelineExt, TimelineMain } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from './command-registry';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineItem,\n    TimelineOptions,\n    TimelineProvider\n} from '@theia/timeline/lib/common/timeline-model';\nimport * as theia from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { UriComponents } from '../common/uri-components';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/theia/blob/afacd2bdfe7060f09df9b9139521718915949757/src/vs/workbench/api/common/extHostTimeline.ts\n\nexport class TimelineExtImpl implements TimelineExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TimelineMain;\n    private providers = new Map<string, TimelineProvider>();\n\n    private itemsBySourceAndUriMap = new Map<string, Map<string | undefined, Map<string, theia.TimelineItem>>>();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TIMELINE_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TimelineCommandArg.is(arg)) {\n                    return arg;\n                } else {\n                    return this.itemsBySourceAndUriMap.get(arg.source)?.get(arg.uri?.toString())?.get(arg.timelineHandle);\n                }\n            }\n        });\n    }\n\n    async $getTimeline(id: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n        const provider = this.providers.get(id);\n        return provider?.provideTimeline(URI.revive(uri), options, internalOptions);\n    }\n\n    registerTimelineProvider(plugin: Plugin, scheme: string | string[], provider: theia.TimelineProvider): Disposable {\n        const timelineDisposables = new DisposableCollection();\n\n        const convertTimelineItem = this.convertTimelineItem(provider.id, timelineDisposables).bind(this);\n\n        let disposable: Disposable | undefined;\n        if (provider.onDidChange) {\n            disposable = Disposable.from(provider.onDidChange(e => this.proxy.$fireTimelineChanged({ uri: undefined, reset: true, ...e, id: provider.id }), this));\n        }\n\n        const itemsBySourceAndUriMap = this.itemsBySourceAndUriMap;\n        return this.registerTimelineProviderCore({\n            ...provider,\n            scheme: scheme,\n            onDidChange: undefined,\n            async provideTimeline(uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n                if (internalOptions?.resetCache) {\n                    timelineDisposables.dispose();\n\n                    const items = itemsBySourceAndUriMap.get(provider.id);\n                    if (items) {\n                        items.clear();\n                    }\n                }\n\n                const result = await provider.provideTimeline(uri, options, CancellationToken.None);\n                if (!result) {\n                    return undefined;\n                }\n\n                const convertItem = convertTimelineItem(uri, internalOptions);\n                return {\n                    ...result,\n                    source: provider.id,\n                    items: result.items.map(convertItem)\n                };\n            },\n            dispose(): void {\n                for (const sourceMap of itemsBySourceAndUriMap.values()) {\n                    const source = sourceMap.get(provider.id);\n                    if (source) {\n                        source.clear();\n                    }\n                }\n\n                if (disposable) {\n                    disposable.dispose();\n                }\n                timelineDisposables.dispose();\n            }\n        });\n    }\n\n    private convertTimelineItem(source: string, disposables: DisposableCollection): (uri: URI, options?: InternalTimelineOptions) => (item: theia.TimelineItem) => TimelineItem {\n        return (uri: URI, options?: InternalTimelineOptions) => {\n            let items: Map<string, theia.TimelineItem> | undefined;\n            if (options?.cacheResults) {\n                let itemsByUri = this.itemsBySourceAndUriMap.get(source);\n                if (itemsByUri === undefined) {\n                    itemsByUri = new Map();\n                    this.itemsBySourceAndUriMap.set(source, itemsByUri);\n                }\n\n                const uriKey = getUriKey(uri);\n                items = itemsByUri.get(uriKey);\n                if (items === undefined) {\n                    items = new Map();\n                    itemsByUri.set(uriKey, items);\n                }\n            }\n\n            return (item: theia.TimelineItem): TimelineItem => {\n                const { iconPath, ...props } = item;\n\n                const handle = `${source}|${item.id ?? item.timestamp}`;\n                if (items) {\n                    items.set(handle, item);\n                }\n\n                return {\n                    ...props,\n                    uri: uri.toString(),\n                    id: props.id ?? undefined,\n                    handle: handle,\n                    source: source,\n                    command: item.command ? this.commands.converter.toSafeCommand(item.command, disposables) : undefined,\n                };\n            };\n        };\n    }\n\n    private registerTimelineProviderCore(provider: TimelineProvider): Disposable {\n        const existing = this.providers.get(provider.id);\n        if (existing) {\n            throw new Error(`Timeline Provider ${provider.id} already exists.`);\n        }\n\n        this.proxy.$registerTimelineProvider({\n            id: provider.id,\n            label: provider.label,\n            scheme: provider.scheme\n        });\n        this.providers.set(provider.id, provider);\n\n        return Disposable.create(() => {\n            for (const sourceMap of this.itemsBySourceAndUriMap.values()) {\n                const items = sourceMap.get(provider.id);\n                if (items) {\n                    items.clear();\n                }\n            }\n\n            this.providers.delete(provider.id);\n            this.proxy.$unregisterTimelineProvider(provider.id);\n            provider.dispose();\n        });\n    }\n}\n\nfunction getUriKey(uri: URI | undefined): string | undefined {\n    return uri?.toString();\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem2, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Disposable as PluginDisposable, ThemeIcon } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem, TreeViewRevealOptions } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewSelection } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n\n    private proxy: TreeViewsMain;\n\n    private readonly treeViews = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TreeViewSelection.is(arg)) {\n                    return arg;\n                }\n                const { treeViewId, treeItemId } = arg;\n                const treeView = this.treeViews.get(treeViewId);\n                return treeView && treeView.getTreeItem(treeItemId);\n            }\n        });\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: { treeDataProvider: TreeDataProvider<T> }): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl(plugin, treeViewId, options.treeDataProvider, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            get selection() {\n                return treeView.selectedElements;\n            },\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            get visible() {\n                return treeView.visible;\n            },\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            get message(): string {\n                return treeView.message;\n            },\n            set message(message: string) {\n                treeView.message = message;\n            },\n            get title(): string {\n                return treeView.title;\n            },\n            set title(title: string) {\n                treeView.title = title;\n            },\n            get description(): string {\n                return treeView.description;\n            },\n            set description(description: string) {\n                treeView.description = description;\n            },\n            reveal: (element: T, revealOptions?: Partial<TreeViewRevealOptions>): Thenable<void> =>\n                treeView.reveal(element, revealOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.getTreeView(treeViewId);\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.getTreeView(treeViewId);\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        this.getTreeView(treeViewId).setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        this.getTreeView(treeViewId).setVisible(isVisible);\n    }\n\n    protected getTreeView(treeViewId: string): TreeViewExtImpl<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error(`No tree view with id '${treeViewId}' registered.`);\n        }\n        return treeView;\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n    private pendingRefresh = Promise.resolve();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private treeDataProvider: TreeDataProvider<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter) {\n\n        proxy.$registerTreeDataProvider(treeViewId);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n\n        if (treeDataProvider.onDidChangeTreeData) {\n            treeDataProvider.onDidChangeTreeData((e: T) => {\n                this.pendingRefresh = proxy.$refresh(treeViewId);\n            });\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, options?: Partial<TreeViewRevealOptions>): Promise<void> {\n        await this.pendingRefresh;\n\n        const elementParentChain = await this.calculateRevealParentChain(element);\n        if (elementParentChain) {\n            return this.proxy.$reveal(this.treeViewId, elementParentChain, {\n                select: true, focus: false, expand: false, ...options\n            });\n        }\n    }\n\n    private _message: string = '';\n    get message(): string {\n        return this._message;\n    }\n\n    set message(message: string) {\n        this._message = message;\n        this.proxy.$setMessage(this.treeViewId, this._message);\n    }\n\n    private _title: string = '';\n    get title(): string {\n        return this._title;\n    }\n\n    set title(title: string) {\n        this._title = title;\n        this.proxy.$setTitle(this.treeViewId, title);\n    }\n\n    private _description: string = '';\n    get description(): string {\n        return this._description;\n    }\n\n    set description(description: string) {\n        this._description = description;\n        this.proxy.$setDescription(this.treeViewId, this._description);\n    }\n\n    getTreeItem(treeItemId: string): T | undefined {\n        const element = this.nodes.get(treeItemId);\n        return element && element.value;\n    }\n\n    /**\n     * calculate the chain of node ids from root to element so that the frontend can expand all of them and reveal element.\n     * this is needed as the frontend may not have the full tree nodes.\n     * throughout the parent chain this.getChildren is called in order to fill this.nodes cache.\n     *\n     * returns undefined if wasn't able to calculate the path due to inconsistencies.\n     *\n     * @param element element to reveal\n     */\n    private async calculateRevealParentChain(element: T | undefined): Promise<string[] | undefined> {\n        if (!element) {\n            // root\n            return [];\n        }\n        const parent = this.treeDataProvider.getParent && await this.treeDataProvider.getParent(element);\n        const chain = await this.calculateRevealParentChain(parent);\n        if (!chain) {\n            // parents are inconsistent\n            return undefined;\n        }\n        const parentId = chain.length ? chain[chain.length - 1] : '';\n        const treeItem = await this.treeDataProvider.getTreeItem(element);\n        if (treeItem.id) {\n            return chain.concat(treeItem.id);\n        }\n        const cachedParentNode = this.nodes.get(parentId);\n        // first try to get children length from cache since getChildren disposes old nodes, which can cause a race\n        // condition if command is executed together with reveal.\n        // If not in cache, getChildren fills this.nodes and generate ids for them which are needed later\n        const children = cachedParentNode?.children || await this.getChildren(parentId);\n        if (!children) {\n            return undefined; // parent is inconsistent\n        }\n        const idLabel = this.getTreeItemIdLabel(treeItem);\n        let possibleIndex = children.length;\n        // find the right element id by searching all possible id names in the cache\n        while (possibleIndex-- > 0) {\n            const candidateId = this.buildTreeItemId(parentId, possibleIndex, idLabel);\n            if (this.nodes.has(candidateId)) {\n                return chain.concat(candidateId);\n            }\n        }\n        // couldn't calculate consistent parent chain and id\n        return undefined;\n    }\n\n    private getTreeItemLabel(treeItem: TreeItem2): string | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        if (typeof treeItemLabel === 'object' && typeof treeItemLabel.label === 'string') {\n            return treeItemLabel.label;\n        } else {\n            return treeItem.label;\n        }\n    }\n\n    private getTreeItemIdLabel(treeItem: TreeItem2): string | undefined {\n        let idLabel = this.getTreeItemLabel(treeItem);\n        // Use resource URI if label is not set\n        if (idLabel === undefined && treeItem.resourceUri) {\n            idLabel = treeItem.resourceUri.path.toString();\n            idLabel = decodeURIComponent(idLabel);\n            if (idLabel.indexOf('/') >= 0) {\n                idLabel = idLabel.substring(idLabel.lastIndexOf('/') + 1);\n            }\n        }\n        return idLabel;\n    }\n\n    private buildTreeItemId(parentId: string, index: number, idLabel: string | undefined): string {\n        return `${parentId}/${index}:${idLabel}`;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        const parentNode = this.nodes.get(parentId);\n        const parent = parentNode?.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // place root in the cache\n        if (parentId === '') {\n            this.nodes.set(parentId, { id: '', dispose: () => { } });\n        }\n        // ask data provider for children for cached element\n        const result = await this.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItemPromises = result.map(async (value, index) => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem: TreeItem2 = await this.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                const label = this.getTreeItemLabel(treeItem);\n                const idLabel = this.getTreeItemIdLabel(treeItem);\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = treeItem.id || this.buildTreeItemId(parentId, index, idLabel);\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    value,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIconId;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (ThemeIcon.is(iconPath)) {\n                    themeIconId = iconPath.id;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                const treeViewItem = {\n                    id,\n                    label,\n                    icon,\n                    iconUrl,\n                    themeIconId,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement)\n                } as TreeViewItem;\n\n                return treeViewItem;\n            });\n\n            return Promise.all(treeItemPromises);\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getTreeItem(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as lstypes from '@theia/core/shared/vscode-languageserver-protocol';\nimport { URI } from './types-impl';\nimport * as rpc from '../common/plugin-api-rpc';\nimport {\n    DecorationOptions, EditorPosition, Plugin, Position, WorkspaceTextEditDto, WorkspaceFileEditDto, Selection, TaskDto, WorkspaceEditDto\n} from '../common/plugin-api-rpc';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { LanguageFilter, LanguageSelector, RelativePattern } from '@theia/callhierarchy/lib/common/language-selector';\nimport { isMarkdownString, MarkdownString } from './markdown-string';\nimport * as types from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { isReadonlyArray } from '../common/arrays';\n\nconst SIDE_GROUP = -2;\nconst ACTIVE_GROUP = -1;\nconst BUILD_GROUP = 'build';\nconst TEST_GROUP = 'test';\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    } else if (ep === EditorPosition.FOUR) {\n        return <number>types.ViewColumn.Four;\n    } else if (ep === EditorPosition.FIVE) {\n        return <number>types.ViewColumn.Five;\n    } else if (ep === EditorPosition.SIX) {\n        return <number>types.ViewColumn.Six;\n    } else if (ep === EditorPosition.SEVEN) {\n        return <number>types.ViewColumn.Seven;\n    } else if (ep === EditorPosition.EIGHT) {\n        return <number>types.ViewColumn.Eight;\n    } else if (ep === EditorPosition.NINE) {\n        return <number>types.ViewColumn.Nine;\n    }\n\n    return undefined;\n}\n\nexport function fromViewColumn(column?: theia.ViewColumn): number {\n    if (typeof column === 'number' && column >= types.ViewColumn.One) {\n        return column - 1;\n    }\n\n    if (column! === <number>types.ViewColumn.Beside) {\n        return SIDE_GROUP;\n    }\n\n    return ACTIVE_GROUP;\n}\n\nexport function toWebviewPanelShowOptions(options: theia.ViewColumn | theia.WebviewPanelShowOptions): theia.WebviewPanelShowOptions {\n    if (typeof options === 'object') {\n        const showOptions = options as theia.WebviewPanelShowOptions;\n        return {\n            area: showOptions.area ? showOptions.area : types.WebviewPanelTargetArea.Main,\n            viewColumn: showOptions.viewColumn ? fromViewColumn(showOptions.viewColumn) : undefined,\n            preserveFocus: showOptions.preserveFocus ? showOptions.preserveFocus : false\n        };\n    }\n\n    return {\n        area: types.WebviewPanelTargetArea.Main,\n        viewColumn: fromViewColumn(options as theia.ViewColumn),\n        preserveFocus: false\n    };\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: model.Range): types.Range {\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: undefined): undefined;\nexport function fromRange(range: theia.Range): model.Range;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isDecorationOptions(something: any): something is theia.DecorationOptions {\n    return (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map(r => ({ range: fromRange(r) }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): model.MarkdownString[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isCodeblock(thing: any): thing is Codeblock {\n    return thing && typeof thing === 'object'\n        && typeof (<Codeblock>thing).language === 'string'\n        && typeof (<Codeblock>thing).value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): model.MarkdownString {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (isMarkdownString(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: <string>markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function toMarkdown(value: model.MarkdownString): MarkdownString {\n    const ret = new MarkdownString(value.value);\n    ret.isTrusted = value.isTrusted;\n    return ret;\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (isReadonlyArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.base, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): model.CompletionItemKind {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return model.CompletionItemKind.Method;\n        case types.CompletionItemKind.Function: return model.CompletionItemKind.Function;\n        case types.CompletionItemKind.Constructor: return model.CompletionItemKind.Constructor;\n        case types.CompletionItemKind.Field: return model.CompletionItemKind.Field;\n        case types.CompletionItemKind.Variable: return model.CompletionItemKind.Variable;\n        case types.CompletionItemKind.Class: return model.CompletionItemKind.Class;\n        case types.CompletionItemKind.Interface: return model.CompletionItemKind.Interface;\n        case types.CompletionItemKind.Struct: return model.CompletionItemKind.Struct;\n        case types.CompletionItemKind.Module: return model.CompletionItemKind.Module;\n        case types.CompletionItemKind.Property: return model.CompletionItemKind.Property;\n        case types.CompletionItemKind.Unit: return model.CompletionItemKind.Unit;\n        case types.CompletionItemKind.Value: return model.CompletionItemKind.Value;\n        case types.CompletionItemKind.Constant: return model.CompletionItemKind.Constant;\n        case types.CompletionItemKind.Enum: return model.CompletionItemKind.Enum;\n        case types.CompletionItemKind.EnumMember: return model.CompletionItemKind.EnumMember;\n        case types.CompletionItemKind.Keyword: return model.CompletionItemKind.Keyword;\n        case types.CompletionItemKind.Snippet: return model.CompletionItemKind.Snippet;\n        case types.CompletionItemKind.Text: return model.CompletionItemKind.Text;\n        case types.CompletionItemKind.Color: return model.CompletionItemKind.Color;\n        case types.CompletionItemKind.File: return model.CompletionItemKind.File;\n        case types.CompletionItemKind.Reference: return model.CompletionItemKind.Reference;\n        case types.CompletionItemKind.Folder: return model.CompletionItemKind.Folder;\n        case types.CompletionItemKind.Event: return model.CompletionItemKind.Event;\n        case types.CompletionItemKind.Operator: return model.CompletionItemKind.Operator;\n        case types.CompletionItemKind.TypeParameter: return model.CompletionItemKind.TypeParameter;\n        case types.CompletionItemKind.User: return model.CompletionItemKind.User;\n        case types.CompletionItemKind.Issue: return model.CompletionItemKind.Issue;\n    }\n    return model.CompletionItemKind.Property;\n}\n\nexport function toCompletionItemKind(kind?: model.CompletionItemKind): types.CompletionItemKind {\n    switch (kind) {\n        case model.CompletionItemKind.Method: return types.CompletionItemKind.Method;\n        case model.CompletionItemKind.Function: return types.CompletionItemKind.Function;\n        case model.CompletionItemKind.Constructor: return types.CompletionItemKind.Constructor;\n        case model.CompletionItemKind.Field: return types.CompletionItemKind.Field;\n        case model.CompletionItemKind.Variable: return types.CompletionItemKind.Variable;\n        case model.CompletionItemKind.Class: return types.CompletionItemKind.Class;\n        case model.CompletionItemKind.Interface: return types.CompletionItemKind.Interface;\n        case model.CompletionItemKind.Struct: return types.CompletionItemKind.Struct;\n        case model.CompletionItemKind.Module: return types.CompletionItemKind.Module;\n        case model.CompletionItemKind.Property: return types.CompletionItemKind.Property;\n        case model.CompletionItemKind.Unit: return types.CompletionItemKind.Unit;\n        case model.CompletionItemKind.Value: return types.CompletionItemKind.Value;\n        case model.CompletionItemKind.Constant: return types.CompletionItemKind.Constant;\n        case model.CompletionItemKind.Enum: return types.CompletionItemKind.Enum;\n        case model.CompletionItemKind.EnumMember: return types.CompletionItemKind.EnumMember;\n        case model.CompletionItemKind.Keyword: return types.CompletionItemKind.Keyword;\n        case model.CompletionItemKind.Snippet: return types.CompletionItemKind.Snippet;\n        case model.CompletionItemKind.Text: return types.CompletionItemKind.Text;\n        case model.CompletionItemKind.Color: return types.CompletionItemKind.Color;\n        case model.CompletionItemKind.File: return types.CompletionItemKind.File;\n        case model.CompletionItemKind.Reference: return types.CompletionItemKind.Reference;\n        case model.CompletionItemKind.Folder: return types.CompletionItemKind.Folder;\n        case model.CompletionItemKind.Event: return types.CompletionItemKind.Event;\n        case model.CompletionItemKind.Operator: return types.CompletionItemKind.Operator;\n        case model.CompletionItemKind.TypeParameter: return types.CompletionItemKind.TypeParameter;\n        case model.CompletionItemKind.User: return types.CompletionItemKind.User;\n        case model.CompletionItemKind.Issue: return types.CompletionItemKind.Issue;\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): model.TextEdit {\n    return {\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): model.MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nfunction convertCode(code: string | number | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    } else {\n        return code;\n    }\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): model.RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: model.RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri.toString(),\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary:\n                markerTags.push(types.MarkerTag.Unnecessary);\n                break;\n            case types.DiagnosticTag.Deprecated:\n                markerTags.push(types.MarkerTag.Deprecated);\n                break;\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): model.Hover {\n    return <model.Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromLocation(location: theia.Location): model.Location {\n    return <model.Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromTextDocumentShowOptions(options: theia.TextDocumentShowOptions): model.TextDocumentShowOptions {\n    if (options.selection) {\n        return {\n            ...options,\n            selection: fromRange(options.selection),\n        };\n    }\n    return options as model.TextDocumentShowOptions;\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): model.LocationLink {\n    return <model.LocationLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        originSelectionRange: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        targetSelectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport namespace DocumentLink {\n\n    export function from(link: theia.DocumentLink): model.DocumentLink {\n        return {\n            range: fromRange(link.range),\n            url: link.target,\n            tooltip: link.tooltip\n        };\n    }\n\n    export function to(link: model.DocumentLink): theia.DocumentLink {\n        let target: URI | undefined = undefined;\n        if (link.url) {\n            try {\n                target = typeof link.url === 'string' ? URI.parse(link.url, true) : URI.revive(link.url);\n            } catch (err) {\n                // ignore\n            }\n        }\n        return new types.DocumentLink(toRange(link.range), target);\n    }\n}\n\nexport function fromDocumentHighlightKind(kind?: theia.DocumentHighlightKind): model.DocumentHighlightKind | undefined {\n    switch (kind) {\n        case types.DocumentHighlightKind.Text: return model.DocumentHighlightKind.Text;\n        case types.DocumentHighlightKind.Read: return model.DocumentHighlightKind.Read;\n        case types.DocumentHighlightKind.Write: return model.DocumentHighlightKind.Write;\n    }\n    return model.DocumentHighlightKind.Text;\n}\n\nexport function fromDocumentHighlight(documentHighlight: theia.DocumentHighlight): model.DocumentHighlight {\n    return <model.DocumentHighlight>{\n        range: fromRange(documentHighlight.range),\n        kind: fromDocumentHighlightKind(documentHighlight.kind)\n    };\n}\n\nexport namespace ParameterInformation {\n    export function from(info: types.ParameterInformation): model.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined\n        };\n    }\n    export function to(info: model.ParameterInformation): types.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation\n        };\n    }\n}\n\nexport namespace SignatureInformation {\n\n    export function from(info: types.SignatureInformation): model.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.from)\n        };\n    }\n\n    export function to(info: model.SignatureInformation): types.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.to)\n        };\n    }\n}\n\nexport namespace SignatureHelp {\n\n    export function from(id: number, help: types.SignatureHelp): model.SignatureHelp {\n        return {\n            id,\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.from)\n        };\n    }\n\n    export function to(help: model.SignatureHelp): types.SignatureHelp {\n        return {\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.to)\n        };\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        const [uri, uriOrEdits] = entry;\n        if (Array.isArray(uriOrEdits)) {\n            // text edits\n            const doc = documents ? documents.getDocument(uri.toString()) : undefined;\n            result.edits.push(<WorkspaceTextEditDto>{ resource: uri, modelVersionId: doc && doc.version, edit: uriOrEdits.map(fromTextEdit)[0], metadata: entry[2] });\n        } else {\n            // resource edits\n            result.edits.push(<WorkspaceFileEditDto>{ oldUri: uri, newUri: uriOrEdits, options: entry[2], metadata: entry[3] });\n        }\n    }\n    return result;\n}\n\nexport namespace SymbolKind {\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[model.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[model.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[model.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[model.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[model.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[model.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[model.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[model.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[model.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[model.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[model.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[model.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[model.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[model.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[model.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[model.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[model.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[model.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[model.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[model.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[model.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[model.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[model.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[model.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[model.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[model.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: theia.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    export function toSymbolKind(kind: model.SymbolKind): theia.SymbolKind {\n        for (const k in fromMapping) {\n            if (fromMapping[k] === kind) {\n                return Number(k);\n            }\n        }\n        return model.SymbolKind.Property;\n    }\n}\n\nexport function fromDocumentSymbol(info: theia.DocumentSymbol): model.DocumentSymbol {\n    const result: model.DocumentSymbol = {\n        name: info.name,\n        detail: info.detail,\n        range: fromRange(info.range)!,\n        tags: info.tags ? info.tags.map(fromSymbolTag) : [],\n        selectionRange: fromRange(info.selectionRange)!,\n        kind: SymbolKind.fromSymbolKind(info.kind)\n    };\n    if (info.children) {\n        result.children = info.children.map(fromDocumentSymbol);\n    }\n    return result;\n}\n\nexport function toDocumentSymbol(symbol: model.DocumentSymbol): theia.DocumentSymbol {\n    return {\n        name: symbol.name,\n        detail: symbol.detail,\n        range: toRange(symbol.range)!,\n        tags: symbol.tags && symbol.tags.length > 0 ? symbol.tags.map(toSymbolTag) : [],\n        selectionRange: toRange(symbol.selectionRange)!,\n        children: symbol.children ? symbol.children.map(toDocumentSymbol) : [],\n        kind: SymbolKind.toSymbolKind(symbol.kind)\n    };\n}\n\nexport function fromSymbolTag(kind: types.SymbolTag): model.SymbolTag {\n    switch (kind) {\n        case types.SymbolTag.Deprecated: return model.SymbolTag.Deprecated;\n    }\n}\n\nexport function toSymbolTag(kind: model.SymbolTag): types.SymbolTag {\n    switch (kind) {\n        case model.SymbolTag.Deprecated: return types.SymbolTag.Deprecated;\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelLocation(thing: any): thing is model.Location {\n    if (!thing) {\n        return false;\n    }\n    return isModelRange((<model.Location>thing).range) &&\n        isUriComponents((<model.Location>thing).uri);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelRange(thing: any): thing is model.Range {\n    if (!thing) {\n        return false;\n    }\n    return (('startLineNumber' in thing) && typeof thing.startLineNumber === 'number') &&\n        (('startColumn' in thing) && typeof thing.startColumn === 'number') &&\n        (('endLineNumber' in thing) && typeof thing.endLineNumber === 'number') &&\n        (('endColumn' in thing) && typeof thing.endColumn === 'number');\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isUriComponents(thing: any): thing is UriComponents {\n    if (!thing) {\n        return false;\n    }\n    return (('scheme' in thing) && typeof thing.scheme === 'string') &&\n        (('path' in thing) && typeof thing.path === 'string') &&\n        (('query' in thing) && typeof thing.query === 'string') &&\n        (('fragment' in thing) && typeof thing.fragment === 'string');\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyItem(thing: any): thing is model.CallHierarchyItem {\n    if (!thing) {\n        return false;\n    }\n    return isModelRange(thing.range)\n        && isModelRange(thing.selectionRange)\n        && isUriComponents(thing.uri)\n        && !!thing.name;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyIncomingCall(thing: any): thing is model.CallHierarchyIncomingCall {\n    if (!thing) {\n        return false;\n    }\n    const maybeIncomingCall = thing as model.CallHierarchyIncomingCall;\n    return 'from' in maybeIncomingCall && 'fromRanges' in maybeIncomingCall && isModelCallHierarchyItem(maybeIncomingCall.from);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isModelCallHierarchyOutgoingCall(thing: any): thing is model.CallHierarchyOutgoingCall {\n    if (!thing) {\n        return false;\n    }\n    const maybeOutgoingCall = thing as model.CallHierarchyOutgoingCall;\n    return 'to' in maybeOutgoingCall && 'fromRanges' in maybeOutgoingCall && isModelCallHierarchyItem(maybeOutgoingCall.to);\n}\n\nexport function toLocation(value: model.Location): types.Location {\n    return new types.Location(URI.revive(value.uri), toRange(value.range));\n}\n\nexport function fromCallHierarchyItem(item: theia.CallHierarchyItem): model.CallHierarchyItem {\n    return <model.CallHierarchyItem>{\n        kind: SymbolKind.fromSymbolKind(item.kind),\n        name: item.name,\n        detail: item.detail,\n        uri: item.uri,\n        range: fromRange(item.range),\n        selectionRange: fromRange(item.selectionRange),\n        tags: item.tags,\n        data: item.data,\n    };\n}\n\nexport function toCallHierarchyItem(value: model.CallHierarchyItem): types.CallHierarchyItem {\n    const item = new types.CallHierarchyItem(\n        SymbolKind.toSymbolKind(value.kind),\n        value.name,\n        value.detail ? value.detail : '',\n        URI.revive(value.uri),\n        toRange(value.range),\n        toRange(value.selectionRange),\n    );\n    item.tags = value.tags;\n    item.data = value.data;\n    return item;\n}\n\nexport function toCallHierarchyIncomingCall(value: model.CallHierarchyIncomingCall): types.CallHierarchyIncomingCall {\n    return new types.CallHierarchyIncomingCall(\n        toCallHierarchyItem(value.from),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toCallHierarchyOutgoingCall(value: model.CallHierarchyOutgoingCall): types.CallHierarchyOutgoingCall {\n    return new types.CallHierarchyOutgoingCall(\n        toCallHierarchyItem(value.to),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toWorkspaceFolder(folder: model.WorkspaceFolder): theia.WorkspaceFolder {\n    return {\n        uri: URI.revive(folder.uri),\n        name: folder.name,\n        index: folder.index\n    };\n}\n\nexport function fromTask(task: theia.Task): TaskDto | undefined {\n    if (!task) {\n        return undefined;\n    }\n\n    const taskDto = {} as TaskDto;\n    taskDto.label = task.name;\n    taskDto.source = task.source;\n\n    if ((task as types.Task).hasProblemMatchers) {\n        taskDto.problemMatcher = task.problemMatchers;\n    }\n    if ('detail' in task) {\n        taskDto.detail = (task as theia.Task2).detail;\n    }\n    if (typeof task.scope === 'object') {\n        taskDto.scope = task.scope.uri.toString();\n    } else if (typeof task.scope === 'number') {\n        taskDto.scope = task.scope;\n    }\n\n    if (task.presentationOptions) {\n        taskDto.presentation = task.presentationOptions;\n    }\n\n    const group = task.group;\n    if (group === types.TaskGroup.Build) {\n        taskDto.group = BUILD_GROUP;\n    } else if (group === types.TaskGroup.Test) {\n        taskDto.group = TEST_GROUP;\n    }\n\n    const taskDefinition = task.definition;\n    if (!taskDefinition) {\n        return taskDto;\n    }\n\n    taskDto.type = taskDefinition.type;\n    const { type, ...properties } = taskDefinition;\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDto[key] = properties[key];\n        }\n    }\n\n    const execution = task.execution;\n    if (!execution) {\n        return taskDto;\n    }\n\n    if (types.ShellExecution.is(execution)) {\n        return fromShellExecution(execution, taskDto);\n    }\n\n    if (types.ProcessExecution.is(execution)) {\n        return fromProcessExecution(execution, taskDto);\n    }\n\n    if (types.CustomExecution.is(execution)) {\n        return fromCustomExecution(execution, taskDto);\n    }\n\n    return taskDto;\n}\n\nexport function toTask(taskDto: TaskDto): theia.Task {\n    if (!taskDto) {\n        throw new Error('Task should be provided for converting');\n    }\n\n    const { type, taskType, label, source, scope, problemMatcher, detail, command, args, options, group, presentation, ...properties } = taskDto;\n    const result = {} as theia.Task;\n    result.name = label;\n    result.source = source;\n    if (detail) {\n        (result as theia.Task2).detail = detail;\n    }\n    if (typeof scope === 'string') {\n        const uri = URI.parse(scope);\n        result.scope = {\n            uri,\n            name: uri.toString(),\n            index: 0\n        };\n    } else {\n        result.scope = scope;\n    }\n\n    const taskDefinition: theia.TaskDefinition = {\n        type: type\n    };\n\n    result.definition = taskDefinition;\n\n    if (taskType === 'process') {\n        result.execution = getProcessExecution(taskDto);\n    }\n\n    const execution = { command, args, options };\n    if (taskType === 'shell' || types.ShellExecution.is(execution)) {\n        result.execution = getShellExecution(taskDto);\n    }\n\n    if (taskType === 'customExecution' || types.CustomExecution.is(execution)) {\n        result.execution = getCustomExecution(taskDto);\n        // if taskType is customExecution, we need to put all the information into taskDefinition,\n        // because some parameters may be in taskDefinition.\n        taskDefinition.label = label;\n        taskDefinition.command = command;\n        taskDefinition.args = args;\n        taskDefinition.options = options;\n    }\n\n    if (group) {\n        if (group === BUILD_GROUP) {\n            result.group = types.TaskGroup.Build;\n        } else if (group === TEST_GROUP) {\n            result.group = types.TaskGroup.Test;\n        }\n    }\n\n    if (presentation) {\n        result.presentationOptions = presentation;\n    }\n\n    if (!properties) {\n        return result;\n    }\n\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDefinition[key] = properties[key];\n        }\n    }\n\n    return result;\n}\n\nexport function fromProcessExecution(execution: theia.ProcessExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'process';\n    taskDto.command = execution.process;\n    taskDto.args = execution.args;\n\n    const options = execution.options;\n    if (options) {\n        taskDto.options = options;\n    }\n    return taskDto;\n}\n\nexport function fromShellExecution(execution: theia.ShellExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'shell';\n    const options = execution.options;\n    if (options) {\n        taskDto.options = getShellExecutionOptions(options);\n    }\n\n    const commandLine = execution.commandLine;\n    if (commandLine) {\n        taskDto.command = commandLine;\n        return taskDto;\n    }\n\n    const command = execution.command;\n    if (typeof command === 'string') {\n        taskDto.command = command;\n        taskDto.args = getShellArgs(execution.args);\n        return taskDto;\n    } else {\n        throw new Error('Converting ShellQuotedString command is not implemented');\n    }\n}\n\nexport function fromCustomExecution(execution: theia.CustomExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'customExecution';\n    const callback = execution.callback;\n    if (callback) {\n        taskDto.callback = callback;\n        return taskDto;\n    } else {\n        throw new Error('Converting CustomExecution callback is not implemented');\n    }\n}\n\nexport function getProcessExecution(taskDto: TaskDto): theia.ProcessExecution {\n    return new types.ProcessExecution(\n        taskDto.command,\n        taskDto.args || [],\n        taskDto.options || {});\n}\n\nexport function getShellExecution(taskDto: TaskDto): theia.ShellExecution {\n    if (taskDto.command && Array.isArray(taskDto.args) && taskDto.args.length !== 0) {\n        return new types.ShellExecution(\n            taskDto.command,\n            taskDto.args,\n            taskDto.options || {});\n    }\n    return new types.ShellExecution(\n        taskDto.command || taskDto.commandLine,\n        taskDto.options || {});\n}\n\nexport function getCustomExecution(taskDto: TaskDto): theia.CustomExecution {\n    return new types.CustomExecution(taskDto.callback);\n}\n\nexport function getShellArgs(args: undefined | (string | theia.ShellQuotedString)[]): string[] {\n    if (!args || args.length === 0) {\n        return [];\n    }\n\n    const element = args[0];\n    if (typeof element === 'string') {\n        return args as string[];\n    }\n\n    const result: string[] = [];\n    const shellQuotedArgs = args as theia.ShellQuotedString[];\n\n    shellQuotedArgs.forEach(arg => {\n        result.push(arg.value);\n    });\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getShellExecutionOptions(options: theia.ShellExecutionOptions): { [key: string]: any } {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = {} as { [key: string]: any };\n\n    const env = options.env;\n    if (env) {\n        result['env'] = env;\n    }\n\n    const executable = options.executable;\n    if (executable) {\n        result['executable'] = executable;\n    }\n\n    const shellQuoting = options.shellQuoting;\n    if (shellQuoting) {\n        result['shellQuoting'] = shellQuoting;\n    }\n\n    const shellArgs = options.shellArgs;\n    if (shellArgs) {\n        result['shellArgs'] = shellArgs;\n    }\n\n    const cwd = options.cwd;\n    if (cwd) {\n        Object.assign(result, { cwd });\n    }\n\n    return result;\n}\n\nexport function fromSymbolInformation(symbolInformation: theia.SymbolInformation): lstypes.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    if (symbolInformation.location && symbolInformation.location.range) {\n        const p1 = lstypes.Position.create(symbolInformation.location.range.start.line, symbolInformation.location.range.start.character);\n        const p2 = lstypes.Position.create(symbolInformation.location.range.end.line, symbolInformation.location.range.end.character);\n        return lstypes.SymbolInformation.create(symbolInformation.name, symbolInformation.kind++ as lstypes.SymbolKind, lstypes.Range.create(p1, p2),\n            symbolInformation.location.uri.toString(), symbolInformation.containerName);\n    }\n\n    return {\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind++ as lstypes.SymbolKind,\n        location: {\n            uri: symbolInformation.location.uri.toString(),\n            range: symbolInformation.location.range,\n        }\n    };\n}\n\nexport function toSymbolInformation(symbolInformation: lstypes.SymbolInformation): theia.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    return <theia.SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind,\n        location: {\n            uri: URI.parse(symbolInformation.location.uri),\n            range: symbolInformation.location.range\n        }\n    };\n}\n\nexport function fromSelectionRange(selectionRange: theia.SelectionRange): model.SelectionRange {\n    return { range: fromRange(selectionRange.range) };\n}\n\nexport function fromFoldingRange(foldingRange: theia.FoldingRange): model.FoldingRange {\n    const range: model.FoldingRange = {\n        start: foldingRange.start + 1,\n        end: foldingRange.end + 1\n    };\n    if (foldingRange.kind) {\n        range.kind = fromFoldingRangeKind(foldingRange.kind);\n    }\n    return range;\n}\n\nexport function fromFoldingRangeKind(kind: theia.FoldingRangeKind | undefined): model.FoldingRangeKind | undefined {\n    if (kind) {\n        switch (kind) {\n            case types.FoldingRangeKind.Comment:\n                return model.FoldingRangeKind.Comment;\n            case types.FoldingRangeKind.Imports:\n                return model.FoldingRangeKind.Imports;\n            case types.FoldingRangeKind.Region:\n                return model.FoldingRangeKind.Region;\n        }\n    }\n    return undefined;\n}\n\nexport function fromColor(color: types.Color): [number, number, number, number] {\n    return [color.red, color.green, color.blue, color.alpha];\n}\n\nexport function toColor(color: [number, number, number, number]): types.Color {\n    return new types.Color(color[0], color[1], color[2], color[3]);\n}\n\nexport function fromColorPresentation(colorPresentation: theia.ColorPresentation): model.ColorPresentation {\n    return {\n        label: colorPresentation.label,\n        textEdit: colorPresentation.textEdit ? fromTextEdit(colorPresentation.textEdit) : undefined,\n        additionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => fromTextEdit(value)) : undefined\n    };\n}\n\nexport function convertToTransferQuickPickItems(items: rpc.Item[]): rpc.TransferQuickPickItems[] {\n    const pickItems: rpc.TransferQuickPickItems[] = [];\n    for (let handle = 0; handle < items.length; handle++) {\n        const item = items[handle];\n        let label: string;\n        let description: string | undefined;\n        let detail: string | undefined;\n        let picked: boolean | undefined;\n        let alwaysShow: boolean | undefined;\n\n        if (typeof item === 'string') {\n            label = item;\n        } else {\n            ({ label, description, detail, picked, alwaysShow } = item);\n        }\n\n        pickItems.push({\n            label,\n            description,\n            handle,\n            detail,\n            picked,\n            alwaysShow\n        });\n    }\n    return pickItems;\n}\n\nexport namespace DecorationRenderOptions {\n    export function from(options: theia.DecorationRenderOptions): rpc.DecorationRenderOptions {\n        return {\n            isWholeLine: options.isWholeLine,\n            rangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n            overviewRulerLane: options.overviewRulerLane,\n            light: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n            dark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace DecorationRangeBehavior {\n    export function from(value: types.DecorationRangeBehavior): rpc.TrackedRangeStickiness {\n        if (typeof value === 'undefined') {\n            return value;\n        }\n        switch (value) {\n            case types.DecorationRangeBehavior.OpenOpen:\n                return rpc.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.ClosedClosed:\n                return rpc.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.OpenClosed:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n            case types.DecorationRangeBehavior.ClosedOpen:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n        }\n    }\n}\n\nexport namespace ThemableDecorationRenderOptions {\n    export function from(options: theia.ThemableDecorationRenderOptions): rpc.ThemeDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n    export function from(options: theia.ThemableDecorationAttachmentRenderOptions): rpc.ContentDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            contentText: options.contentText,\n            contentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            color: <string | types.ThemeColor>options.color,\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            margin: options.margin,\n            width: options.width,\n            height: options.height,\n        };\n    }\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n    if (typeof value === 'undefined') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        return URI.file(value);\n    } else {\n        return value;\n    }\n}\n\nexport function pluginToPluginInfo(plugin: Plugin): rpc.PluginInfo {\n    return {\n        id: plugin.model.id,\n        name: plugin.model.name\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/workbench/api/common/extHostTypes.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { illegalArgument } from '../common/errors';\nimport type * as theia from '@theia/plugin';\nimport { URI as CodeURI, UriComponents } from '@theia/core/shared/vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '@theia/core/lib/common/strings';\nimport { MarkdownString, isMarkdownString } from './markdown-string';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { FileSystemProviderErrorCode, markAsFileSystemProviderError } from '@theia/filesystem/lib/common/files';\nimport * as paths from 'path';\nimport { ObjectsTransferrer } from '../common/rpc-protocol';\nimport { es5ClassCompat } from '../common/types';\n\n/**\n * A reviver that takes URI's transferred via JSON.stringify() and makes\n * instances of our local plugin API URI class (below)\n */\nexport function reviver(key: string | undefined, value: any): any {\n    const revived = ObjectsTransferrer.reviver(key, value);\n    if (CodeURI.isUri(revived)) {\n        return URI.revive(revived);\n    }\n    return revived;\n}\n\n/**\n * This is an implementation of #theia.Uri based on vscode-uri.\n * This is supposed to fix https://github.com/eclipse-theia/theia/issues/8752\n * We cannot simply upgrade the dependency, because the current version 3.x\n * is not compatible with our current codebase\n */\n@es5ClassCompat\nexport class URI extends CodeURI implements theia.Uri {\n    protected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n    protected constructor(components: UriComponents);\n    protected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n        if (typeof schemeOrData === 'string') {\n            super(schemeOrData, authority, path, query, fragment, _strict);\n        } else {\n            super(schemeOrData);\n        }\n    }\n\n    /**\n     * Override to create the correct class.\n     */\n    with(change: {\n        scheme?: string;\n        authority?: string | null;\n        path?: string | null;\n        query?: string | null;\n        fragment?: string | null;\n    }): URI {\n        return new URI(super.with(change));\n    }\n\n    static joinPath(uri: URI, ...pathSegments: string[]): URI {\n        if (!uri.path) {\n            throw new Error('\\'joinPath\\' called on URI without path');\n        }\n        const newPath = paths.posix.join(uri.path, ...pathSegments);\n        return new URI(uri.scheme, uri.authority, newPath, uri.query, uri.fragment);\n    }\n\n    /**\n     * Override to create the correct class.\n     * @param data\n     */\n    static revive(data: UriComponents | CodeURI): URI;\n    static revive(data: UriComponents | CodeURI | null): URI | null;\n    static revive(data: UriComponents | CodeURI | undefined): URI | undefined\n    static revive(data: UriComponents | CodeURI | undefined | null): URI | undefined | null {\n        const uri = CodeURI.revive(data);\n        return uri ? new URI(uri) : undefined;\n    }\n\n    static parse(value: string, _strict?: boolean): URI {\n        return new URI(CodeURI.parse(value, _strict));\n    }\n\n    static file(path: string): URI {\n        return new URI(CodeURI.file(path));\n    }\n\n    /**\n     * There is quite some magic in to vscode URI class related to\n     * transferring via JSON.stringify(). Making the CodeURI instance\n     * makes sure we transfer this object as a vscode-uri URI.\n     */\n    toJSON(): UriComponents {\n        return CodeURI.from(this).toJSON();\n    }\n}\n\n@es5ClassCompat\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n\n/**\n * Represents a color theme kind.\n */\nexport enum ColorThemeKind {\n    Light = 1,\n    Dark = 2,\n    HighContrast = 3\n}\n\nexport enum ExtensionMode {\n    /**\n     * The extension is installed normally (for example, from the marketplace\n     * or VSIX) in the editor.\n     */\n    Production = 1,\n\n    /**\n     * The extension is running from an `--extensionDevelopmentPath` provided\n     * when launching the editor.\n     */\n    Development = 2,\n\n    /**\n     * The extension is running from an `--extensionTestsPath` and\n     * the extension host is running unit tests.\n     */\n    Test = 3,\n}\n\n/**\n * Represents the validation type of the Source Control input.\n */\nexport enum SourceControlInputBoxValidationType {\n\n    /**\n     * Something not allowed by the rules of a language or other means.\n     */\n    Error = 0,\n\n    /**\n     * Something suspicious but allowed.\n     */\n    Warning = 1,\n\n    /**\n     * Something to inform about but not a problem.\n     */\n    Information = 2\n}\n\n@es5ClassCompat\nexport class ColorTheme implements theia.ColorTheme {\n    constructor(public readonly kind: ColorThemeKind) { }\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined): TextEditorSelectionChangeKind | undefined {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\n@es5ClassCompat\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n\n    toJSON(): any {\n        return { line: this.line, character: this.character };\n    }\n}\n\n@es5ClassCompat\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRange(thing: any): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition((<Range>thing).start)\n            && Position.isPosition((<Range>thing).end);\n    }\n\n    toJSON(): any {\n        return [this.start, this.end];\n    }\n}\n\n@es5ClassCompat\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport namespace TextDocumentShowOptions {\n    /**\n     * @param candidate\n     * @returns `true` if `candidate` is an instance of options that includes a selection.\n     * This function should be used to determine whether TextDocumentOptions passed into commands by plugins\n     * need to be translated to TextDocumentShowOptions in the style of the RPC model. Selection is the only field that requires translation.\n     */\n    export function isTextDocumentShowOptions(candidate: unknown): candidate is theia.TextDocumentShowOptions {\n        if (!candidate) {\n            return false;\n        }\n        const options = candidate as theia.TextDocumentShowOptions;\n        return Range.isRange(options.selection);\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport enum EnvironmentVariableMutatorType {\n    Replace = 1,\n    Append = 2,\n    Prepend = 3\n}\n\n@es5ClassCompat\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\n@es5ClassCompat\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\n@es5ClassCompat\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon = new ThemeIcon('file');\n\n    static readonly Folder: ThemeIcon = new ThemeIcon('folder');\n\n    private constructor(public id: string) {\n    }\n\n}\n\nexport namespace ThemeIcon {\n    export function is(item: unknown): item is ThemeIcon {\n        return typeof item === 'object' && !!item && 'id' in item;\n    }\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace,\n    WorkspaceFolder,\n    Default,\n    Memory\n}\n\n@es5ClassCompat\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\n@es5ClassCompat\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing).range)\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15, // eslint-disable-line @typescript-eslint/no-shadow\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24,\n    User = 25,\n    Issue = 26\n}\n\n@es5ClassCompat\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    tags?: CompletionItemTag[];\n    detail: string;\n    documentation: string | MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\n@es5ClassCompat\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport enum DebugConsoleMode {\n    Separate = 0,\n    MergeWithParent = 1\n}\n\n@es5ClassCompat\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position | undefined) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n\n    static isLocation(thing: {}): thing is theia.Location {\n        if (thing instanceof Location) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<Location>thing).range)\n            && URI.isUri((<Location>thing).uri);\n    }\n}\n\n@es5ClassCompat\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\nexport enum CompletionItemTag {\n    Deprecated = 1,\n}\n\n@es5ClassCompat\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\n@es5ClassCompat\nexport class ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n\n    constructor(label: string | [number, number], documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\n@es5ClassCompat\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n        this.parameters = [];\n    }\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3,\n}\n\n@es5ClassCompat\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n\n    constructor() {\n        this.signatures = [];\n    }\n}\n\n@es5ClassCompat\nexport class Hover {\n\n    public contents: MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: MarkdownString | theia.MarkedString | MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <MarkdownString[] | theia.MarkedString[]>contents;\n        } else if (isMarkdownString(contents)) {\n            this.contents = [contents];\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\n@es5ClassCompat\nexport class DocumentHighlight {\n\n    public range: Range;\n    public kind?: DocumentHighlightKind;\n\n    constructor(\n        range: Range,\n        kind?: DocumentHighlightKind\n    ) {\n        this.range = range;\n        this.kind = kind;\n    }\n}\n\nexport type Definition = Location | Location[];\n\n@es5ClassCompat\nexport class DocumentLink {\n\n    range: Range;\n\n    target?: URI;\n\n    tooltip?: string;\n\n    constructor(range: Range, target: URI | undefined) {\n        if (target && !(URI.isUri(target))) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\n@es5ClassCompat\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\n/**\n * The reason why code actions were requested.\n */\nexport enum CodeActionTriggerKind {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    Invoke = 1,\n\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    Automatic = 2,\n}\n\n@es5ClassCompat\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    public static readonly SourceFixAll = CodeActionKind.Source.append('fixAll');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n\n    public intersects(other: CodeActionKind): boolean {\n        return this.contains(other) || other.contains(this);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\n@es5ClassCompat\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: URI;\n        dark: URI;\n    };\n}\n\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\n@es5ClassCompat\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from, to, options, metadata });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options, metadata });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options, metadata });\n    }\n\n    replace(uri: URI, range: Range, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText), metadata });\n    }\n\n    insert(resource: URI, position: Position, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, new Range(position, position), newText, metadata);\n    }\n\n    delete(resource: URI, range: Range, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, range, '', metadata);\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] {\n        const res: ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!, edit.metadata!]);\n            } else {\n                res.push([edit.uri, [edit.edit], edit.metadata!]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\n@es5ClassCompat\nexport class TreeItem {\n\n    label?: string | theia.TreeItemLabel;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    contextValue?: string;\n\n    constructor(label: string | theia.TreeItemLabel, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(resourceUri: URI, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(arg1: string | theia.TreeItemLabel | URI, public collapsibleState: theia.TreeItemCollapsibleState = TreeItemCollapsibleState.None) {\n        if (arg1 instanceof URI) {\n            this.resourceUri = arg1;\n        } else {\n            this.label = arg1;\n        }\n    }\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\n@es5ClassCompat\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\n@es5ClassCompat\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum CommentThreadCollapsibleState {\n    Collapsed = 0,\n    Expanded = 1\n}\n\n@es5ClassCompat\nexport class QuickInputButtons {\n    static readonly Back: theia.QuickInputButton = {\n        iconPath: {\n            id: 'Back',\n            dark: '',\n            light: ''\n        },\n        tooltip: 'Back'\n    };\n}\n\n@es5ClassCompat\nexport class FileDecoration {\n\n    static validate(d: FileDecoration): void {\n        if (d.badge && d.badge.length !== 1 && d.badge.length !== 2) {\n            throw new Error('The \\'badge\\'-property must be undefined or a short character');\n        }\n        if (!d.color && !d.badge && !d.tooltip) {\n            throw new Error('The decoration is empty');\n        }\n    }\n\n    badge?: string;\n    tooltip?: string;\n    color?: theia.ThemeColor;\n    priority?: number;\n    propagate?: boolean;\n\n    constructor(badge?: string, tooltip?: string, color?: ThemeColor) {\n        this.badge = badge;\n        this.tooltip = tooltip;\n        this.color = color;\n    }\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\n// #region file api\n\nexport enum FileChangeType {\n    Changed = 1,\n    Created = 2,\n    Deleted = 3,\n}\n\n@es5ClassCompat\nexport class FileSystemError extends Error {\n\n    static FileExists(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileExists, FileSystemError.FileExists);\n    }\n    static FileNotFound(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotFound, FileSystemError.FileNotFound);\n    }\n    static FileNotADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotADirectory, FileSystemError.FileNotADirectory);\n    }\n    static FileIsADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileIsADirectory, FileSystemError.FileIsADirectory);\n    }\n    static NoPermissions(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.NoPermissions, FileSystemError.NoPermissions);\n    }\n    static Unavailable(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.Unavailable, FileSystemError.Unavailable);\n    }\n\n    readonly code: string;\n\n    constructor(uriOrMessage?: string | URI, code: FileSystemProviderErrorCode = FileSystemProviderErrorCode.Unknown, terminator?: Function) {\n        super(URI.isUri(uriOrMessage) ? uriOrMessage.toString(true) : uriOrMessage);\n\n        this.code = terminator?.name ?? 'Unknown';\n\n        // mark the error as file system provider error so that\n        // we can extract the error code on the receiving side\n        markAsFileSystemProviderError(this, code);\n\n        // workaround when extending builtin objects and when compiling to ES5, see:\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        if (typeof (<any>Object).setPrototypeOf === 'function') {\n            (<any>Object).setPrototypeOf(this, FileSystemError.prototype);\n        }\n\n        if (typeof Error.captureStackTrace === 'function' && typeof terminator === 'function') {\n            // nice stack traces\n            Error.captureStackTrace(this, terminator);\n        }\n    }\n}\n\n// #endregion\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport interface FileStat {\n    readonly type: FileType;\n    readonly ctime: number;\n    readonly mtime: number;\n    readonly size: number;\n}\n\n@es5ClassCompat\nexport class ProgressOptions {\n    /**\n     * The location at which progress should show.\n     */\n    location: ProgressLocation;\n    /**\n     * A human-readable string which will be used to describe the\n     * operation.\n     */\n    title?: string;\n    /**\n     * Controls if a cancel button should show to allow the user to\n     * cancel the long running operation.  Note that currently only\n     * `ProgressLocation.Notification` is supporting to show a cancel\n     * button.\n     */\n    cancellable?: boolean;\n    constructor(location: ProgressLocation, title?: string, cancellable?: boolean) {\n        this.location = location;\n    }\n}\n\n@es5ClassCompat\nexport class Progress<T> {\n    /**\n     * Report a progress update.\n     * @param value A progress item, like a message and/or an\n     * report on how much work finished\n     */\n    report(value: T): void {\n    }\n}\nexport enum ProgressLocation {\n    /**\n     * Show progress for the source control viewlet, as overlay for the icon and as progress bar\n     * inside the viewlet (when visible). Neither supports cancellation nor discrete progress.\n     */\n    SourceControl = 1,\n    /**\n     * Show progress in the status bar of the editor. Neither supports cancellation nor discrete progress.\n     */\n    Window = 10,\n    /**\n     * Show progress as notification with an optional cancel button. Supports to show infinite and discrete progress.\n     */\n    Notification = 15\n}\n\n@es5ClassCompat\nexport class ProcessExecution {\n    private executionProcess: string;\n    private arguments: string[];\n    private executionOptions: theia.ProcessExecutionOptions | undefined;\n\n    constructor(process: string, options?: theia.ProcessExecutionOptions);\n    constructor(process: string, args: string[], options?: theia.ProcessExecutionOptions);\n    constructor(process: string, varg1?: string[] | theia.ProcessExecutionOptions, varg2?: theia.ProcessExecutionOptions) {\n        if (typeof process !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = process;\n        if (varg1 !== undefined) {\n            if (Array.isArray(varg1)) {\n                this.arguments = varg1;\n                this.executionOptions = varg2;\n            } else {\n                this.executionOptions = varg1;\n            }\n        }\n        if (this.arguments === undefined) {\n            this.arguments = [];\n        }\n    }\n\n    get process(): string {\n        return this.executionProcess;\n    }\n\n    set process(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = value;\n    }\n\n    get args(): string[] {\n        return this.arguments;\n    }\n\n    set args(value: string[]) {\n        if (!Array.isArray(value)) {\n            value = [];\n        }\n        this.arguments = value;\n    }\n\n    get options(): theia.ProcessExecutionOptions | undefined {\n        return this.executionOptions;\n    }\n\n    set options(value: theia.ProcessExecutionOptions | undefined) {\n        this.executionOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ProcessExecution {\n        const candidate = value as ProcessExecution;\n        return candidate && !!candidate.process;\n    }\n}\n\nexport enum ShellQuoting {\n    Escape = 1,\n    Strong = 2,\n    Weak = 3\n}\n\nexport enum TaskPanelKind {\n    Shared = 1,\n    Dedicated = 2,\n    New = 3\n}\n\nexport enum TaskRevealKind {\n    Always = 1,\n    Silent = 2,\n    Never = 3\n}\n\n@es5ClassCompat\nexport class ShellExecution {\n    private shellCommandLine: string;\n    private shellCommand: string | theia.ShellQuotedString;\n    private arguments: (string | theia.ShellQuotedString)[];\n    private shellOptions: theia.ShellExecutionOptions | undefined;\n\n    constructor(commandLine: string, options?: theia.ShellExecutionOptions);\n    constructor(command: string | theia.ShellQuotedString, args: (string | theia.ShellQuotedString)[], options?: theia.ShellExecutionOptions);\n\n    constructor(arg0: string | theia.ShellQuotedString, arg1?: theia.ShellExecutionOptions | (string | theia.ShellQuotedString)[], arg2?: theia.ShellExecutionOptions) {\n        if (Array.isArray(arg1) || typeof arg1 === 'string') {\n            if (!arg0) {\n                throw illegalArgument('command can\\'t be undefined or null');\n            }\n            if (typeof arg0 !== 'string' && typeof arg0.value !== 'string') {\n                throw illegalArgument('command');\n            }\n            this.shellCommand = arg0;\n            this.arguments = arg1 as (string | theia.ShellQuotedString)[];\n            this.shellOptions = arg2;\n        } else {\n            if (typeof arg0 !== 'string') {\n                throw illegalArgument('commandLine');\n            }\n            this.shellCommandLine = arg0;\n            this.shellOptions = arg1;\n        }\n    }\n\n    get commandLine(): string {\n        return this.shellCommandLine;\n    }\n\n    set commandLine(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('commandLine');\n        }\n        this.shellCommandLine = value;\n    }\n\n    get command(): string | theia.ShellQuotedString {\n        return this.shellCommand;\n    }\n\n    set command(value: string | theia.ShellQuotedString) {\n        if (typeof value !== 'string' && typeof value.value !== 'string') {\n            throw illegalArgument('command');\n        }\n        this.shellCommand = value;\n    }\n\n    get args(): (string | theia.ShellQuotedString)[] {\n        return this.arguments;\n    }\n\n    set args(value: (string | theia.ShellQuotedString)[]) {\n        this.arguments = value || [];\n    }\n\n    get options(): theia.ShellExecutionOptions | undefined {\n        return this.shellOptions;\n    }\n\n    set options(value: theia.ShellExecutionOptions | undefined) {\n        this.shellOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ShellExecution {\n        const candidate = value as ShellExecution;\n        return candidate && (!!candidate.commandLine || !!candidate.command);\n    }\n}\n\n@es5ClassCompat\nexport class CustomExecution {\n    private _callback: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\n    constructor(callback: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = callback;\n    }\n\n    public set callback(value: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = value;\n    }\n\n    public get callback(): ((resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        return this._callback;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is CustomExecution {\n        const candidate = value as CustomExecution;\n        return candidate && (!!candidate._callback);\n    }\n}\n\n@es5ClassCompat\nexport class TaskGroup {\n    private groupId: string;\n\n    public static Clean: TaskGroup = new TaskGroup('clean', 'Clean');\n    public static Build: TaskGroup = new TaskGroup('build', 'Build');\n    public static Rebuild: TaskGroup = new TaskGroup('rebuild', 'Rebuild');\n    public static Test: TaskGroup = new TaskGroup('test', 'Test');\n\n    public static from(value: string): TaskGroup | undefined {\n        switch (value) {\n            case 'clean':\n                return TaskGroup.Clean;\n            case 'build':\n                return TaskGroup.Build;\n            case 'rebuild':\n                return TaskGroup.Rebuild;\n            case 'test':\n                return TaskGroup.Test;\n            default:\n                return undefined;\n        }\n    }\n\n    constructor(id: string, label: string) {\n        if (typeof id !== 'string') {\n            throw illegalArgument('id');\n        }\n        if (typeof label !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.groupId = id;\n    }\n\n    get id(): string {\n        return this.groupId;\n    }\n}\n\nexport enum TaskScope {\n    Global = 1,\n    Workspace = 2\n}\n\n@es5ClassCompat\nexport class Task {\n    private taskDefinition: theia.TaskDefinition;\n    private taskScope: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined;\n    private taskName: string;\n    private taskExecution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n    private taskProblemMatchers: string[];\n    private hasTaskProblemMatchers: boolean;\n    private isTaskBackground: boolean;\n    private taskSource: string;\n    private taskGroup: TaskGroup | undefined;\n    private taskPresentationOptions: theia.TaskPresentationOptions;\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[]\n    );\n\n    // Deprecated constructor used by Jake vscode built-in\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[],\n    );\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(...args: any[]) {\n        let taskDefinition: theia.TaskDefinition;\n        let scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace | undefined;\n        let name: string;\n        let source: string;\n        let execution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n        let problemMatchers: string | string[] | undefined;\n\n        if (typeof args[1] === 'string') {\n            [\n                taskDefinition,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        } else {\n            [\n                taskDefinition,\n                scope,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        }\n\n        this.definition = taskDefinition;\n        this.scope = scope;\n        this.name = name;\n        this.source = source;\n        this.execution = execution;\n\n        if (typeof problemMatchers === 'string') {\n            this.taskProblemMatchers = [problemMatchers];\n            this.hasTaskProblemMatchers = true;\n        } else if (Array.isArray(problemMatchers)) {\n            this.taskProblemMatchers = problemMatchers;\n            this.hasTaskProblemMatchers = true;\n        } else {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n        }\n        this.isTaskBackground = false;\n        this.presentationOptions = Object.create(null);\n    }\n\n    get definition(): theia.TaskDefinition {\n        return this.taskDefinition;\n    }\n\n    set definition(value: theia.TaskDefinition) {\n        if (value === undefined || value === null) {\n            throw illegalArgument('Kind can\\'t be undefined or null');\n        }\n        this.taskDefinition = value;\n    }\n\n    get scope(): theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined {\n        return this.taskScope;\n    }\n\n    set scope(value: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskScope = value;\n    }\n\n    get name(): string {\n        return this.taskName;\n    }\n\n    set name(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.taskName = value;\n    }\n\n    get execution(): ProcessExecution | ShellExecution | CustomExecution | undefined {\n        return this.taskExecution;\n    }\n\n    set execution(value: ProcessExecution | ShellExecution | CustomExecution | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskExecution = value;\n    }\n\n    get problemMatchers(): string[] {\n        return this.taskProblemMatchers;\n    }\n\n    set problemMatchers(value: string[]) {\n        if (!Array.isArray(value)) {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n            return;\n        }\n        this.taskProblemMatchers = value;\n        this.hasTaskProblemMatchers = true;\n    }\n\n    get hasProblemMatchers(): boolean {\n        return this.hasTaskProblemMatchers;\n    }\n\n    get isBackground(): boolean {\n        return this.isTaskBackground;\n    }\n\n    set isBackground(value: boolean) {\n        if (value !== true && value !== false) {\n            value = false;\n        }\n        this.isTaskBackground = value;\n    }\n\n    get source(): string {\n        return this.taskSource;\n    }\n\n    set source(value: string) {\n        if (typeof value !== 'string' || value.length === 0) {\n            throw illegalArgument('source must be a string of length > 0');\n        }\n        this.taskSource = value;\n    }\n\n    get group(): TaskGroup | undefined {\n        return this.taskGroup;\n    }\n\n    set group(value: TaskGroup | undefined) {\n        if (value === undefined || value === null) {\n            this.taskGroup = undefined;\n            return;\n        }\n        this.taskGroup = value;\n    }\n\n    get presentationOptions(): theia.TaskPresentationOptions {\n        return this.taskPresentationOptions;\n    }\n\n    set presentationOptions(value: theia.TaskPresentationOptions) {\n        if (value === null || value === undefined) {\n            value = Object.create(null);\n        }\n        this.taskPresentationOptions = value;\n    }\n}\n\n@es5ClassCompat\nexport class Task2 extends Task {\n    detail?: string;\n}\n\n@es5ClassCompat\nexport class DebugAdapterExecutable {\n    /**\n     * The command or path of the debug adapter executable.\n     * A command must be either an absolute path of an executable or the name of an command to be looked up via the PATH environment variable.\n     * The special value 'node' will be mapped to VS Code's built-in Node.js runtime.\n     */\n    readonly command: string;\n\n    /**\n     * The arguments passed to the debug adapter executable. Defaults to an empty array.\n     */\n    readonly args?: string[];\n\n    /**\n     * Optional options to be used when the debug adapter is started.\n     * Defaults to undefined.\n     */\n    readonly options?: theia.DebugAdapterExecutableOptions;\n\n    /**\n     * Creates a description for a debug adapter based on an executable program.\n     *\n     * @param command The command or executable path that implements the debug adapter.\n     * @param args Optional arguments to be passed to the command or executable.\n     * @param options Optional options to be used when starting the command or executable.\n     */\n    constructor(command: string, args?: string[], options?: theia.DebugAdapterExecutableOptions) {\n        this.command = command;\n        this.args = args;\n        this.options = options;\n    }\n}\n\nexport namespace DebugAdapterExecutable {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is theia.DebugAdapterExecutable {\n        return !!adapter && 'command' in adapter;\n    }\n}\n\n/**\n * Represents a debug adapter running as a socket based server.\n */\n@es5ClassCompat\nexport class DebugAdapterServer {\n\n    /**\n     * The port.\n     */\n    readonly port: number;\n\n    /**\n     * The host.\n     */\n    readonly host?: string;\n\n    /**\n     * Create a description for a debug adapter running as a socket based server.\n     */\n    constructor(port: number, host?: string) {\n        this.port = port;\n        this.host = host;\n    }\n}\n\nexport namespace DebugAdapterServer {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterServer {\n        return !!adapter && 'port' in adapter;\n    }\n}\n\n/**\n * Represents a debug adapter running as a Named Pipe (on Windows)/UNIX Domain Socket (on non-Windows) based server.\n */\n@es5ClassCompat\nexport class DebugAdapterNamedPipeServer {\n    /**\n     * Create a description for a debug adapter running as a Named Pipe (on Windows)/UNIX Domain Socket (on non-Windows) based server.\n     */\n    constructor(readonly path: string) { }\n}\n\nexport namespace DebugAdapterNamedPipeServer {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterNamedPipeServer {\n        return !!adapter && 'path' in adapter;\n    }\n}\n\n/**\n * A debug adapter descriptor for an inline implementation.\n */\n@es5ClassCompat\nexport class DebugAdapterInlineImplementation {\n    implementation: theia.DebugAdapter;\n\n    /**\n     * Create a descriptor for an inline implementation of a debug adapter.\n     */\n    constructor(impl: theia.DebugAdapter) {\n        this.implementation = impl;\n    }\n}\n\nexport namespace DebugAdapterInlineImplementation {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterInlineImplementation {\n        return !!adapter && 'implementation' in adapter;\n    }\n}\n\nexport type DebugAdapterDescriptor = DebugAdapterExecutable | DebugAdapterServer | DebugAdapterNamedPipeServer | DebugAdapterInlineImplementation;\n\nexport enum LogLevel {\n    Trace = 1,\n    Debug = 2,\n    Info = 3,\n    Warning = 4,\n    Error = 5,\n    Critical = 6,\n    Off = 7\n}\n\n/**\n * The base class of all breakpoint types.\n */\n@es5ClassCompat\nexport class Breakpoint {\n    /**\n     * Is breakpoint enabled.\n     */\n    enabled: boolean;\n    /**\n     * An optional expression for conditional breakpoints.\n     */\n    condition?: string;\n    /**\n     * An optional expression that controls how many hits of the breakpoint are ignored.\n     */\n    hitCondition?: string;\n    /**\n     * An optional message that gets logged when this breakpoint is hit. Embedded expressions within {} are interpolated by the debug adapter.\n     */\n    logMessage?: string;\n\n    protected constructor(enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        this.enabled = enabled || false;\n        this.condition = condition;\n        this.hitCondition = hitCondition;\n        this.logMessage = logMessage;\n    }\n\n    private _id: string | undefined;\n    /**\n     * The unique ID of the breakpoint.\n     */\n    get id(): string {\n        if (!this._id) {\n            this._id = UUID.uuid4();\n        }\n        return this._id;\n    }\n\n}\n\n/**\n * A breakpoint specified by a source location.\n */\n@es5ClassCompat\nexport class SourceBreakpoint extends Breakpoint {\n    /**\n     * The source and line position of this breakpoint.\n     */\n    location: Location;\n\n    /**\n     * Create a new breakpoint for a source location.\n     */\n    constructor(location: Location, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.location = location;\n    }\n}\n\n/**\n * A breakpoint specified by a function name.\n */\n@es5ClassCompat\nexport class FunctionBreakpoint extends Breakpoint {\n    /**\n     * The name of the function to which this breakpoint is attached.\n     */\n    functionName: string;\n\n    /**\n     * Create a new function breakpoint.\n     */\n    constructor(functionName: string, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.functionName = functionName;\n    }\n}\n\n@es5ClassCompat\nexport class Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n\n    constructor(red: number, green: number, blue: number, alpha: number) {\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n\n@es5ClassCompat\nexport class ColorInformation {\n    range: Range;\n    color: Color;\n\n    constructor(range: Range, color: Color) {\n        if (color && !(color instanceof Color)) {\n            throw illegalArgument('color');\n        }\n        if (!Range.isRange(range)) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.color = color;\n    }\n}\n\n@es5ClassCompat\nexport class ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n\n    constructor(label: string) {\n        if (!label || typeof label !== 'string') {\n            throw illegalArgument('label');\n        }\n        this.label = label;\n    }\n}\n\nexport enum ColorFormat {\n    RGB = 0,\n    HEX = 1,\n    HSL = 2\n}\n\n@es5ClassCompat\nexport class FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n\n    constructor(start: number, end: number, kind?: FoldingRangeKind) {\n        this.start = start;\n        this.end = end;\n        this.kind = kind;\n    }\n}\n\nexport enum FoldingRangeKind {\n    Comment = 1,\n    Imports = 2,\n    Region = 3\n}\n\n@es5ClassCompat\nexport class SelectionRange {\n\n    range: Range;\n    parent?: SelectionRange;\n\n    constructor(range: Range, parent?: SelectionRange) {\n        this.range = range;\n        this.parent = parent;\n\n        if (parent && !parent.range.contains(this.range)) {\n            throw new Error('Invalid argument: parent must contain this range');\n        }\n    }\n}\n\n/**\n * Enumeration of the supported operating systems.\n */\nexport enum OperatingSystem {\n    Windows = 'Windows',\n    Linux = 'Linux',\n    OSX = 'OSX'\n}\n\n/** The areas of the application shell where webview panel can reside. */\nexport enum WebviewPanelTargetArea {\n    Main = 'main',\n    Left = 'left',\n    Right = 'right',\n    Bottom = 'bottom'\n}\n\n/**\n * Possible kinds of UI that can use extensions.\n */\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\n@es5ClassCompat\nexport class CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: URI;\n    range: Range;\n    selectionRange: Range;\n    tags?: readonly SymbolTag[];\n    data?: unknown;\n\n    constructor(kind: SymbolKind, name: string, detail: string, uri: URI, range: Range, selectionRange: Range) {\n        this.kind = kind;\n        this.name = name;\n        this.detail = detail;\n        this.uri = uri;\n        this.range = range;\n        this.selectionRange = selectionRange;\n    }\n\n    static isCallHierarchyItem(thing: {}): thing is theia.CallHierarchyItem {\n        if (thing instanceof CallHierarchyItem) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<CallHierarchyItem>thing).kind === 'number' &&\n            typeof (<CallHierarchyItem>thing).name === 'string' &&\n            URI.isUri((<CallHierarchyItem>thing).uri) &&\n            Range.isRange((<CallHierarchyItem>thing).range) &&\n            Range.isRange((<CallHierarchyItem>thing).selectionRange);\n    }\n}\n\n@es5ClassCompat\nexport class CallHierarchyIncomingCall {\n\n    from: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: CallHierarchyItem, fromRanges: Range[]) {\n        this.fromRanges = fromRanges;\n        this.from = item;\n    }\n}\n\n@es5ClassCompat\nexport class CallHierarchyOutgoingCall {\n\n    to: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: CallHierarchyItem, fromRanges: Range[]) {\n        this.fromRanges = fromRanges;\n        this.to = item;\n    }\n}\n\n@es5ClassCompat\nexport class TimelineItem {\n    timestamp: number;\n    label: string;\n    id?: string;\n    iconPath?: theia.Uri | { light: theia.Uri; dark: theia.Uri } | ThemeIcon;\n    description?: string;\n    detail?: string;\n    command?: theia.Command;\n    contextValue?: string;\n    constructor(label: string, timestamp: number) {\n        this.label = label;\n        this.timestamp = timestamp;\n    }\n}\n\n// #region Semantic Coloring\n\n@es5ClassCompat\nexport class SemanticTokensLegend {\n    public readonly tokenTypes: string[];\n    public readonly tokenModifiers: string[];\n\n    constructor(tokenTypes: string[], tokenModifiers: string[] = []) {\n        this.tokenTypes = tokenTypes;\n        this.tokenModifiers = tokenModifiers;\n    }\n}\n\nfunction isStrArrayOrUndefined(arg: any): arg is string[] | undefined {\n    return ((typeof arg === 'undefined') || (Array.isArray(arg) && arg.every(e => typeof e === 'string')));\n}\n\n@es5ClassCompat\nexport class SemanticTokensBuilder {\n\n    private _prevLine: number;\n    private _prevChar: number;\n    private _dataIsSortedAndDeltaEncoded: boolean;\n    private _data: number[];\n    private _dataLen: number;\n    private _tokenTypeStrToInt: Map<string, number>;\n    private _tokenModifierStrToInt: Map<string, number>;\n    private _hasLegend: boolean;\n\n    constructor(legend?: SemanticTokensLegend) {\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._dataIsSortedAndDeltaEncoded = true;\n        this._data = [];\n        this._dataLen = 0;\n        this._tokenTypeStrToInt = new Map<string, number>();\n        this._tokenModifierStrToInt = new Map<string, number>();\n        this._hasLegend = false;\n        if (legend) {\n            this._hasLegend = true;\n            for (let i = 0, len = legend.tokenTypes.length; i < len; i++) {\n                this._tokenTypeStrToInt.set(legend.tokenTypes[i], i);\n            }\n            for (let i = 0, len = legend.tokenModifiers.length; i < len; i++) {\n                this._tokenModifierStrToInt.set(legend.tokenModifiers[i], i);\n            }\n        }\n    }\n\n    public push(line: number, char: number, length: number, tokenType: number, tokenModifiers?: number): void;\n    public push(range: Range, tokenType: string, tokenModifiers?: string[]): void;\n    public push(arg0: any, arg1: any, arg2: any, arg3?: any, arg4?: any): void {\n        if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number' &&\n            (typeof arg4 === 'number' || typeof arg4 === 'undefined')) {\n            if (typeof arg4 === 'undefined') {\n                arg4 = 0;\n            }\n            // 1st overload\n            return this._pushEncoded(arg0, arg1, arg2, arg3, arg4);\n        }\n        if (Range.isRange(arg0) && typeof arg1 === 'string' && isStrArrayOrUndefined(arg2)) {\n            // 2nd overload\n            return this._push(arg0, arg1, arg2);\n        }\n        throw illegalArgument();\n    }\n\n    private _push(range: theia.Range, tokenType: string, tokenModifiers?: string[]): void {\n        if (!this._hasLegend) {\n            throw new Error('Legend must be provided in constructor');\n        }\n        if (range.start.line !== range.end.line) {\n            throw new Error('`range` cannot span multiple lines');\n        }\n        if (!this._tokenTypeStrToInt.has(tokenType)) {\n            throw new Error('`tokenType` is not in the provided legend');\n        }\n        const line = range.start.line;\n        const char = range.start.character;\n        const length = range.end.character - range.start.character;\n        const nTokenType = this._tokenTypeStrToInt.get(tokenType)!;\n        let nTokenModifiers = 0;\n        if (tokenModifiers) {\n            for (const tokenModifier of tokenModifiers) {\n                if (!this._tokenModifierStrToInt.has(tokenModifier)) {\n                    throw new Error('`tokenModifier` is not in the provided legend');\n                }\n                const nTokenModifier = this._tokenModifierStrToInt.get(tokenModifier)!;\n                nTokenModifiers |= (1 << nTokenModifier) >>> 0;\n            }\n        }\n        this._pushEncoded(line, char, length, nTokenType, nTokenModifiers);\n    }\n\n    private _pushEncoded(line: number, char: number, length: number, tokenType: number, tokenModifiers: number): void {\n        if (this._dataIsSortedAndDeltaEncoded && (line < this._prevLine || (line === this._prevLine && char < this._prevChar))) {\n            // push calls were ordered and are no longer ordered\n            this._dataIsSortedAndDeltaEncoded = false;\n\n            // Remove delta encoding from data\n            const tokenCount = (this._data.length / 5) | 0;\n            let prevLine = 0;\n            let prevChar = 0;\n            for (let i = 0; i < tokenCount; i++) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let line = this._data[5 * i];\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let char = this._data[5 * i + 1];\n\n                if (line === 0) {\n                    // on the same line as previous token\n                    line = prevLine;\n                    char += prevChar;\n                } else {\n                    // on a different line than previous token\n                    line += prevLine;\n                }\n\n                this._data[5 * i] = line;\n                this._data[5 * i + 1] = char;\n\n                prevLine = line;\n                prevChar = char;\n            }\n        }\n\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataIsSortedAndDeltaEncoded && this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n\n    private static _sortAndDeltaEncode(data: number[]): Uint32Array {\n        const pos: number[] = [];\n        const tokenCount = (data.length / 5) | 0;\n        for (let i = 0; i < tokenCount; i++) {\n            pos[i] = i;\n        }\n        pos.sort((a, b) => {\n            const aLine = data[5 * a];\n            const bLine = data[5 * b];\n            if (aLine === bLine) {\n                const aChar = data[5 * a + 1];\n                const bChar = data[5 * b + 1];\n                return aChar - bChar;\n            }\n            return aLine - bLine;\n        });\n        const result = new Uint32Array(data.length);\n        let prevLine = 0;\n        let prevChar = 0;\n        for (let i = 0; i < tokenCount; i++) {\n            const srcOffset = 5 * pos[i];\n            const line = data[srcOffset + 0];\n            const char = data[srcOffset + 1];\n            const length = data[srcOffset + 2];\n            const tokenType = data[srcOffset + 3];\n            const tokenModifiers = data[srcOffset + 4];\n\n            const pushLine = line - prevLine;\n            const pushChar = (pushLine === 0 ? char - prevChar : char);\n\n            const dstOffset = 5 * i;\n            result[dstOffset + 0] = pushLine;\n            result[dstOffset + 1] = pushChar;\n            result[dstOffset + 2] = length;\n            result[dstOffset + 3] = tokenType;\n            result[dstOffset + 4] = tokenModifiers;\n\n            prevLine = line;\n            prevChar = char;\n        }\n\n        return result;\n    }\n\n    public build(resultId?: string): SemanticTokens {\n        if (!this._dataIsSortedAndDeltaEncoded) {\n            return new SemanticTokens(SemanticTokensBuilder._sortAndDeltaEncode(this._data), resultId);\n        }\n        return new SemanticTokens(new Uint32Array(this._data), resultId);\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokens {\n    readonly resultId?: string;\n    readonly data: Uint32Array;\n\n    constructor(data: Uint32Array, resultId?: string) {\n        this.resultId = resultId;\n        this.data = data;\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokensEdit {\n    readonly start: number;\n    readonly deleteCount: number;\n    readonly data?: Uint32Array;\n\n    constructor(start: number, deleteCount: number, data?: Uint32Array) {\n        this.start = start;\n        this.deleteCount = deleteCount;\n        this.data = data;\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokensEdits {\n    readonly resultId?: string;\n    readonly edits: SemanticTokensEdit[];\n\n    constructor(edits: SemanticTokensEdit[], resultId?: string) {\n        this.resultId = resultId;\n        this.edits = edits;\n    }\n}\n\n// #endregion\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport { Plugin, WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea, URI } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        const viewId = v4();\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, plugin);\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, webviewOptions);\n        const panel = this.createWebviewPanel(viewType, title, showOptions, options, plugin, viewId);\n        return panel;\n    }\n\n    createWebviewPanel(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewPanelImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            // Make sure we preserve the scheme of the resource but convert it into a normal path segment\n            // The scheme is important as we need to know if we are requesting a local or a remote resource.\n            .replace('{{resource}}', resource.scheme + resource.toString().replace(/^\\S+?:/, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, this._html);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(undefined);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from './types-impl';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.http !== target.scheme && Schemes.https !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType,\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, SearchInWorkspaceResult, Range } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { URI } from './types-impl';\nimport { normalize } from '@theia/callhierarchy/lib/common/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\nimport * as Converter from './type-converters';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private workspaceFileUri: theia.Uri | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n    private searchInWorkspaceEmitter: Emitter<{ result?: theia.TextSearchResult, searchId: number }> = new Emitter<{ result?: theia.TextSearchResult, searchId: number }>();\n    protected workspaceSearchSequence: number = 0;\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        if (this.folders && this.folders.length === 0) {\n            return undefined;\n        }\n        return this.folders;\n    }\n\n    get workspaceFile(): theia.Uri | undefined {\n        return this.workspaceFileUri;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.refreshWorkspaceFile();\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    $onWorkspaceLocationChanged(stat: FileStat | undefined): void {\n        this.updateWorkSpace(stat);\n    }\n\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void {\n        if (result) {\n            result.matches.map(next => {\n                const range: Range = {\n                    endColumn: next.character + next.length,\n                    endLineNumber: next.line + 1,\n                    startColumn: next.character,\n                    startLineNumber: next.line + 1\n                };\n                const tRange = <theia.Range>Converter.toRange(range);\n                const searchResult: theia.TextSearchMatch = {\n                    uri: URI.parse(result.fileUri),\n                    preview: {\n                        text: typeof next.lineText === 'string' ? next.lineText : next.lineText.text,\n                        matches: tRange\n                    },\n                    ranges: tRange\n                };\n                return searchResult;\n            }).forEach(next => this.searchInWorkspaceEmitter.fire({ result: next, searchId: searchRequestId }));\n        } else if (done) {\n            this.searchInWorkspaceEmitter.fire({ searchId: searchRequestId });\n        }\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: string, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = URI.file(include.base).toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n        callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n        let options: theia.FindTextInFilesOptions;\n        let callback: (result: theia.TextSearchResult) => void;\n\n        if (typeof optionsOrCallback === 'object') {\n            options = optionsOrCallback;\n            callback = callbackOrToken as (result: theia.TextSearchResult) => void;\n        } else {\n            options = {};\n            callback = optionsOrCallback;\n            token = callbackOrToken as CancellationToken;\n        }\n        const nextSearchID = this.workspaceSearchSequence + 1;\n        this.workspaceSearchSequence = nextSearchID;\n        const disposable = this.searchInWorkspaceEmitter.event(searchResult => {\n            if (searchResult.searchId === nextSearchID) {\n                if (searchResult.result) {\n                    callback(searchResult.result);\n                } else {\n                    disposable.dispose();\n                }\n            }\n        });\n        if (token) {\n            token.onCancellationRequested(() => {\n                disposable.dispose();\n            });\n        }\n        return this.proxy.$findTextInFiles(query, options || {}, nextSearchID, token);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.file || scheme === Schemes.untitled || this.documentContentProviders.has(scheme)) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    private async refreshWorkspaceFile(): Promise<void> {\n        const workspace = await this.proxy.$getWorkspace();\n        this.updateWorkSpace(workspace);\n    }\n\n    private updateWorkSpace(workspace: FileStat | undefined): void {\n        // A workspace directory implies an undefined workspace file\n        if (workspace && !workspace.isDirectory) {\n            this.workspaceFileUri = URI.parse(workspace.resource.toString());\n        }\n    }\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// https://github.com/electron/electron/issues/2288\nfunction isElectron() {\n    // Renderer process\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n        return true;\n    }\n\n    // Main process\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n        return true;\n    }\n\n    // Detect the user agent when the `nodeIntegration` option is set to false\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n\nmodule.exports = isElectron;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","JSONExt","isPrimitive","isArray","Array","emptyObject","freeze","emptyArray","isObject","deepEqual","first","second","a1","a2","length","i","n","deepArrayEqual","key","deepObjectEqual","deepCopy","result","deepArrayCopy","deepObjectCopy","MimeData","this","_types","_values","prototype","types","slice","hasData","mime","indexOf","getData","undefined","setData","data","clearData","push","splice","clear","PromiseDelegate","_this","promise","Promise","resolve","reject","_resolve","_reject","reason","Random","getRandomValues","crypto","window","msCrypto","buffer","randomFillSync","randomBytes","bytes","Math","random","Token","name","_tokenStructuralPropertyT","random_1","UUID","uuid4","Uint8Array","lut","toString","create","GLOBSTAR","ALL_FORWARD_SLASHES","starsToRegExp","starCount","splitGlobAware","pattern","splitChar","segments","char","inBraces","inBrackets","curVal","parseRegExp","regEx","every","s","previousSegmentWasGlobStar","forEach","segment","index","braceVal","bracketVal","braceRegExp","map","c","join","strings","escapeRegExpCharacters","res","T1","T2","T3","T3_2","T4","T5","CACHE","Map","FALSE","NULL","parsePattern","arg1","options","trim","patternKey","trimForExclusions","match","parsedPattern","get","wrapRelativePattern","test","base","substr","path","basename","endsWith","exec","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","trivia2","parsedPatterns","aggregateBasenameMatches","split","filter","withBasenames","find","allPaths","reduce","all","current","concat","trivia3","trivia4and5","regExp","RegExp","lastIndex","error","toRegExp","set","arg2","paths","isEqualOrParent","normalize","pathToRelative","matchPathEnds","nativePath","nativeSep","sep","replace","nativePathEnd","parse","isRelativePattern","resultPattern","expression","getOwnPropertyNames","when","hasSibling","matched","then","requiresSiblings","parseExpressionPattern","some","resultExpression","extname","parsedExpression","listToMap","list","obj","rp","basenamePatterns","aggregate","ch","charCodeAt","aggregatedPatterns","siblingsFn","siblings","patternOrExpression","score","selector","uriScheme","candidateLanguage","candidateIsSynchronized","ret","language","scheme","hasAccessToAllModels","max","isWindows","_posixBadPath","_winBadPath","idx","lastIndexOf","substring","streql","start","end","other","getRoot","len","code","pos","toOSPath","wantsBackslash","win","_isNormal","root","skip","prev_start","prev_part","part","candidate","ignoreCase","startsWithIgnoreCase","sepOffset","charAt","Endpoint","constructor","location","self","getWebSocketUrl","wsScheme","host","pathname","getRestUrl","httpScheme","protocol","PROTO_FILE","port","getSearchParam","defaultValue","search","startsWith","encoded","decodeURIComponent","PROTO_HTTPS","PROTO_WSS","PROTO_WS","PROTO_HTTP","Options","Location","hasBuffer","Buffer","hasTextEncoder","TextEncoder","hasTextDecoder","TextDecoder","textEncoder","textDecoder","BinaryBuffer","byteLength","static","allocUnsafe","actual","isBuffer","from","byteOffset","source","encode","iconv","buffers","totalLength","alloc","offset","element","decode","subarray","array","readUInt32BE","writeUInt32BE","readUInt32LE","writeUInt32LE","readUInt8","writeUInt8","BinaryBufferReadableStream","BinaryBufferReadable","toBuffer","readable","streams","consumeReadable","chunks","fromBuffer","toReadable","fromReadable","read","fromString","stream","consumeStream","toStream","BinaryBufferReadableBufferedStream","async","bufferedStream","ended","BinaryBufferWriteableStream","newWriteableStream","shortcutEvent","assign","callback","context","handle","setTimeout","bind","dispose","clearTimeout","maxListeners","CancellationToken","None","isCancellationRequested","onCancellationRequested","Event","Cancelled","CancellationError","Error","super","message","MutableToken","_isCancelled","cancel","_emitter","fire","Emitter","event","token","_token","cancelledMessage","cancelled","err","Disposable","func","is","arg","toDispose","disposables","onDisposeEmitter","disposingElements","d","onDispose","checkDisposed","disposed","pop","e","console","disposable","originalDispose","toRemove","pushAll","_disposable","mapFunc","listener","thisArgs","call","CallbackList","_callbacks","add","bucket","_contexts","remove","foundCallbackWithDifferentContext","Symbol","iterator","callbacks","contexts","args","apply","invoke","isEmpty","_options","_disposed","_leakWarnCountdown","_event","onFirstListenerAdd","removeMaxListenersCheck","checkMaxListeners","_noop","onLastListenerRemove","LEAK_WARNING_THRESHHOLD","listenerCount","popStack","pushLeakingStack","topStack","topCount","_leakingStacks","stackCount","stack","warn","count","popLeakingStack","processor","WaitUntilEvent","emitter","timeout","waitables","asyncEvent","waitUntil","thenable","isFrozen","race","promiseJoin","listeners","deliveryQueue","deliver","userAgent","platform","navigator","process","isOSX","command","OS","Type","type","Windows","OSX","Linux","Path","raw","normalizePathSeparator","normalizeDrive","firstIndex","separator","isAbsolute","isRoot","isDrive","computeRoot","extIndex","ext","String","fromCharCode","resourcePath","home","untildifiedResource","untildifiedPath","dir","_dir","computeDir","hasDir","relativePath","reverse","next","relative","relativity","relativeStr","trailingSlash","pathArray","resultArray","Deferred","state","ms","deferred","delay","task","retryDelay","retries","lastError","thisArg","registration","evt","isReadableStream","on","pause","resume","destroy","fn","reducer","WriteableStreamImpl","Readable","done","chunk","flowing","destroyed","pendingWritePromises","flowData","flowErrors","flowEnd","write","highWaterMark","removeListener","fullDataBuffer","pendingWritePromise","maxChunks","shift","lastReadChunk","streamListeners","DisposableCollection","dataListener","errorListener","endListener","wrapperStream","t","consumed","transformer","target","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","doEqualsIgnoreCase","a","b","stopAt","codeA","codeB","diff","abs","toLowerCase","compareSubstring","aStart","aEnd","bStart","bEnd","aLen","bLen","compareSubstringIgnoreCase","haystack","needle","min","str","candidateLength","splitter","URI","uri","codeUri","displayName","allLocations","locations","parent","withPath","authority","resolveToAbsolute","pathSegments","absolutePath","withScheme","newCodeUri","toJSON","withAuthority","withoutAuthority","withoutPath","withQuery","query","withoutQuery","withFragment","fragment","withoutFragment","normalizePath","_path","skipEncoding","isEqual","caseSensitive","hasSameOrigin","left","right","uris","otherUri","_dbcs","DBCSCodec","UNASSIGNED","SEQ_START","NODE_START","UNASSIGNED_NODE","codecOptions","encodingName","table","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","gb18030","commonThirdByteNodeIdx","commonFourthByteNodeIdx","firstByteNode","secondByteNode","j","thirdByteNode","k","fourthByteNode","l","defaultCharUnicode","encodeTable","encodeTableSeq","skipEncodeChars","encodeSkipVals","val","to","_fillEncodeTable","encodeAdd","uChar","_setEncodeChar","defCharSB","defaultCharSingleByte","DBCSEncoder","codec","leadSurrogate","seqObj","DBCSDecoder","nodeIdx","prevBytes","findIdx","r","mid","encoder","decoder","_getDecodeTrieNode","addr","node","curAddr","parseInt","writeTable","codeTrail","seq","charCode","_getEncodeBucket","uCode","high","dbcsCode","low","_setEncodeSequence","oldVal","prefix","hasValues","subNodeEmpty","mbCode","subNodeIdx","newPrefix","newBuf","nextChar","resCode","subtable","uChars","gbChars","floor","buf","prevOffset","seqStart","curByte","ptr","uCodeLead","bytesArr","module","modules","enc","InternalCodec","bomAware","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","hex","_internal","InternalEncoder","InternalDecoder","StringDecoder","prevStr","acc","contBytes","accBytes","completeQuads","bufIdx","SBCSCodec","chars","asciiString","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","_sbcs","idx1","idx2","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","Utf16Codec","Utf16Encoder","addBOM","getEncoder","Utf16Decoder","initialBufs","initialBufsLen","detectEncoding","bufs","defaultEncoding","charsProcessed","asciiCharsLE","asciiCharsBE","outer_loop","utf16be","tmp","buf2","utf16","encoding","getDecoder","resStr","trail","Utf32Codec","isLE","Utf32Encoder","highSurrogate","Utf32Decoder","badChar","overflow","_writeCodepoint","dst","codepoint","Utf32AutoCodec","Utf32AutoEncoder","Utf32AutoDecoder","invalidLE","invalidBE","bmpCharsLE","bmpCharsBE","_utf32","utf32le","utf32be","ucs4le","ucs4be","src","write32","readUInt16LE","isHighSurrogate","isLowSurrogate","utf32","ucs4","Utf7Codec","utf7","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","inBase64","base64Accum","base64Regex","base64Chars","plusChar","minusChar","andChar","Utf7IMAPCodec","Utf7IMAPEncoder","base64AccumIdx","Utf7IMAPDecoder","lastI","b64str","canBeDecoded","utf7imap","base64IMAPChars","PrependBOMWrapper","StripBOMWrapper","pass","PrependBOM","StripBOM","stripBOM","stream_module","bomHandling","encodings","skipDecodeWarning","encodingExists","getCodec","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecDef","enableStreamingAPI","supportsStreams","IconvLiteEncoderStream","IconvLiteDecoderStream","encodeStream","decodeStream","Transform","conv","decodeStrings","_transform","_flush","collect","cb","id","debugAdapter","isClosed","onMessageReceived","send","onClose","onDebugAdapterExit","onError","onDebugAdapterError","channel","debug","onMessage","close","JSON","stringify","body","stop","messageReceivedEmitter","closeEmitter","onDidSendMessage","msg","handleMessage","StreamDebugAdapter","fromAdapter","toAdapter","errorEmitter","contentLength","handleData","handleClosed","CONTENT_LENGTH","TWO_CRLF","output","log","lines","pair","stdout","stdin","kill","socket","BaseStat","FileType","FileSystemProviderErrorCode","resource","operation","isOperation","changes","contains","checkForChangeType","change","getAdded","getOfType","gotAdded","hasType","getDeleted","gotDeleted","getUpdated","gotUpdated","FileStat","asFileType","stat","isFile","File","isDirectory","Directory","isSymbolicLink","SymbolicLink","fromStat","mtime","ctime","size","etag","toStat","file","FileOperationError","fileOperationResult","setPrototypeOf","FileSystemProviderError","createFileSystemProviderError","providerError","markAsFileSystemProviderError","toFileSystemProviderErrorCode","Unknown","FileExists","FileIsADirectory","FileNotADirectory","FileNotFound","FileExceedsMemoryLimit","FileTooLarge","NoPermissions","Unavailable","FileSystemProvider","provider","capabilities","ETAG_DISABLED","BinarySize","KB","MB","toFixed","GB","TB","arr","CharacterClassifier","_defaultValue","toUint8","_asciiMap","_createAsciiMap","_map","asciiMap","_value","PluginChannel","connection","messageEmitter","closedEmitter","content","$sendMessage","fireMessageReceived","fireError","fireClosed","$deleteConnection","proxy","connections","has","doEnsureConnection","delete","$createConnection","doCreateConnection","rest","TextEditorCursorStyle","cursorStyle","Line","Block","Underline","LineThin","BlockOutline","UnderlineThin","what","lastId","nextId","Uint8Matrix","rows","cols","_data","row","col","StateMachine","edges","maxCharCode","maxState","chCode","states","_states","_maxCharCode","nextState","currentState","_stateMachine","_classifier","LinkComputer","classifier","line","lineNumber","linkBeginIndex","linkEndIndex","lastIncludedCharIndex","charCodeBeforeLink","lastCharCodeInLink","range","startLineNumber","startColumn","endLineNumber","endColumn","url","model","stateMachine","getStateMachine","FORCE_TERMINATION_CHARACTERS","CANNOT_END_WITH_CHARACTERS","getClassifier","lineCount","getLineCount","getLineContent","linkBeginChCode","hasOpenParens","hasOpenSquareBracket","inSquareBrackets","hasOpenCurlyBracket","resetStateMachine","chClass","_createLink","ObjectIdentifier","mixin","enumerable","of","_hasOwnProperty","_cloneAndChange","changer","seen","isUndefinedOrNull","changed","r1","r2","i2","Set","replaceRegex","processed","TypeError","resolved","absolute","components","removeDuplicateSeparators","goodComponents","unshift","fromSegments","toSegments","upCount","downSegments","rv","CompletionItemKind","CompletionItemInsertTextRule","CompletionTriggerKind","SymbolTag","SymbolKind","DocumentHighlightKind","MarkerTag","MarkerSeverity","CommentThreadCollapsibleState","CommentMode","FoldingRangeKind","Comment","Imports","Region","DebugConfigurationProviderTriggerKind","TrackedRangeStickiness","TextEditorRevealType","EditorPosition","TreeViewItemCollapsibleState","MainMessageType","UIKind","emptyPlugin","lifecycle","startMethod","stopMethod","publisher","version","description","engine","packagePath","packageUri","entryPoint","pluginPath","pluginFolder","pluginUri","rawModel","engines","TreeViewSelection","ScmCommandArg","TimelineCommandArg","CommentsCommandArg","CommentsContextCommandArg","CommentsEditCommandArg","WorkspaceTextEditDto","edit","LanguagesMainFactory","OutputChannelRegistryFactory","PLUGIN_RPC_CONTEXT","AUTHENTICATION_MAIN","createProxyIdentifier","COMMAND_REGISTRY_MAIN","QUICK_OPEN_MAIN","DIALOGS_MAIN","WORKSPACE_MAIN","MESSAGE_REGISTRY_MAIN","TEXT_EDITORS_MAIN","DOCUMENTS_MAIN","STATUS_BAR_MESSAGE_REGISTRY_MAIN","ENV_MAIN","NOTIFICATION_MAIN","TERMINAL_MAIN","TREE_VIEWS_MAIN","PREFERENCE_REGISTRY_MAIN","OUTPUT_CHANNEL_REGISTRY_MAIN","LANGUAGES_MAIN","CONNECTION_MAIN","WEBVIEWS_MAIN","CUSTOM_EDITORS_MAIN","STORAGE_MAIN","TASKS_MAIN","DEBUG_MAIN","FILE_SYSTEM_MAIN","SCM_MAIN","SECRETS_MAIN","DECORATIONS_MAIN","WINDOW_MAIN","CLIPBOARD_MAIN","LABEL_SERVICE_MAIN","TIMELINE_MAIN","THEMING_MAIN","COMMENTS_MAIN","MAIN_RPC_CONTEXT","AUTHENTICATION_EXT","HOSTED_PLUGIN_MANAGER_EXT","COMMAND_REGISTRY_EXT","QUICK_OPEN_EXT","WINDOW_STATE_EXT","NOTIFICATION_EXT","WORKSPACE_EXT","TEXT_EDITORS_EXT","EDITORS_AND_DOCUMENTS_EXT","DOCUMENTS_EXT","TERMINAL_EXT","OUTPUT_CHANNEL_REGISTRY_EXT","TREE_VIEWS_EXT","PREFERENCE_REGISTRY_EXT","LANGUAGES_EXT","CONNECTION_EXT","WEBVIEWS_EXT","CUSTOM_EDITORS_EXT","STORAGE_EXT","TASKS_EXT","DEBUG_EXT","FILE_SYSTEM_EXT","ExtHostFileSystemEventService","SCM_EXT","SECRETS_EXT","DECORATIONS_EXT","LABEL_SERVICE_EXT","TIMELINE_EXT","THEMING_EXT","COMMENTS_EXT","ExtPluginApiProvider","MainPluginApiProvider","getPluginId","plugin","PluginType","PluginDeployerEntryType","CustomEditorPriority","hostedServicePath","PluginPackage","toPluginUrl","pck","encodeURIComponent","PluginScanner","PluginDeployerResolver","PluginDeployerDirectoryHandler","PluginDeployerFileHandler","PluginDeployer","PluginDeployerParticipant","MetadataProcessor","HostedPluginClient","PluginDeployerHandler","HostedPluginServer","PLUGIN_HOST_BACKEND","pluginServerJsonRpcPath","PluginServer","ServerPluginRunner","PluginHostEnvironmentVariable","RPCProtocol","ProxyIdentifier","isMain","ConnectionClosedError","ObjectsTransferrer","SerializedObjectType","identifier","transformations","locals","proxies","lastMessageId","cancellationTokenSources","pendingRPCReplies","multiplexer","RPCMultiplexer","receiveOneMessage","reply","values","reviver","replacer","isDisposed","getProxy","proxyId","createProxy","instance","handler","myArgs","remoteCall","Proxy","methodName","cancellationToken","canceled","callId","request","rawmsg","receiveRequest","receiveReply","receiveReplyErr","receiveCancel","cancellationTokenSource","tokenSource","CancellationTokenSource","invokeHandler","method","replyOK","replyErr","pendingReply","$isError","doInvokeHandler","actor","req","rpcId","safeStringify","transformErrorForSerialization","sendAccumulatedBound","sendAccumulated","messagesToSend","messages","setImmediate","stacktrace","$type","THEIA_URI","Range","serializedValue","character","THEIA_RANGE","revive","VSCODE_URI","TEXT_BUFFER","Position","wrap","_isLittleEndian","_isLittleEndianComputed","isLittleEndian","view","Uint16Array","reverseEndianness","b0","b1","b2","b3","semanticTokens","dest","Uint32Array","deltas","delta","encodeSemanticTokensDtoSize","deleteCount","uint8Arr","toLittleEndianBuffer","_buff","buff","fromLittleEndianBuffer","deltaCount","Date","LogType","destination","overwrite","keys","_","Reflect","construct","arguments","getOwnPropertyDescriptor","isUndefined","v","Schemes","inMemory","vscode","internal","walkThrough","walkThroughSnippet","http","https","mailto","untitled","vscodeRemote","vscodeRemoteResource","userData","vscodeCustomEditor","vscodeSettings","webviewPanel","rpc","DebugExtImpl","that","NLS_REGEX","readPluginJson","pluginModel","getUri","XMLHttpRequest","onreadystatechange","readyState","DONE","status","response","open","readPluginFile","loadTranslations","localize","translations","item","propertyName","manifest","built_prefix","WorkerEnvExtImpl","EnvExtImpl","appRoot","ctx","pluginsApiImpl","pluginsModulesNames","RPCProtocolImpl","postMessage","addEventListener","envExt","storageProxy","KeyValueStorageProxy","editorsAndDocuments","EditorsAndDocumentsExtImpl","messageRegistryExt","MessageRegistryExt","workspaceExt","WorkspaceExtImpl","preferenceRegistryExt","PreferenceRegistryExtImpl","debugExt","createDebugExtStub","clipboardExt","ClipboardExt","webviewExt","WebviewsExtImpl","secretsExt","SecretsExtImpl","terminalService","TerminalServiceExtImpl","pluginManager","PluginManagerExtImpl","loadPlugin","importScripts","frontendModuleName","rawPluginData","foreign","plugins","plg","pluginLifecycle","frontend","frontendInitPath","contextPath","loadManifest","apiImpl","apiFactory","backend","initExtApi","extApi","api","frontendExtApi","initPath","initVariable","initFunction","createAPIFactory","defaultApi","authenticationProviders","_providerIds","_providers","onDidChangeAuthenticationProvidersEmitter","onDidChangeAuthenticationProviders","onDidChangeSessionsEmitter","onDidChangeSessions","getProviderIds","$getProviderIds","providerIds","providers","requestingExtension","providerId","scopes","extensionName","extensionId","$getSession","sessionId","$logout","registerAuthenticationProvider","label","$updateSessions","$registerAuthenticationProvider","supportsMultipleAccounts","findIndex","$unregisterAuthenticationProvider","$login","authProvider","login","logout","getSessions","session","accessToken","account","$onDidChangeAuthenticationSessions","added","removed","readText","$readText","writeText","$writeText","commands","handlers","argumentProcessors","commandsConverter","CommandsConverter","converter","registerCommand","$registerCommand","registerHandler","$unregisterCommand","commandId","$registerHandler","$unregisterHandler","$executeCommand","executeLocalCommand","executeCommand","KnownCommands","mapped","mappedId","mappedArgs","mappedResult","mr","getKeyBinding","$getKeyBinding","processArgument","filterUnderscoreCommands","$getCommands","registerArgumentProcessor","commandsMap","safeCommandId","now","isSafeCommandRegistered","toSafeCommand","toInternalCommand","executeSafeCommand","external","title","tooltip","_documents","commentControllers","commentControllersByExtension","commentController","commentControlHandle","commentThread","getCommentThread","commentThreadHandle","thread","text","getCommentByUniqueId","commentUniqueId","comment","createCommentController","CommentController","$createCommentThreadTemplate","commentControllerHandle","uriComponents","threadHandle","$updateCommentThreadTemplate","$deleteCommentThread","commentingRangeProvider","documentData","getDocumentData","ranges","provideCommentingRanges","document","x","fromRange","ExtHostCommentThread","_id","_uri","_range","_comments","_handlePool","commentHandle","modifications","_onDidUpdateCommentThread","onDidUpdateCommentThread","commentsMap","acceptInputDisposables","$createCommentThread","localDisposables","_isDisposed","eventuallyUpdateCommentThread","comments","threadId","_label","contextValue","_contextValue","newComments","collapsibleState","collapseState","newState","modified","formattedModifications","cmt","theiaComment","iconPath","author","mode","uniqueIdInThread","fromMarkdown","userName","userIconPath","convertToModeComment","kind","Expanded","Collapsed","convertToCollapsibleState","$updateCommentThread","uniqueId","extension","_handle","threads","$registerCommentController","$updateCommentControllerFeatures","createCommentThread","arg0","arg3","toRange","$unregisterCommentController","documentExt","workspace","editorProviders","EditorProviderStore","documents","CustomDocumentStore","registerCustomEditorProvider","viewType","addTextProvider","$registerTextEditorProvider","webviewOptions","supportsMove","moveCustomTextEditor","addCustomProvider","supportEditing","onDidChangeCustomDocument","entry","getCustomDocumentEntry","undo","redo","isEditEvent","editId","addEdit","$onDidEdit","$onContentChange","$registerCustomEditorProvider","supportsMultipleEditorsPerDocument","$unregisterEditorProvider","backupId","cancellation","revivedResource","openCustomDocument","editable","widgetOpenerOptions","panel","createWebviewPanel","WebviewImpl","toWebviewOptions","$createCustomEditorPanel","resolveCustomEditor","getDocument","resolveCustomTextEditor","$disposeEdits","resourceComponents","editIds","disposeEdits","newResourceComponents","webview","getWebviewPanel","cancellationSource","isDirty","getCustomEditorProvider","revertCustomDocument","saveCustomDocument","targetResource","saveCustomDocumentAs","CustomDocumentStoreEntry","edits","Cache","getEdit","_idPool","logDebugInfo","pid","enableDebugLogging","DecorationsExtImpl","providersMap","registerFileDecorationProvider","pluginInfo","$registerDecorationProvider","onDidChangeFileDecorations","$onDidChange","maxEventSize","groups","compareFn","currentGroup","sort","groupBy","rank","picked","outer","lastDirname","myDirname","dirname","$unregisterDecorationProvider","requests","provideFileDecoration","FileDecoration","validate","propagate","badge","color","showOpenDialog","optionsMain","openLabel","defaultUri","canSelectFiles","canSelectFolders","canSelectMany","filters","$showOpenDialog","catch","showSaveDialog","saveLabel","$showSaveDialog","showUploadDialog","$showUploadDialog","_modeId2WordDefinition","getWordDefinitionFor","modeId","regExpLeadsToEndlessLoop","regexp","wordDefinition","eol","languageId","versionId","textLines","dirty","ok","onEvents","lineStarts","acceptDeleteRange","acceptInsertText","acceptIsDirty","acceptLanguageId","langId","_document","fileName","fsPath","isUntitled","save","getText","getTextInRange","EndOfLine","LF","CRLF","lineAt","lineOrPos","offsetAt","positionAt","validateRange","ran","validatePosition","getWordRangeAtPosition","position","insertText","insertLines","setLineText","newLengths","insertValues","removeValues","lineIndex","newValue","changeValue","$trySaveDocument","isSingleLine","lineEnding","startLineIndex","endLineIndex","resultLines","hasChanged","maxCharacter","lineOrPosition","firstNonWhitespaceCharacterIndex","rangeIncludingLineBreak","isEmptyOrWhitespace","ensureLineStarts","getAccumulatedValue","eolLength","linesLength","lineStartValues","PrefixSumComputer","out","getIndexOf","lineLength","remainder","_position","wordAtText","getWordAtText","ensureValidWordDefinition","_onDidAddDocument","_onDidRemoveDocument","_onDidChangeDocument","_onDidSaveTextDocument","_onWillSaveTextDocument","onDidAddDocument","onDidRemoveDocument","onDidChangeDocument","onDidSaveTextDocument","onWillSaveTextDocument","loadingDocuments","onDidAddDocuments","onDidRemoveDocuments","$acceptModelModeChanged","startUrl","oldModeId","newModeId","uriString","$acceptModelSaved","strUrl","$acceptDirtyStateChanged","saveTimeout","operations","didTimeout","didTimeoutHandle","sequence","fireEvent","fireTextDocumentWillSaveEvent","accept","promises","allEdits","TextEdit","isTextEdit","Converter","fromTextEdit","contentChanges","$acceptModelChanged","rangeOffset","rangeLength","getAllDocumentData","allDocuments","loadingDocument","loadDocument","$tryOpenDocument","documentOptions","selection","preserveFocus","preview","viewColumn","$tryShowDocument","$tryCreateDocument","setWordDefinitionFor","activeEditorId","_onDidAddDocuments","_onDidRemoveDocuments","_onDidChangeVisibleTextEditors","_onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","onDidChangeActiveTextEditor","editors","$acceptEditorsAndDocumentsDelta","removedDocuments","addedDocuments","removedEditors","uriComponent","DocumentDataExt","EOL","editor","addedEditors","documentUri","TextEditorExt","selections","toSelection","visibleRanges","toViewColumn","editorPosition","newActiveEditor","allEditors","activeEditor","getEditor","envSessionId","v4","envMachineId","getEnvVariable","envVarName","$getEnvVariable","getQueryParameter","queryParamName","queryParameters","getQueryParameters","setQueryParameters","queryParams","setApplicationName","applicationName","setLanguage","lang","setShell","shell","defaultShell","setUIKind","uiKind","ui","getClientOperatingSystem","$getClientOperatingSystem","appName","machineId","FileSystemWatcher","dispatcher","globPattern","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","_onDidCreate","_onDidChange","_onDidDelete","_config","subscription","events","created","deleted","Boolean","onDidCreate","onDidChange","onDidDelete","_extHostDocumentsAndEditors","_mainThreadTextEditors","_onFileSystemEvent","_onDidRenameFile","_onDidCreateFile","_onDidDeleteFile","_onWillRenameFile","AsyncEmitter","_onWillCreateFile","_onWillDeleteFile","onDidRenameFile","onDidCreateFile","onDidDeleteFile","createFileSystemWatcher","$onFileEvent","$onDidRunFileOperation","files","oldUri","newUri","getOnWillRenameFileEvent","_createWillExecuteEvent","getOnWillCreateFileEvent","getOnWillDeleteFileEvent","wrappedListener","_fireWillEvent","WorkspaceEdit","typeConverter","fromWorkspaceEdit","$tryApplyWorkspaceEdit","flatten","FsLinkProvider","_schemes","_initStateMachine","schemes","prevScheme","prevState","lastState","commonPrefixLength","toUpperCase","provideDocumentLinks","links","computeLinks","link","docLink","DocumentLink","ConsumerFileSystem","_proxy","$stat","_handleError","readDirectory","$readdir","createDirectory","$mkdir","$readFile","writeFile","$writeFile","$delete","recursive","useTrash","rename","$rename","copy","$copy","FileSystemError","FileSystemExtImpl","_extHostLanguageFeatures","_linkProvider","_fsProvider","_usedSchemes","_watches","fileSystem","_linkProviderRegistration","_registerLinkProviderIfNotYetRegistered","registerDocumentLinkProvider","registerFileSystemProvider","isCaseSensitive","isReadonly","$registerFileSystemProvider","onDidChangeFile","newType","FileChangeType","Changed","Created","Deleted","$onFileSystemChange","$unregisterProvider","_getFsProvider","_asIStat","readFile","opts","$watch","watch","$unwatch","$open","$close","fd","$read","$write","mappings","f","createConversionFunction","fromPositionToP","CONVERT_VSCODE_TO_MONACO","argStack","cloneAndChange","CallHierarchyItem","isCallHierarchyItem","fromCallHierarchyItem","TextDocumentShowOptions","isTextDocumentShowOptions","fromTextDocumentShowOptions","isPosition","fromPosition","isRange","isLocation","fromLocation","vscodeToMonacoArgsConverter","CONVERT_MONACO_TO_VSCODE","monacoToVscodeArgsConverter","argsArray","conversions","conversion","isModelCallHierarchyItem","toCallHierarchyItem","isModelCallHierarchyIncomingCall","toCallHierarchyIncomingCall","isModelCallHierarchyOutgoingCall","toCallHierarchyOutgoingCall","isModelLocation","toLocation","toDo","$registerResourceLabelFormatter","formatter","$unregisterResourceLabelFormatter","serializeEnterRules","rules","action","beforeText","serializeRegExp","afterText","flags","global","multiline","serializeIndentation","indentationRules","increaseIndentPattern","decreaseIndentPattern","indentNextLinePattern","unIndentedLinePattern","adaptersMap","diagnostics","Diagnostics","onDidChangeDiagnostics","getLanguages","$getLanguages","changeLanguage","$changeLanguage","doc","setLanguageConfiguration","configuration","wordPattern","nextCallId","config","brackets","onEnterRules","$setLanguageConfiguration","createDisposable","$unregister","addNewAdapter","adapter","ctor","fallbackValue","transformDocumentSelector","isReadonlyArray","sel","doTransformDocumentSelector","$serialized","$provideCompletionItems","withAdapter","CompletionAdapter","provideCompletionItems","$resolveCompletionItem","chainedId","resolveCompletionItem","$releaseCompletionItems","releaseCompletionItems","registerCompletionItemProvider","triggerCharacters","$registerCompletionSupport","hasResolveSupport","$provideDefinition","DefinitionAdapter","provideDefinition","registerDefinitionProvider","$registerDefinitionProvider","$provideDeclaration","DeclarationAdapter","provideDeclaration","registerDeclarationProvider","$registerDeclarationProvider","$provideSignatureHelp","SignatureHelpAdapter","provideSignatureHelp","$releaseSignatureHelp","releaseSignatureHelp","registerSignatureHelpProvider","metadata","$registerSignatureHelpProvider","getDiagnostics","createDiagnosticCollection","$provideImplementation","ImplementationAdapter","provideImplementation","registerImplementationProvider","$registerImplementationProvider","$provideTypeDefinition","TypeDefinitionAdapter","provideTypeDefinition","registerTypeDefinitionProvider","$registerTypeDefinitionProvider","registerHoverProvider","HoverAdapter","$registerHoverProvider","$provideHover","provideHover","registerDocumentHighlightProvider","DocumentHighlightAdapter","$registerDocumentHighlightProvider","$provideDocumentHighlights","provideDocumentHighlights","registerWorkspaceSymbolProvider","WorkspaceSymbolAdapter","$registerWorkspaceSymbolProvider","$provideWorkspaceSymbols","provideWorkspaceSymbols","$resolveWorkspaceSymbol","symbol","resolveWorkspaceSymbol","registerDocumentFormattingEditProvider","DocumentFormattingAdapter","$registerDocumentFormattingSupport","$provideDocumentFormattingEdits","provideDocumentFormattingEdits","registerDocumentRangeFormattingEditProvider","RangeFormattingAdapter","$registerRangeFormattingSupport","$provideDocumentRangeFormattingEdits","provideDocumentRangeFormattingEdits","registerOnTypeFormattingEditProvider","OnTypeFormattingAdapter","$registerOnTypeFormattingProvider","$provideOnTypeFormattingEdits","provideOnTypeFormattingEdits","$provideDocumentLinks","LinkProviderAdapter","provideLinks","$resolveDocumentLink","resolveLink","$registerDocumentLinkProvider","$releaseDocumentLinks","ids","releaseDocumentLinks","registerCodeActionsProvider","CodeActionAdapter","$registerQuickFixProvider","providedCodeActionKinds","$provideCodeActions","rangeOrSelection","provideCodeAction","registerCodeLensProvider","CodeLensAdapter","eventHandle","onDidChangeCodeLenses","$registerCodeLensSupport","$emitCodeLensEvent","$provideCodeLenses","provideCodeLenses","$resolveCodeLens","resolveCodeLens","$releaseCodeLenses","releaseCodeLenses","$provideReferences","ReferenceAdapter","provideReferences","registerReferenceProvider","$registerReferenceProvider","registerDocumentSymbolProvider","OutlineAdapter","$registerOutlineSupport","$provideDocumentSymbols","provideDocumentSymbols","registerColorProvider","ColorProviderAdapter","$registerDocumentColorProvider","$provideDocumentColors","provideColors","$provideColorPresentations","colorInfo","provideColorPresentations","registerFoldingRangeProvider","FoldingProviderAdapter","$registerFoldingRangeProvider","$provideFoldingRange","provideFoldingRanges","registerSelectionRangeProvider","SelectionRangeProviderAdapter","$registerSelectionRangeProvider","$provideSelectionRanges","positions","provideSelectionRanges","registerRenameProvider","RenameAdapter","$registerRenameProvider","supportsResolving","$provideRenameEdits","newName","provideRenameEdits","$resolveRenameLocation","resolveRenameLocation","registerCallHierarchyProvider","CallHierarchyAdapter","$registerCallHierarchyProvider","$provideRootDefinition","provideRootDefinition","$provideCallers","definition","provideCallers","$provideCallees","provideCallees","registerDocumentSemanticTokensProvider","legend","onDidChangeSemanticTokens","DocumentSemanticTokensAdapter","$registerDocumentSemanticTokensProvider","$emitDocumentSemanticTokensEvent","$provideDocumentSemanticTokens","previousResultId","provideDocumentSemanticTokens","$releaseDocumentSemanticTokens","semanticColoringResultId","releaseDocumentSemanticColoring","registerDocumentRangeSemanticTokensProvider","DocumentRangeSemanticTokensAdapter","$registerDocumentRangeSemanticTokensProvider","$provideDocumentRangeSemanticTokens","provideDocumentRangeSemanticTokens","prepareCallHierarchy","column","callers","provideCallHierarchyIncomingCalls","fromCallHierarchyIncomingCall","callees","provideCallHierarchyOutgoingCalls","fromCallHierarchyOutgoingCall","selectionRange","tags","toSymbolKind","detail","caller","callerDefinition","references","fromRanges","pluginId","_isSelection","allDiagnostics","diagnostic","intersection","codeActionContext","only","CodeActionKind","commandsOrActions","provideCodeActions","_isCommand","convertDiagnosticToMarkerData","smth","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","provideDocumentColors","colors","fromColor","toColor","fromColorPresentation","delegate","cacheId","cache","toPosition","replacing","inserting","with","completions","defaultRange","insert","CompletionList","incomplete","isIncomplete","items","suggestion","convertCompletionItem","parentId","resolvedItem","defaultInserting","defaultReplacing","insertTextRules","keepWhitespace","KeepWhitespace","textEdit","newText","SnippetString","InsertAsSnippet","itemRange","deprecated","CompletionItemTag","Deprecated","fromCompletionItemKind","documentation","filterText","sortText","preselect","additionalTextEdits","commitCharacters","zeroBasedPosition","isLocationArray","isDefinitionLinkArray","definitionLinks","definitionLink","fromDefinitionLink","DiagnosticCollection","maxCountPerFile","onDidChangeDiagnosticsEmitter","collectionName","diagnosticsLimitPerResource","onDisposeCallback","ensureNotDisposed","setDiagnosticsForUri","setDiagnostics","fireDiagnosticChangeEvent","sendChangesToEditor","entries","existedDiagnostics","$changeDiagnostics","getAllResourcesUris","$clearDiagnostics","getDiagnosticsByUri","setOnDisposeCallback","resourcesUris","toUrisArray","markers","nextUri","uriMarkers","uriDiagnostics","severity","DIAGNOSTICS_PRIORITY","lastMarker","Info","DiagnosticSeverity","Warning","Information","Hint","diagnosticsChangedEmitter","diagnosticCollections","getAllDiagnosticsForResource","getAllDiagnostics","GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX","getNextId","diagnosticCollection","MAX_DIAGNOSTICS_PER_FILE","urisIndexes","nextIndex","diagnosticsCollection","uriIndex","documentHighlights","isDocumentHighlightArray","highlights","highlight","fromDocumentHighlight","DocumentHighlight","fromFoldingRange","contents","fromHover","lenses","lens","lensSymbol","newLens","isResolved","BAD_CMD","resolveDocumentLink","DocumentSymbol","fromDocumentSymbol","asDocumentSymbolTree","infos","compareTo","parentStack","info","fromSymbolKind","containerName","children","fromSymbolTag","containsRange","equalsRange","otherRange","reference","prepareRename","rejectReason","asMessage","rangeOrLocation","placeholder","allProviderRanges","allResults","oneResult","last","fromSelectionRange","SemanticTokensPreviousResult","resultId","tokens","_provider","_nextResultId","_previousResults","previousResult","provideDocumentSemanticTokensEdits","_fixProvidedSemanticTokens","_send","_convertToEdits","_isSemanticTokens","_isCorrectSemanticTokens","SemanticTokens","_isSemanticTokensEdits","_isCorrectSemanticTokensEdits","SemanticTokensEdits","SemanticTokensEdit","newResult","oldData","oldLength","newData","newLength","maxCommonPrefixLength","commonSuffixLength","maxCommonSuffixLength","original","myId","encodeSemanticTokensDto","idSequence","pluginHelpContext","reviveContext","SignatureHelp","activeSignatureHelp","revivedSignatureHelp","saved","activeSignature","activeParameter","workspaceSymbols","newSymbols","sym","convertedSymbol","fromSymbolInformation","theiaSymbol","toSymbolInformation","workspaceSymbol","MarkdownString","appendText","appendMarkdown","appendCodeblock","thing","isTrusted","optionsOrFirstItem","actions","pushItem","isCloseAffordance","onCloseActionHandle","modal","actionHandle","$showMessage","sessions","configurationProviders","dynamicConfigurationProviders","debuggersContributions","descriptorFactories","trackerFactories","contributionPaths","onDidChangeBreakpointsEmitter","onDidChangeActiveDebugSessionEmitter","onDidTerminateDebugSessionEmitter","onDidStartDebugSessionEmitter","onDidReceiveDebugSessionCustomEmitter","_breakpoints","activeDebugConsole","append","$appendToDebugConsole","appendLine","$appendLineToDebugConsole","breakpoints","assistedInject","connectionExt","commandRegistryExt","registerDebuggersContributions","contributions","contribution","$registerDebuggerContribution","onDidReceiveDebugSessionCustomEvent","onDidChangeActiveDebugSession","onDidTerminateDebugSession","onDidStartDebugSession","onDidChangeBreakpoints","addBreakpoints","$addBreakpoints","removeBreakpoints","removedIds","$removeBreakpoints","startDebugging","folder","nameOrConfiguration","$startDebugging","stopDebugging","$stopDebugging","registerDebugAdapterDescriptorFactory","debugType","factory","registerDebugAdapterTrackerFactory","tuple","registerDebugConfigurationProvider","trigger","providersByTriggerKind","Initial","activeDebugSession","bExt","toBreakpointExt","functionName","enabled","condition","hitCondition","logMessage","FunctionBreakpoint","SourceBreakpoint","debugConfiguration","uuid","theiaSession","customRequest","$customRequest","success","tracker","createDebugAdapterTracker","communicationProvider","createDebugAdapter","debugAdapterSession","PluginDebugAdapterSession","ensureConnection","doGetTerminalCreationOptions","workspaceFolderUri","dynamic","provideDebugConfigurations","toWorkspaceFolder","resolveDebugConfiguration","resolveDebugConfigurationWithSubstitutedVariables","PluginDebugAdapterTracker","executable","resolveDebugAdapterExecutable","descriptorFactory","descriptor","createDebugAdapterDescriptor","DebugAdapterServer","connectSocketDebugAdapter","DebugAdapterExecutable","startDebugAdapter","DebugAdapterNamedPipeServer","connectPipeDebugAdapter","DebugAdapterInlineImplementation","connectInlineDebugAdapter","debugServer","adapterExecutableCommand","contributionPath","debuggerContribution","env","winx86","windows","osx","linux","program","programArgs","runtime","runtimeArgs","DebugAdapterSessionImpl","onWillStartSession","onWillStopSession","onWillReceiveMessage","onExit","isElectron","stdio","childProcess","cwd","forkOptions","execArgv","silent","fork","spawn","ProcessDebugAdapter","server","net","createConnection","SocketDebugAdapter","InlineDebugAdapter","implementation","trackers","factories","signal","progress","report","$updateProgress","mapLocation","cancellable","$startProgress","$stopProgress","viewId","ProgressLocation","Notification","SourceControl","Window","createOutputChannel","OutputChannelImpl","$dispose","$append","$clear","show","$reveal","hide","parts","ExtensionKind","editorsAndDocumentsExt","clipboard","authenticationExt","AuthenticationExtImpl","commandRegistry","CommandRegistryImpl","quickOpenExt","QuickOpenExtImpl","dialogsExt","DialogsExtImpl","windowStateExt","WindowStateExtImpl","notificationExt","NotificationExtImpl","TextEditorsExtImpl","DocumentsExtImpl","statusBarMessageRegistryExt","StatusBarMessageRegistryExt","terminalExt","outputChannelRegistryExt","OutputChannelRegistryExtImpl","languagesExt","LanguagesExtImpl","treeViewsExt","TreeViewsExtImpl","tasksExt","TasksExtImpl","ConnectionImpl","fileSystemExt","extHostFileSystemEvent","scmExt","ScmExtImpl","decorationsExt","labelServiceExt","LabelServiceExtImpl","timelineExt","TimelineExtImpl","themingExt","ThemingExtImpl","commentsExt","CommentsExtImpl","customEditorExt","CustomEditorsExtImpl","authentication","getSession","rawCommands","contributes","contributedCommands","registerTextEditorCommand","activeTextEditor","getActiveEditor","getCommands","filterInternal","registerDiffInformationCommand","onDidChangeActiveTerminal","onDidCloseTerminal","onDidOpenTerminal","activeTerminal","visibleTextEditors","getVisibleTextEditors","terminals","onDidChangeTextEditorSelection","onDidChangeTextEditorOptions","onDidChangeTextEditorViewColumn","onDidChangeTextEditorVisibleRanges","documentArg","columnOrOptions","showDocument","textEditor","showQuickPick","createQuickPick","showWorkspaceFolderPick","pickWorkspaceFolder","showInformationMessage","showMessage","showWarningMessage","showErrorMessage","setStatusBarMessage","showInputBox","showInput","createStatusBarItem","alignment","priority","pluginToPluginInfo","showOptions","createWebview","registerWebviewPanelSerializer","serializer","getWindowState","onDidChangeWindowState","createTerminal","nameOrOptions","shellPath","shellArgs","createTextEditorDecorationType","registerTreeDataProvider","treeDataProvider","createTreeView","withProgress","registerUriHandler","createInputBox","registerTerminalLinkProvider","activeColorTheme","onDidChangeActiveColorTheme","fs","rootPath","workspaceFolders","workspaceFile","onDidChangeWorkspaceFolders","textDocuments","onDidChangeTextDocument","onDidCloseTextDocument","onDidOpenTextDocument","onDidCreateFiles","onDidDeleteFiles","onDidRenameFiles","onWillCreateFiles","onWillDeleteFiles","onWillRenameFiles","getConfiguration","section","onDidChangeConfiguration","uriOrFileNameOrOptions","createDocumentData","openDocument","ignoreCreate","ignoreChange","ignoreDelete","fromGlobPattern","findFiles","include","exclude","maxResults","findTextInFiles","optionsOrCallback","callbackOrToken","saveAll","includeUntitled","applyEdit","applyWorkspaceEdit","registerTextDocumentContentProvider","getWorkspaceFolder","asRelativePath","pathOrUri","includeWorkspace","getRelativePath","updateWorkspaceFolders","workspaceFoldersToAdd","registerTaskProvider","tasks","registerResourceLabelFormatter","registerTimelineProvider","onDidChangeLogLevel","openExternal","openUri","asExternalUri","logLevel","LogLevel","languages","setTextDocumentLanguage","fromDocumentSelector","remaining","retriggerCharacters","firstTriggerCharacter","moreTriggerCharacters","getAllPlugins","PluginExt","getPlugin","getPluginById","debuggers","triggerKind","parentSessionOrOptions","parentSession","fetchTasks","executeTask","taskExecutions","onDidStartTask","onDidEndTask","onDidStartTaskProcess","onDidEndTaskProcess","scm","inputBox","getLastInputBox","createSourceControl","rootUri","StatusBarAlignment","EventEmitter","Selection","ViewColumn","TextEditorSelectionChangeKind","Uri","TextEditorLineNumbersStyle","ThemeColor","ThemeIcon","DecorationRangeBehavior","OverviewRulerLane","ConfigurationTarget","RelativePattern","IndentAction","CompletionItem","DebugConsoleMode","DiagnosticRelatedInformation","DiagnosticTag","Diagnostic","ProgressOptions","Progress","ParameterInformation","SignatureInformation","SignatureHelpTriggerKind","Hover","CodeLens","CodeActionTrigger","CodeActionTriggerKind","TextDocumentSaveReason","CodeAction","TreeItem","TreeItem2","TreeItemCollapsibleState","SymbolInformation","ShellQuoting","ShellExecution","ProcessExecution","CustomExecution","TaskScope","TaskRevealKind","TaskPanelKind","TaskGroup","Task","Task2","Breakpoint","Color","ColorInformation","ColorPresentation","FoldingRange","SelectionRange","OperatingSystem","WebviewPanelTargetArea","QuickInputButtons","CallHierarchyIncomingCall","CallHierarchyOutgoingCall","TimelineItem","EnvironmentVariableMutatorType","SemanticTokensLegend","SemanticTokensBuilder","ColorThemeKind","SourceControlInputBoxValidationType","ExtensionMode","Plugin","packageJSON","pluginType","isActive","getPluginExport","activate","activatePlugin","extensionPath","extensionUri","extensionKind","UI","PluginIconPath","asString","normalizedPath","toUrl","light","dark","ActivatedPlugin","pluginContext","stopFn","secrets","preferencesManager","registry","activations","loadedPlugins","activatedPlugins","pluginContextsMap","onDidChangeEmitter","jsonValidation","messageRegistryProxy","notificationMain","fireOnDidChange","stopAll","stopPlugin","terminating","subscriptions","params","init","globalState","workspaceState","preferences","configStorage","foreignPlugins","registerPlugin","$activateByEvent","activationEvent","activationEvents","loadTests","activation","$activatePlugin","setActivation","unsupportedActivationEvents","SUPPORTED_ACTIVATION_EVENTS","visited","loading","progressId","extensionDependencies","dependencyId","dependency","pluginMain","startPlugin","hostStoragePath","storagePath","baseEvent","activateByBaseEvent","activateBySingleEvent","pendingActivations","logPath","hostLogPath","SecretStorageExt","globalStoragePath","hostGlobalStoragePath","GlobalState","Memento","asAbsolutePath","storageUri","globalStorageUri","environmentVariableCollection","getEnvironmentVariableCollection","extensionMode","logUri","pluginExport","g","activePlugin","isRunning","isPluginGlobalData","storage","getPerPluginData","storageDataChangedEvent","update","setPerPluginData","setKeysForSync","storageDataChangedEmitter","initGlobalData","initWorkspaceData","globalDataCache","workspaceDataCache","isGlobal","$set","$updatePluginsWorkspaceData","workspaceData","injectionRe","PreferenceScope","lookUp","tree","_onDidChangeConfiguration","OVERRIDE_PROPERTY","OVERRIDE_PROPERTY_PATTERN","_preferences","$acceptConfigurationChanged","eventData","toConfigurationChangeEvent","toReadonlyValue","getValue","clonedConfig","cloneOnWriteProxy","accessor","clonedTarget","cloneTarget","cloneDeep","targ","prop","deleteProperty","descr","resourceStr","$updateConfigurationOption","$removeConfigurationOption","inspect","configInspect","default","user","globalValue","workspaceValue","workspaceFolder","workspaceFolderValue","readonlyProxy","isExtensible","preventExtensions","defaultConfiguration","getConfigurationModel","Default","userConfiguration","User","workspaceConfiguration","Workspace","folderConfigurations","Folder","Configuration","ConfigurationModel","parseConfigurationData","branch","affectsConfiguration","preferenceName","prevValue","curValue","folderCombinedConfigs","getCombinedResourceConfig","combinedConfiguration","folderConfiguration","getFolderResourceConfig","combinedConfig","getCombinedConfig","getFolderCombinedConfig","merge","folderConfig","folderCombinedConfig","others","allKeys","mergeContents","mergeKeys","MAX_UINT_32","toUint32","PrefixSumIndexOfResult","prefixSum","prefixSumValidIndex","Int32Array","getCount","insertIndex","oldValues","oldPrefixSum","insertValuesLen","startIndex","cnt","maxCnt","getTotalValue","_getAccumulatedValue","accumulatedValue","midStop","midStart","canceledName","isPromiseCanceledError","getIconUris","getDarkIconUri","getLightIconUri","_sessions","_instances","itemsOrItemsPromise","onDidSelectItem","itemsPromise","widgetPromise","$show","canPickMany","placeHolder","matchOnDescription","matchOnDetail","ignoreFocusLost","ignoreFocusOut","widgetClosedMarker","widgetClosedPromise","pickItems","convertToTransferQuickPickItems","$setItems","h","$setError","$onItemSelected","validateInputHandler","validateInput","$input","$showInputBox","$validateInput","input","QuickPickExt","InputBoxExt","$hide","_fireAccept","changedValue","_fireChangedValue","_fireHide","btn","_fireButtonTrigger","Back","btnFromIndex","buttons","$onDidChangeActive","handles","_fireDidChangeActive","$onDidChangeSelection","_fireDidChangeSelection","QuickInputExt","quickOpen","quickOpenMain","_onDidDispose","_nextId","_buttons","_handlesToButtons","expectingHide","_pendingUpdate","step","totalSteps","busy","visible","disposableCollection","onDidAcceptEmitter","_onDidChangeValueEmitter","onDidHideEmitter","onDidTriggerButtonEmitter","_title","_step","_totalSteps","_enabled","_busy","_ignoreFocusOut","_placeholder","button","properties","_updateTimeout","dispatchUpdate","$createOrUpdate","convertURL","monaco","onDidHide","onDidAccept","onDidChangeValue","onDidTriggerButton","password","_password","prompt","_prompt","validationMessage","_validationMessage","_items","_handlesToItems","_itemsToHandles","_canSelectMany","_matchOnDescription","_matchOnDetail","_sortByLabel","_activeItems","_selectedItems","_onDidChangeActiveEmitter","_onDidChangeSelectionEmitter","onDidChangeActive","onDidChangeSelection","alwaysShow","sortByLabel","activeItems","selectedItems","getIconResource","decorations","comparePaths","one","oneParts","otherParts","lastOne","lastOther","endOne","endOther","toLocaleLowerCase","comparePathComponents","compareResourceThemableDecorations","compareResourceStates","resourceUri","aArg","bArg","compareCommands","strikeThrough","faded","localeCompare","compareResourceStatesDecorations","commandEquals","compareArgs","ScmInputBoxImpl","sourceControlHandle","$setInputBoxValue","updateValue","$setInputBoxPlaceholder","_validateInput","onInputBoxValueChange","SsmResourceGroupImpl","resourceHandlePool","_resourceStates","resourceStatesMap","resourceStatesCommandsMap","resourceStatesDisposablesMap","onDidUpdateResourceStatesEmitter","onDidUpdateResourceStates","onDidDisposeEmitter","onDidDispose","handlesSnapshot","resourceSnapshot","_hideWhenEmpty","handlePool","$updateGroupLabel","hideWhenEmpty","$updateGroup","features","resourceStates","resources","getResourceState","executeResourceCommand","takeResourceStateSnapshot","snapshot","splices","before","after","compare","pushSplice","toInsert","latest","beforeIdx","afterIdx","beforeElement","afterElement","sortedDiff","sourceUri","iconUri","lightIconUri","darkIconUri","icons","rawResource","letter","colorId","rawResourceSplices","rawResources","reverseSplices","handlesToDelete","SourceControlImpl","_rootUri","_count","_quickDiffProvider","_commitTemplate","_acceptInputCommand","_statusBarDisposables","_statusBarCommands","_selected","onDidChangeSelectionEmitter","createdResourceGroups","updatedResourceGroups","_inputBox","$registerSourceControl","$updateSourceControl","quickDiffProvider","hasQuickDiffProvider","commitTemplate","acceptInputCommand","statusBarCommands","itemEquals","equals","selected","createResourceGroup","group","eventuallyAddResourceGroups","updateListener","eventuallyUpdateResourceStates","$unregisterGroup","$registerGroups","$spliceResourceStates","getResourceGroup","setSelectionState","$unregisterSourceControl","sourceControls","sourceControlsByExtension","onDidChangeActiveProviderEmitter","sourceControl","resourceGroupHandle","resourceGroup","resourceStateHandle","onDidChangeActiveProvider","$provideOriginalResource","provideOriginalResource","$onInputBoxValueChange","$executeResourceCommand","groupHandle","cursorPosition","$setSelectedSourceControl","selectedSourceControlHandle","onDidChangePasswordEmitter","onDidChangePassword","$getPassword","store","$setPassword","$deletePassword","pluginDescription","secretState","statusMessage","StatusBarMessage","timeoutOrThenable","setMessage","StatusBarItemImpl","statusBar","_messages","_item","Left","Number","MIN_VALUE","_update","_alignment","_priority","_text","_tooltip","_color","_command","_isVisible","_timeoutHandle","$setMessage","ID_PREFIX","provideTasks","fromTask","resolveTask","toTask","executions","callbackIdBase","customExecutionIds","customExecutionFunctions","onDidExecuteTask","onDidTerminateTask","onDidExecuteTaskProcess","onDidTerminateTaskProcess","execution","terminalId","customExecution","executionId","taskDefinition","pty","attachPtyToTerminal","onDidClose","$customExecutionComplete","lastStartedTask","getTaskExecution","$onDidEndTask","taskExecution","$onDidStartTaskProcess","processId","executionDto","$onDidEndTaskProcess","exitCode","taskId","TaskProviderAdapter","$registerTaskProvider","taskVersion","taskType","$fetchTasks","dto","taskDto","addCustomExecution","$executeTask","$provideTasks","$resolveTask","resolvedTask","terminate","$terminateTask","nextCallbackId","callbackId","_terminals","_pseudoTerminals","onDidCloseTerminalEmitter","onDidOpenTerminalEmitter","onDidChangeActiveTerminalEmitter","environmentVariableCollections","pseudoTerminal","PseudoTerminal","$createTerminal","obtainTerminal","terminal","TerminalExtImpl","$terminalOnInput","emitOnInput","$terminalSizeChanged","clos","emitOnResize","$terminalCreated","$terminalNameChanged","$terminalOpened","deferredProcessId","emitOnOpen","$terminalClosed","emitOnClose","activeTerminalId","$currentTerminalChanged","extensionIdentifier","collection","EnvironmentVariableCollection","setEnvironmentVariableCollection","syncEnvironmentVariableCollection","serialized","$setEnvironmentVariableCollection","persistent","onDidChangeCollection","$initEnvironmentVariableCollections","collections","_persistent","onDidChangeCollectionEmitter","variable","_setIfDiffers","Replace","Append","prepend","Prepend","mutator","sendText","addNewLine","$sendText","waitOnExit","onDidWrite","$writeByTerminalId","$disposeByTerminalId","onDidOverrideDimensions","$resize","columns","$resizeByTerminalId","handleInput","setDimensions","_selections","_visibleRanges","TextEditorOptionsExt","_viewColumn","readonly","acceptViewColumn","acceptOptions","illegalArgument","trySetSelection","fromSelection","runOnProxy","$trySetSelections","acceptSelections","acceptVisibleRanges","_acceptViewColumn","undoStopBefore","undoStopAfter","TextEditorEdit","insertSnippet","snippet","posOrRange","$tryInsertSnippet","setDecorations","decorationType","rangesOrOptions","isDecorationOptionsArr","$trySetDecorations","fromRangeOrRangeWithMessage","$trySetDecorationsFast","revealRange","revealType","$tryRevealRange","editData","finalize","editRanges","rangeEnd","isBefore","forceMoveMarkers","$tryApplyEdits","documentVersionId","setEndOfLine","_tabSize","tabSize","_insertSpace","insertSpaces","_cursorStyle","_lineNumbers","lineNumbers","validateTabSize","warnOnError","$trySetOptions","isNaN","validateInsertSpaces","newOptions","configurationUpdate","hasUpdate","collectedEdits","endOfLine","moveMarkers","validatedRange","_onDidChangeTextEditorSelection","_onDidChangeTextEditorOptions","_onDidChangeTextEditorVisibleRanges","_onDidChangeTextEditorViewColumn","$acceptEditorPropertiesChanged","props","Converters","fromValue","$acceptEditorPositionData","TextEditorDecorationType","$saveAll","Keys","$registerTextEditorDecorationType","DecorationRenderOptions","$removeTextEditorDecorationType","IdGenerator","ColorTheme","Dark","ondDidChangeActiveColorTheme","$onColorThemeChange","convertKind","Light","HighContrast","itemsBySourceAndUriMap","timelineHandle","internalOptions","provideTimeline","timelineDisposables","convertTimelineItem","$fireTimelineChanged","reset","registerTimelineProviderCore","resetCache","convertItem","sourceMap","cacheResults","itemsByUri","uriKey","getUriKey","timestamp","$registerTimelineProvider","$unregisterTimelineProvider","treeViews","treeViewId","treeItemId","treeView","getTreeItem","TreeViewExtImpl","onDidExpandElement","onDidCollapseElement","selectedElements","onDidChangeVisibility","reveal","revealOptions","getTreeView","getChildren","expanded","onExpanded","onCollapsed","treeItemIds","setSelection","isVisible","setVisible","onDidExpandElementEmitter","onDidCollapseElementEmitter","onDidChangeVisibilityEmitter","nodes","pendingRefresh","clearAll","_message","_description","selectedItemIds","_visible","$registerTreeDataProvider","$unregisterTreeDataProvider","onDidChangeTreeData","$refresh","elementParentChain","calculateRevealParentChain","select","focus","expand","$setTitle","$setDescription","getParent","chain","treeItem","cachedParentNode","idLabel","getTreeItemIdLabel","possibleIndex","candidateId","buildTreeItemId","getTreeItemLabel","treeItemLabel","parentNode","clearChildren","treeItemPromises","toDisposeElement","icon","iconUrl","themeIconId","child","cachedElement","toDelete","doSetSelection","selectedItemIts","BUILD_GROUP","TEST_GROUP","fromViewColumn","One","Beside","something","isDecorationOptions","fromManyMarkdown","markup","isMarkdownString","toMarkdown","convertSeverity","convertRelatedInformation","diagnosticsRelatedInformation","relatedInformation","convertTags","markerTags","tag","Unnecessary","ThemableDecorationRenderOptions","ThemableDecorationAttachmentRenderOptions","fromDocumentHighlightKind","Text","Read","Write","toSymbolTag","isModelRange","isUriComponents","fromProcessExecution","fromShellExecution","getShellExecutionOptions","commandLine","getShellArgs","fromCustomExecution","getProcessExecution","getShellExecution","getCustomExecution","shellQuoting","fromFoldingRangeKind","pathOrURIToURI","ep","ONE","TWO","Two","THREE","Three","FOUR","Four","FIVE","Five","SIX","Six","SEVEN","Seven","EIGHT","Eight","NINE","Nine","area","Main","active","anchor","hoverMessage","renderOptions","Method","Function","Constructor","Field","Variable","Class","Interface","Struct","Module","Property","Unit","Value","Constant","Enum","EnumMember","Keyword","Snippet","Reference","Operator","TypeParameter","Issue","hover","targetUri","targetRange","originSelectionRange","targetSelectionRange","documentHighlight","parameters","help","signatures","_allEntries","uriOrEdits","modelVersionId","fromMapping","Namespace","Package","Key","Null","toDocumentSymbol","hasProblemMatchers","problemMatcher","problemMatchers","scope","presentationOptions","presentation","Build","Test","symbolInformation","p1","lstypes","p2","foldingRange","red","green","blue","alpha","colorPresentation","isWholeLine","rangeBehavior","overviewRulerLane","backgroundColor","outline","outlineColor","outlineStyle","outlineWidth","border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","opacity","letterSpacing","gutterIconPath","gutterIconSize","overviewRulerColor","OpenOpen","AlwaysGrowsWhenTypingAtEdges","ClosedClosed","NeverGrowsWhenTypingAtEdges","OpenClosed","GrowsOnlyWhenTypingBefore","ClosedOpen","GrowsOnlyWhenTypingAfter","contentText","contentIconPath","margin","width","height","revived","isUri","schemeOrData","_strict","newPath","posix","es5ClassCompat","Keyboard","Mouse","Command","_line","_character","isBeforeOrEqual","isAfter","isAfterOrEqual","translate","lineDeltaOrChange","characterDelta","lineDelta","lineOrChange","startLineOrStart","startColumnOrEnd","endLine","_start","_end","positionOrRange","Max","Min","union","startOrChange","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","_anchor","_active","isReversed","_tabstop","string","_escape","appendTabstop","number","appendPlaceholder","nested","appendVariable","_newText","newEol","_newEol","rangeOrPosition","intersects","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","_edits","renameFile","_type","createFile","deleteFile","textEdits","rangeOrContainer","locationOrUri","uriOrMessage","terminator","captureStackTrace","messageOrUri","varg1","varg2","executionProcess","executionOptions","shellCommand","shellOptions","shellCommandLine","_callback","groupId","Clean","Rebuild","taskProblemMatchers","hasTaskProblemMatchers","isTaskBackground","taskScope","taskName","isBackground","taskSource","taskGroup","taskPresentationOptions","impl","ColorFormat","tokenTypes","tokenModifiers","_prevLine","_prevChar","_dataIsSortedAndDeltaEncoded","_dataLen","_tokenTypeStrToInt","_tokenModifierStrToInt","_hasLegend","arg4","_pushEncoded","_push","tokenType","nTokenType","nTokenModifiers","tokenModifier","tokenCount","prevLine","prevChar","pushLine","pushChar","aLine","bLine","srcOffset","dstOffset","build","_sortAndDeltaEncode","webviewPanels","serializers","initData","$onMessage","onMessageEmitter","$onDidChangeWebviewPanelViewState","setActive","setViewColumn","onDidChangeViewStateEmitter","$onDidDisposeWebviewPanel","$deserializeWebviewPanel","viewState","revivedPanel","WebviewPanelImpl","deserializeWebviewPanel","webviewShowOptions","toWebviewPanelShowOptions","$createWebviewPanel","$registerSerializer","$unregisterSerializer","onDidReceiveMessage","asWebviewUri","webviewResourceRoot","cspSource","webviewCspSource","html","checkIsDisposed","_html","$setHtml","$setOptions","$postMessage","localResourceRoots","_viewType","_webview","onDidChangeViewState","_showOptions","$disposeWebview","newTitle","_iconPath","$setIconPath","setShowOptions","windowStateChangedEmitter","windowStateCached","focused","$onWindowStateChanged","$openUri","$asExternalUri","USUAL_WORD_SEPARATORS","DEFAULT_WORD_REGEXP","allowInWords","createWordRegExp","textOffset","word","getWordAtPosSlow","getWordAtPosFast","messageService","workspaceFoldersChangedEmitter","documentContentProviders","searchInWorkspaceEmitter","workspaceSearchSequence","folders","workspaceFileUri","$onWorkspaceFoldersChanged","newFolders","roots","deltaFolders","refreshWorkspaceFile","$onWorkspaceLocationChanged","updateWorkSpace","$onTextSearchResult","searchRequestId","matches","tRange","fileUri","lineText","searchId","currentFolders","foldersDiff","folder1","folder2","$pickWorkspaceFolder","includePattern","includeFolderUri","excludePatternOrDisregardExcludes","$startFileSearch","nextSearchID","searchResult","$findTextInFiles","onDidChangeSubscription","$registerTextDocumentContentProvider","$provideTextDocumentContent","$onTextDocumentContentChange","$unregisterTextDocumentContentProvider","documentURI","provideTextDocumentContent","resolveParent","hasFolder","folderPath","rootsToAdd","folderToAdd","currentWorkspaceFolders","newWorkspaceFolders","otherFolder","$updateWorkspaceFolders","$getWorkspace","b64","getLens","validLen","placeHoldersLen","toByteArray","Arr","_byteLength","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","num","ieee754","customInspectSymbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","encodingOrOffset","isEncoding","ArrayBuffer","isView","arrayView","isInstance","fromArrayBuffer","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","poolSize","fill","allocUnsafeSlow","_isBuffer","y","swap16","swap32","swap64","toLocaleString","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","hexSliceLookupTable","checkOffset","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUint16LE","readUint16BE","readUint32LE","readUint32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUint32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","Infinity","base64clean","alphabet","i16","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","versions","electron","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","transform","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","ListCache","MapCache","Stack","__data__","assignValue","object","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","getTag","isFunc","cloneBuffer","isPrototype","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","cloneDataView","typedArray","cloneTypedArray","cloneMap","cloneRegExp","cloneSet","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","arrayBuffer","getMapData","isFunction","baseIsNative","pairs","LARGE_ARRAY_SIZE","isIndex","ctorString","isArrayLike","isLength","inherited","isObjectLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","arrayLikeKeys","baseKeys","safer","Safer","kStringMaxLength","binding","constants","MAX_LENGTH","MAX_STRING_LENGTH","isBufferEncoding","assertEncoding","surrogateSize","detectIncompleteChar","utf16DetectIncompleteChar","base64DetectIncompleteChar","passThroughWrite","charBuffer","charReceived","charLength","charStr","available","cr","rnds8","rng","byteToHex","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","hashfunc","generateUUID","namespace","unescape","stringToBytes","DNS","URL","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","md5ff","md5gg","md5hh","md5ii","v35","length32","hexTab","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","bytesToWords","rnds","z","ROTL","K","H","N","ceil","M","_i","_i2","W","_t","_t2","T","events_1","Is","boolean","stringArray","elem","Touch","First","Last","LinkedMap","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","forEachReverse","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","ProgressType","NullLogger","Off","Messages","Verbose","ConnectionError","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","trace","traceFormat","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","cancelUndispatched","isListening","Listening","Closed","Disposed","closeHandler","triggerMessageQueue","isRequestMessage","requestMessage","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","requestHandler","tokenKey","handlerResult","numberOfParams","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","queue","addMessageToQueue","lspMessage","isLSPMessage","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","onProgress","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","traceSendingRequest","MessageWriteError","onRequest","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","listen","AlreadyListening","throwIfListening","verbose","ConnectionStrategy","createMessageConnection","reader","writer","isMessageWriter","DefaultSize","CR","MessageBuffer","toAppend","bufferLen","newSize","tryReadHeaders","header","nextStart","tryReadContent","numberOfBytes","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","fireClose","firePartialMessage","_partialMessageTimeout","partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","headers","setPartialMessageTimer","clearPartialMessageTimer","json","waitingTime","eventEmitter","ContentLength","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","createServer","onConnected","createServerPipeTransport","createClientSocketTransport","createServerSocketTransport","vscode_jsonrpc_1","callHierarchy","st","Proposed","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","SemanticTokenTypes","SemanticTokenModifiers","createProtocolConnection","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","DocumentColorRequest","resultType","ColorPresentationRequest","ConfigurationRequest","DeclarationRequest","FoldingRangeRequest","ImplementationRequest","protocol_implementation_1","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","SelectionRangeRequest","protocol_progress_1","DocumentFilter","DocumentSelector","PrepareRenameRequest","RenameRequest","DocumentOnTypeFormattingRequest","DocumentRangeFormattingRequest","DocumentFormattingRequest","DocumentLinkRequest","CodeLensRequest","WorkspaceSymbolRequest","CodeActionRequest","DocumentSymbolRequest","DocumentHighlightRequest","ReferencesRequest","DefinitionRequest","SignatureHelpRequest","HoverRequest","CompletionResolveRequest","CompletionRequest","WatchKind","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","DidSaveTextDocumentNotification","DidCloseTextDocumentNotification","DidChangeTextDocumentNotification","DidOpenTextDocumentNotification","TextDocumentSyncKind","MessageType","WorkDoneProgressOptions","FailureHandlingKind","ResourceOperationKind","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","RegistrationRequest","UnregistrationRequest","Create","Rename","Delete","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","objectLiteral","workDoneProgress","hasWorkDoneProgress","InitializeRequest","InitializeError","unknownProtocolVersion","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","Log","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","Full","Incremental","Manual","AfterDelay","FocusOut","DidChangeWatchedFilesNotification","Change","PublishDiagnosticsNotification","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","ContentChange","CodeLensResolveRequest","DocumentLinkResolveRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","check","LocationLink","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","two","three","four","defined","startLine","startCharacter","endCharacter","del","textDocument","VersionedTextDocumentIdentifier","ignoreIfExists","ignoreIfNotExists","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","InsertTextFormat","MarkedString","CodeActionContext","FormattingOptions","TextEditChangeImpl","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textEditChange","configurable","getTextEditChange","textDocumentEdit","checkDocumentChanges","PlainText","Markdown","fromPlainText","plainText","commandOrEdit","isPreferred","TextDocument","mergeSort","leftIdx","rightIdx","FullTextDocument","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","lineOffset","nextLineOffset","extendStatics","_a","__extends","__proto__","__","_schemePattern","_singleSlashStart","_doubleSlashStart","_empty","_slash","_regexp","_schemeFix","_referenceResolution","_validateUri","uriToFsPath","_URI","percentDecode","_asFormatted","_formatted","_fsPath","_sep","_pathSepMarker","_super","$mid","encodeURIComponentFast","allowSlash","nativeEncodePos","escaped","encodeURIComponentMinimal","keepDriveLetterCasing","userinfo","decodeURIComponentGraceful","_rEncodedAsHex"],"sourceRoot":""}